<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Chapter 3 Using MySQL as a Document Store</title>
<link rel="stylesheet" href="mvl.css" type="text/css" />
<meta name="generator" content="DocBook XSL Stylesheets + chunker.py v1.9.2" />
<link rel="start" href="index.html" title="{book-title}" />
<link rel="up" href="" title="" />
<link rel="prev" href="installing.html" title="Chapter 2 Installing and Upgrading MySQL" />
<link rel="next" href="tutorial.html" title="Chapter 4 Tutorial" />
<script language="javascript" type="text/javascript">
  function addOnload(theFunc)
  {
    var previous = window.onload;
    if (typeof window.onload != 'function')
    {
      window.onload = theFunc;
    }
    else
    {
      window.onload = function()
      {
        previous();
        theFunc();
      }
    }
  }

  addOnload(function()
  {
    var base = new Date(1478886989*1000);
    var now = new Date();
    var diff = ((now-base)/1000)/(24*3600);

    if (diff > 90) {
      var nodes = document.getElementsByClassName('titlepage');
      nodes[0].innerHTML = '<p style="border: 5px #ff0000 solid; padding: 5px; margin 5px">' +
        'This copy of the manual is more than 90 days old. We encourage you to download a ' +
        'new version from <a href="http://dev.mysql.com">dev.mysql.com/doc</a>.</p>' + nodes[0].innerHTML;
    }
  });
</script>
<noscript></noscript>
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader">
<table width="100%" summary="Navigation header">
<tr>
<th colspan="3" align="center">Chapter 3 Using MySQL as a Document Store</th>
</tr>
<tr>
<td width="20%" align="left"><a accesskey="p" href="installing.html">Prev</a> </td>
<th width="60%" align="center"></th>
<td width="20%" align="right"> <a accesskey="n" href="tutorial.html">Next</a></td>
</tr>
</table>
<hr>
</div>
<div class="chapter">
<div class="titlepage">
<div>
<div>
<h1 class="title"><a name="document-store"></a>Chapter 3 Using MySQL as a Document Store</h1>

</div>

</div>

</div>
<div class="toc">
<p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="document-store.html#document-store-legalnotice">3.1 Preproduction Status — Legal Notice</a></span></dt><dt><span class="section"><a href="document-store.html#document-store-concepts">3.2 Key Concepts</a></span></dt><dt><span class="section"><a href="document-store.html#document-store-setting-up">3.3 Setting Up MySQL as a Document Store</a></span></dt><dd><dl><dt><span class="section"><a href="document-store.html#document-store-shell-install">3.3.1 Installing MySQL Shell</a></span></dt><dt><span class="section"><a href="document-store.html#installing-mysql-shell-starting">3.3.2 Starting MySQL Shell</a></span></dt></dl></dd><dt><span class="section"><a href="document-store.html#mysql-shell-tutorial-javascript">3.4 Quick-Start Guide: MySQL Shell for JavaScript</a></span></dt><dd><dl><dt><span class="section"><a href="document-store.html#mysql-shell-tutorial-javascript-introduction">3.4.1 Introduction</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-tutorial-javascript-download">3.4.2 Import Database Sample</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-tutorial-javascript-shell">3.4.3 MySQL Shell</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-tutorial-javascript-documents-collections">3.4.4 Documents and Collections</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-tutorial-javascript-relational-tables">3.4.5 Relational Tables</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-tutorial-javascript-documents-in-tables">3.4.6 Documents in Tables</a></span></dt></dl></dd><dt><span class="section"><a href="document-store.html#mysql-shell-tutorial-python">3.5 Quick-Start Guide: MySQL Shell for Python</a></span></dt><dd><dl><dt><span class="section"><a href="document-store.html#mysql-shell-tutorial-python-introduction">3.5.1 Introduction</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-tutorial-python-download">3.5.2 Import Database Sample</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-tutorial-python-shell">3.5.3 MySQL Shell</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-tutorial-python-collections">3.5.4 Documents and Collections</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-tutorial-python-relational-tables">3.5.5 Relational Tables</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-tutorial-python-documents-in-tables">3.5.6 Documents in Tables</a></span></dt></dl></dd><dt><span class="section"><a href="document-store.html#mysql-shell-visual-studio">3.6 Quick-Start Guide: MySQL for Visual Studio</a></span></dt><dt><span class="section"><a href="document-store.html#x-plugin">3.7 X Plugin</a></span></dt><dd><dl><dt><span class="section"><a href="document-store.html#x-plugin-ssl-connections">3.7.1 Using Secure Connections with X Plugin</a></span></dt><dt><span class="section"><a href="document-store.html#x-plugin-options-variables">3.7.2 X Plugin Options and Variables</a></span></dt><dt><span class="section"><a href="document-store.html#x-plugin-system-monitoring">3.7.3 Monitoring X Plugin</a></span></dt></dl></dd><dt><span class="section"><a href="document-store.html#mysql-shell">3.8 MySQL Shell User Guide</a></span></dt><dd><dl><dt><span class="section"><a href="document-store.html#mysql-shell-features">3.8.1 MySQL Shell Features</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-getting-started">3.8.2 Getting Started with MySQL Shell</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-code-execution">3.8.3 MySQL Shell Code Execution</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-configuring">3.8.4 Configuring MySQL Shell</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-stored-sessions">3.8.5 Stored Sessions</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-application-log">3.8.6 MySQL Shell Application Log</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-customizing">3.8.7 Customizing MySQL Shell</a></span></dt></dl></dd></dl>
</div>
<a class="indexterm" name="idm139777647092128"></a><a class="indexterm" name="idm139777647091088"></a><a class="indexterm" name="idm139777647089600"></a><p>
    This chapter introduces an alternative way of working with MySQL as
    a document store, sometimes referred to as <span class="quote">“<span class="quote">using
    NoSQL</span>”</span>. If your intention is to use MySQL in a traditional
    (SQL) way, this chapter is probably not relevant to you.
  </p><p>
    Using MySQL as a document store is currently a preproduction feature
    to which this notice applies:
    <a class="xref" href="document-store.html#document-store-legalnotice" title="3.1 Preproduction Status — Legal Notice">Section 3.1, “Preproduction Status — Legal Notice”</a>.
  </p><p>
    Relational databases such as MySQL usually required a document
    schema to be defined before documents can be stored. The features
    described in this section enable you to use MySQL as a document
    store, which is a schema-less, and therefore schema-flexible,
    storage system for documents. When using MySQL as a document store,
    to create documents describing products you do not need to know and
    define all possible attributes of any products before storing them
    and operating with them. This differs from working with a relational
    database and storing products in a table, when all columns of the
    table must be known and defined before adding any products to the
    database. The features described in this chapter enable you to
    choose how you configure MySQL, using only the document store model,
    or combining the flexibility of the document store model with the
    power of the relational model.
  </p><p>
    These sections cover the usage of MySQL as a document store:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
        The <a class="xref" href="document-store.html#document-store-concepts" title="3.2 Key Concepts">Section 3.2, “Key Concepts”</a> section covers
        concepts like Document, Collection, Session, and Schema to help
        you understand how to use MySQL as a document store.
      </p></li><li class="listitem"><p>
        The <a class="xref" href="document-store.html#document-store-setting-up" title="3.3 Setting Up MySQL as a Document Store">Section 3.3, “Setting Up MySQL as a Document Store”</a> section
        explains how to configure X Plugin on a MySQL Server, so
        it can function as a document store, and how to install
        MySQL Shell to use as a client.
      </p></li><li class="listitem"><p>
        The MySQL Shell is an interactive interface to MySQL
        supporting JavaScript, Python, or SQL modes. You can use the
        MySQL Shell to prototype applications, execute queries and
        update data. The <span class="emphasis"><em>quick-start guides
        (tutorials)</em></span> help you to get started using
        MySQL Shell.
      </p><p>
        The quick-start guide for JavaScript is here:
        <a class="xref" href="document-store.html#mysql-shell-tutorial-javascript" title="3.4 Quick-Start Guide: MySQL Shell for JavaScript">Section 3.4, “Quick-Start Guide: MySQL Shell for JavaScript”</a>.
      </p><p>
        The quick-start guide for Python is here:
        <a class="xref" href="document-store.html#mysql-shell-tutorial-python" title="3.5 Quick-Start Guide: MySQL Shell for Python">Section 3.5, “Quick-Start Guide: MySQL Shell for Python”</a>.
      </p></li><li class="listitem"><p>
        <a class="xref" href="document-store.html#mysql-shell" title="3.8 MySQL Shell User Guide">Section 3.8, “MySQL Shell User Guide”</a> provides more detailed information
        about using MySQL Shell.
      </p></li><li class="listitem"><p>
        <span class="emphasis"><em>X DevAPI User guide.</em></span>
      </p><p>
        Clients that communicate with a MySQL Server using the
        X Protocol can use the X DevAPI to develop
        applications. For example MySQL Shell and MySQL Connectors
        provide this ability by implementing the X DevAPI.
        X DevAPI offers a modern programming interface with a
        simple yet powerful design which provides support for
        established industry standard concepts. See
        <a class="ulink" href="http://dev.mysql.com/doc/x-devapi-userguide/en/" target="_top">X DevAPI User Guide</a> for in-depth tutorials on
        using X DevAPI.
      </p></li><li class="listitem"><p>
        The following MySQL Connectors support the X Protocol and
        enable you to use X DevAPI in your chosen language to
        develop applications that communicate with a MySQL Server
        functioning as a document store.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
            <a class="ulink" href="http://dev.mysql.com/doc/dev/mysqlsh-devapi/" target="_top">MySQL
            Shell JavaScript and Python X DevAPI Reference</a>
          </p></li><li class="listitem"><p>
            <a class="ulink" href="http://dev.mysql.com/doc/dev/connector-j/" target="_top">MySQL
            Connector/J X DevAPI Reference</a>
          </p></li><li class="listitem"><p>
            <a class="ulink" href="http://dev.mysql.com/doc/dev/connector-nodejs/" target="_top">MySQL
            Connector/Node.js X DevAPI Reference</a>
          </p></li><li class="listitem"><p>
            <a class="ulink" href="http://dev.mysql.com/doc/dev/connector-net/" target="_top">MySQL
            Connector/Net X DevAPI Reference</a>
          </p></li><li class="listitem"><p>
            <a class="ulink" href="http://dev.mysql.com/doc/dev/connector-python/" target="_top">MySQL
            Connector/Python X DevAPI Reference</a>
</p></li></ul>
</div>
<p>
        Each implementation of X DevAPI provides library reference
        documentation, available at the above links.
</p></li></ul>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="document-store-legalnotice"></a>3.1 Preproduction Status — Legal Notice</h2>

</div>

</div>

</div>
<p>
      This documentation is in preproduction status and is intended for
      demonstration and preliminary use only. It may not be specific to
      the hardware on which you are using the software. Oracle
      Corporation and its affiliates are not responsible for and
      expressly disclaim all warranties of any kind with respect to this
      documentation and will not be responsible for any loss, costs, or
      damages incurred due to the use of this documentation.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="document-store-concepts"></a>3.2 Key Concepts</h2>

</div>

</div>

</div>
<p>
      This section explains the concepts introduced as part of using
      MySQL as a document store.
</p>
<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h3 class="title"><a name="document-store-concept-document"></a>Document</h3>
</div>
</div>
</div>
<p>
        A Document is a set of key and value pairs, as represented by a
        JSON object. A Document is represented internally using the
        MySQL binary JSON object, through the JSON MySQL datatype. The
        values of fields can contain other documents, arrays, and lists
        of documents.
      </p><pre class="programlisting">
{
    "GNP": .6,
    "IndepYear": 1967,
    "Name": "Sealand",
    "_id": "SEA",
    "demographics": {
        "LifeExpectancy": 79,
        "Population": 27
    },
    "geography": {
        "Continent": "Europe",
        "Region": "British Islands",
        "SurfaceArea": 193
    },
    "government": {
        "GovernmentForm": "Monarchy",
        "HeadOfState": "Michael Bates"
    }
}
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h3 class="title"><a name="document-store-concept-collection"></a>Collection</h3>

</div>

</div>

</div>
<p>
        A Collection is a container that may be used to store Documents
        in a MySQL database.
</p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h3 class="title"><a name="document-store-concept-crud"></a>CRUD Operations</h3>

</div>

</div>

</div>
<p>
        Create, Read, Update and Delete (CRUD) operations are the four
        basic operations that can be performed on a database Collection
        or Table. In terms of MySQL this means:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Create a new entry (insertion or addition)
          </p></li><li class="listitem"><p>
            Read entries (queries)
          </p></li><li class="listitem"><p>
            Update entries
          </p></li><li class="listitem"><p>
            Delete entries
</p></li></ul>
</div>

</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h3 class="title"><a name="document-store-concept-xplugin"></a>X Plugin</h3>

</div>

</div>

</div>
<p>
        The MySQL Server plugin which enables communication using
        X Protocol. Supports clients that implement X DevAPI
        and enables you to use MySQL as a document store.

        
</p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h3 class="title"><a name="document-store-concept-xprotocol"></a>X Protocol</h3>

</div>

</div>

</div>
<p>
        A protocol to communicate with a MySQL Server running
        X Plugin. X Protocol supports both CRUD and SQL
        operations, authentication via SASL, allows streaming
        (pipelining) of commands and is extensible on the protocol and
        the message layer.
</p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="document-store-setting-up"></a>3.3 Setting Up MySQL as a Document Store</h2>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="document-store.html#document-store-shell-install">3.3.1 Installing MySQL Shell</a></span></dt><dt><span class="section"><a href="document-store.html#installing-mysql-shell-starting">3.3.2 Starting MySQL Shell</a></span></dt></dl>
</div>
<p>
    This section describes how to install the X Plugin to enable MySQL
    Server to use the X Protocol and use MySQL Shell to act as a
    client to the server.
  </p><p>
    The prerequisite for using MySQL as a document store is the
    X Plugin, which implements the X Protocol. Without the
    X Plugin running, X Protocol clients cannot connect to
    the server. The X Plugin is shipped with MySQL (5.7.12 or
    higher) — installing it does not involve a separate download.
  </p><p>
    Setting up MySQL as a document store follows the steps outlined
    here:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
        <span class="bold"><strong>Install or upgrade to MySQL 5.7.12 or
        higher.</strong></span>
      </p><p>
        When the <a class="link" href="installing.html" title="Chapter 2 Installing and Upgrading MySQL">installation</a> or
        upgrade is done, start the server. For server startup
        instructions, see <a class="xref" href="installing.html#starting-server" title="2.10.2 Starting the Server">Section 2.10.2, “Starting the Server”</a>.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
          MySQL Installer enables you to perform this and the next step
          (Install the X Plugin) at the same time for new
          installations on Microsoft Windows. In the <span class="guilabel">Plugin
          and Extensions</span> screen, check mark the
          <span class="guilabel">Enable X Protocol/MySQL as a Document
          Store</span> check box. After the installation, verify
          that the X Plugin has been installed.
</p>
</div>
</li><li class="listitem"><p><a name="installing-xplugin-linux-quick"></a>
        <span class="bold"><strong>Install the X Plugin.</strong></span> A
        non-root account can be used to install the plugin as long as
        the account has <a class="link" href="security.html#priv_insert"><code class="literal">INSERT</code></a> privilege
        for the <code class="literal">mysql.plugin</code> table.
      </p><p>
        Always save your existing configuration settings before
        reconfiguring the server.
      </p><p>
        To install the built-in X Plugin, do one of the following:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Using <a class="link" href="installing.html#mysql-installer-gui" title="2.3.3.1 MySQL Installer GUI">MySQL Installer
            for Windows</a>:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="a"><li class="listitem"><p>
                Launch MySQL Installer for Windows. MySQL Installer
                dashboard opens.
              </p></li><li class="listitem"><p>
                Click the <span class="guilabel">Reconfigure</span> quick action
                for MySQL Server. Use <span class="guibutton">Next</span> and
                <span class="guibutton">Back</span> to configure the following
                items:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                    In <span class="guilabel">Accounts and Roles</span>, confirm
                    the current <code class="literal">root</code> account
                    password.
                  </p></li><li class="listitem"><p>
                    In <span class="guilabel">Plugin and Extensions</span>, check
                    mark the <span class="guilabel">Enable X Protocol/MySQL as
                    a Document Store</span> check box. MySQL
                    Installer provides a default port number and opens
                    the firewall port for network access.
                  </p></li><li class="listitem"><p>
                    In <span class="guilabel">Apply Server Configuration</span>,
                    click <span class="guilabel">Execute</span>.
                  </p></li><li class="listitem"><p>
                    Click <span class="guibutton">Finish</span> to close MySQL
                    Installer.
</p></li></ul>
</div>
</li><li class="listitem"><p>
                <a class="link" href="document-store.html#installing-mysql-shell-windows-quick" title="3.3.1.1 Installing MySQL Shell on Microsoft Windows">Install
                MySQL Shell</a>.
</p></li></ol>
</div>
</li><li class="listitem"><p>
            Using MySQL Shell:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="a"><li class="listitem"><p>
                <a class="link" href="document-store.html#document-store-shell-install" title="3.3.1 Installing MySQL Shell">Install
                MySQL Shell</a>.
              </p></li><li class="listitem"><p>
                Open a terminal window (command prompt on Windows) and
                navigate to the MySQL binaries location (for example,
                <code class="filename">/usr/bin/</code> on Linux).
              </p></li><li class="listitem"><p>
                Run the following command:
              </p><pre class="programlisting">
mysqlsh -u <em class="replaceable"><code>user</code></em> -h localhost --classic --dba enableXProtocol
</pre></li></ol>
</div>
</li><li class="listitem"><p>
            Using the MySQL Client program:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="a"><li class="listitem"><p>
                Open a terminal window (command prompt on Windows) and
                navigate to the MySQL binaries location (for example,
                <code class="filename">/usr/bin/</code> on Linux).
              </p></li><li class="listitem"><p>
                Invoke the <a class="link" href="programs.html#mysql" title="5.5.1 mysql — The MySQL Command-Line Tool"><span class="command"><strong>mysql</strong></span></a> command-line client:
              </p><pre class="programlisting">
mysql -u <em class="replaceable"><code>user</code></em> -p
</pre></li><li class="listitem"><p>
                Issue the following statement:
              </p><pre class="programlisting">
mysql&gt; <strong class="userinput"><code>INSTALL PLUGIN mysqlx SONAME 'mysqlx.so';</code></strong>
</pre><p>
                Replace <code class="filename">mysqlx.so</code> with
                <code class="filename">mysqlx.dll</code> for Windows.
              </p></li><li class="listitem"><p>
                <a class="link" href="document-store.html#installing-mysql-shell-windows-quick" title="3.3.1.1 Installing MySQL Shell on Microsoft Windows">Install
                MySQL Shell</a>.
</p></li></ol>
</div>
</li></ul>
</div>
</li><li class="listitem"><p>
        <span class="bold"><strong>Verify that the X Plugin has been
        installed.</strong></span>
      </p><p>
        When the X Plugin is installed properly, it shows up in
        the list when you query for active plugins on the server with
        one of the following commands:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            MySQL Shell command:
          </p><pre class="programlisting">
<strong class="userinput"><code>mysqlsh -u <em class="replaceable"><code>user</code></em> --sqlc -e "show plugins"</code></strong>
</pre></li><li class="listitem"><p>
            MySQL Client program command:
          </p><pre class="programlisting">
<strong class="userinput"><code>mysql -u <em class="replaceable"><code>user</code></em> -p -e "show plugins"</code></strong>
</pre></li></ul>
</div>
<p>
        If you encounter problems with the X Plugin installation,
        or if you want to learn about alternative ways of installing,
        configuring, or uninstalling server plugins, see
        <a class="xref" href="server-administration.html#server-plugin-loading" title="6.5.2 Installing and Uninstalling Plugins">Section 6.5.2, “Installing and Uninstalling Plugins”</a>.
</p></li></ol>
</div>
<h3><a name="idm139777646980208"></a><code class="literal">mysqlxsys@localhost</code> User Account</h3>
<p>
    Installing the X Plugin creates a
    <code class="literal">mysqlxsys@localhost</code> user account. If, for some
    reason, creating the user account fails, the X Plugin
    installation fails, too. Here is an explanation on what the
    <code class="literal">mysqlxsys@localhost</code> user account is for and what
    to do when its creation fails.
  </p><p>
    The X Plugin installation process uses the MySQL
    <code class="literal">root</code> user to create an internal account for the
    <code class="literal">mysqlxsys@localhost</code> user. The
    <code class="literal">mysqlxsys@localhost</code> account is used by the
    X Plugin for authentication of external users against the
    MySQL account system and for killing sessions when requested by a
    privileged user. The <code class="literal">mysqlxsys@localhost</code> account
    is created as locked, so it cannot be used to log in by external
    users. If for some reason the MySQL <code class="literal">root</code> account
    is not available, before you start the X Plugin installation
    you must manually create the <code class="literal">mysqlxsys@localhost</code>
    user by issuing the following statements in the
    <a class="link" href="programs.html#mysql" title="5.5.1 mysql — The MySQL Command-Line Tool"><span class="command"><strong>mysql</strong></span></a> command-line client:
  </p><pre class="programlisting">
<strong class="userinput"><code>CREATE USER IF NOT EXISTS mysqlxsys@localhost IDENTIFIED WITH
mysql_native_password AS 'password' ACCOUNT LOCK;
GRANT SELECT ON mysql.user TO mysqlxsys@localhost;
GRANT SUPER ON *.* TO mysqlxsys@localhost;</code></strong>
</pre>
<h3><a name="idm139777646968864"></a>Uninstalling the X Plugin</h3>
<p>
    If you ever want to uninstall (deactivate) the X Plugin, issue
    the following statement in the <a class="link" href="programs.html#mysql" title="5.5.1 mysql — The MySQL Command-Line Tool"><span class="command"><strong>mysql</strong></span></a> command-line
    client:
  </p><pre class="programlisting">
<strong class="userinput"><code>UNINSTALL PLUGIN mysqlx;</code></strong>
</pre><p>
    Do not use MySQL Shell to issue the previous statement. It works
    from MySQL Shell, but you get an error (code 1130). Also,
    uninstalling the plugin removes the mysqlxsys user.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="document-store-shell-install"></a>3.3.1 Installing MySQL Shell</h3>

</div>

</div>

</div>

<div class="toc">
<dl class="toc"><dt><span class="section"><a href="document-store.html#installing-mysql-shell-windows-quick">3.3.1.1 Installing MySQL Shell on Microsoft Windows</a></span></dt><dt><span class="section"><a href="document-store.html#installing-mysql-shell-linux-quick">3.3.1.2 Installing MySQL Shell on Linux</a></span></dt><dt><span class="section"><a href="document-store.html#installing-mysql-shell-osx-quick">3.3.1.3 Installing MySQL Shell on OS X</a></span></dt></dl>
</div>
<p>
      This section describes how to download, install, and start
      MySQL Shell, which is an interactive JavaScript, Python, or SQL
      interface supporting development and administration for the MySQL
      Server. MySQL Shell is a component of MySQL 5.7.12 or higher
      that you can install separately.
</p>
<h4><a name="idm139777646962544"></a>Requirements</h4>
<p>
      MySQL Shell is available on Microsoft Windows, Linux, and OS X
      for 64-bit platforms. MySQL Shell requires that the built-in
      X Plugin be active for MySQL 5.7.12 or higher. You can
      install the server plugin before or after you install
      MySQL Shell. For instructions, see
      <a class="link" href="document-store.html#installing-xplugin-linux-quick">Installing the
      X Plugin</a>.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="installing-mysql-shell-windows-quick"></a>3.3.1.1 Installing MySQL Shell on Microsoft Windows</h4>
</div>
</div>
</div>
<p>
        To install MySQL Shell on Microsoft Windows using the MSI
        Installer, do the following:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
            Download the <span class="bold"><strong>Windows (x86, 64-bit),
            MSI Installer</strong></span> package from
            <a class="ulink" href="http://dev.mysql.com/downloads/shell/" target="_top">http://dev.mysql.com/downloads/shell/</a>.
          </p></li><li class="listitem"><p>
            When prompted, click <span class="guibutton">Run</span>.
          </p></li><li class="listitem"><p>
            Follow the steps in the Setup Wizard.
</p>
<div class="figure">
<a name="fig-x-installation-mysql-shell-win-quick"></a><p class="title"><b>Figure 3.1 Installation of MySQL Shell on Windows</b></p>
<div class="figure-contents">

<div class="mediaobject">
<img src="images/x-installation-mysql-shell-win.png" width="512" height="399" alt="Installation of MySQL Shell on Windows">
</div>

</div>

</div>
<br class="figure-break"></li></ol>
</div>
<p>
        If you have installed MySQL without enabling the X Plugin,
        then later on decide you want to install the X Plugin, or
        if you are installing MySQL <span class="emphasis"><em>without</em></span> using
        MySQL Installer, see
        <a class="link" href="document-store.html#installing-xplugin-linux-quick">Installing
        the X Plugin</a>.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="installing-mysql-shell-linux-quick"></a>3.3.1.2 Installing MySQL Shell on Linux</h4>

</div>

</div>

</div>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<div class="admon-title">
Note
</div>
<p>
          Installation packages for MySQL Shell are available only for
          a limited number of Linux distributions, and only for 64-bit
          systems.
</p>
</div>
<p>
        For supported Linux distributions, the easiest way to install
        MySQL Shell on Linux is to use the
        <a class="ulink" href="http://dev.mysql.com/downloads/repo/apt/" target="_top">MySQL APT
        repository</a> or
        <a class="ulink" href="http://dev.mysql.com/downloads/repo/yum/" target="_top">MySQL Yum
        repository</a>. For systems not using the MySQL
        repositories, MySQL Shell can also be downloaded and installed
        directly.
</p>
<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h5 class="title"><a name="installing-mysql-shell-linux-apt"></a>Installing MySQL Shell with the MySQL APT Repository</h5>

</div>

</div>

</div>

<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
            Installation of MySQL Shell using the MySQL APT repository
            is only supported on Ubuntu 14.04 LTS (“Trusty Tahr”)
            and Ubuntu 15.10 (“Wily Werewolf”).
</p>
</div>
<p>
          For Linux distributions supported by the
          <a class="ulink" href="http://dev.mysql.com/downloads/repo/apt/" target="_top">MySQL APT
          repository</a>, follow one of the paths below:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              If you do not yet have the
              <a class="ulink" href="http://dev.mysql.com/downloads/repo/apt/" target="_top">MySQL APT
              repository</a> as a software repository on your
              system, do the following:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  Follow the steps given in
                  <a class="ulink" href="http://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/#apt-repo-setup" target="_top">Adding
                  the MySQL APT Repository</a>, paying special
                  attention to the following:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>
                      During the installation of the configuration
                      package, when asked in the dialogue box to
                      configure the repository, make sure you choose
                      MySQL 5.7 (which is the default option) as the
                      release series you want, and enable the
                      <span class="guimenuitem">MySQL Preview Packages</span>
                      component.
                    </p></li><li class="listitem"><p>
                      Make sure you do not skip the step for updating
                      package information for the MySQL APT repository:
</p><pre class="programlisting"><strong class="userinput"><code>sudo apt-get update</code></strong></pre></li></ul>
</div>
</li><li class="listitem"><p>
                  Install MySQL Shell with this command:
                </p><pre class="programlisting">
<strong class="userinput"><code>sudo apt-get install mysql-shell</code></strong>
</pre></li></ul>
</div>
</li><li class="listitem"><p>
              If you already have the
              <a class="ulink" href="http://dev.mysql.com/downloads/repo/apt/" target="_top">MySQL APT
              repository</a> as a software repository on your
              system, do the following:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  Update package information for the MySQL APT
                  repository:
                </p><pre class="programlisting">
<strong class="userinput"><code>sudo apt-get update</code></strong>
</pre></li><li class="listitem"><p>
                  Update the MySQL APT repository configuration package
                  with the following command:
                </p><pre class="programlisting">
<strong class="userinput"><code>sudo apt-get install mysql-apt-config</code></strong>
</pre><p>
                  When asked in the dialogue box to configure the
                  repository, make sure you choose MySQL 5.7 (which is
                  the default option) as the release series you want,
                  and enable the <span class="guimenuitem">MySQL Preview
                  Packages</span> component.
                </p></li><li class="listitem"><p>
                  Install MySQL Shell with this command:
                </p><pre class="programlisting">
<strong class="userinput"><code>sudo apt-get install mysql-shell</code></strong>
</pre></li></ul>
</div>
</li></ul>
</div>

</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="installing-mysql-shell-linux-yum"></a>Installing MySQL Shell with the MySQL Yum Repository</h5>

</div>

</div>

</div>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<div class="admon-title">
Note
</div>
<p>
            Installation of MySQL Shell using the MySQL Yum repository
            is only supported on EL6 and EL7-based systems, as well as
            Fedora 23 and 24.
</p>
</div>
<p>
          For Linux distributions supported by the
          <a class="ulink" href="http://dev.mysql.com/downloads/repo/yum/" target="_top">MySQL Yum
          repository</a>, follow these steps to install
          MySQL Shell:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              Do one of the following:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  If you already have the
                  <a class="ulink" href="http://dev.mysql.com/downloads/repo/yum/" target="_top">MySQL Yum
                  repository</a> as a software repository on your
                  system and the repository was configured with the new
                  release package
                  <code class="literal">mysql57-community-release</code>, skip to
                  the next step (<span class="quote">“<span class="quote">Enable the MySQL Tools Preview
                  subrepository...</span>”</span>).
                </p></li><li class="listitem"><p>
                  If you already have the
                  <a class="ulink" href="http://dev.mysql.com/downloads/repo/yum/" target="_top">MySQL Yum
                  repository</a> as a software repository on your
                  system but have configured the repository with the old
                  release package
                  <code class="literal">mysql-community-release</code>, it is
                  easiest to install MySQL Shell by first
                  reconfiguring the MySQL Yum repository with the new
                  <code class="literal">mysql57-community-release</code> package.
                  To do so, you need to remove your old release package
                  first, with the following command :
                </p><pre class="programlisting">
<strong class="userinput"><code>sudo yum remove mysql-community-release</code></strong>
</pre><p>
                  For dnf-enabled systems, do this instead:
                </p><pre class="programlisting">
<strong class="userinput"><code>sudo dnf erase mysql-community-release</code></strong>
</pre><p>
                  Then, follow the steps given in
                  <a class="ulink" href="http://dev.mysql.com/doc/mysql-yum-repo-quick-guide/en/#repo-qg-yum-repo-setup" target="_top">Adding
                  the MySQL Yum Repository</a> to install the new
                  release package,
                  <code class="literal">mysql57-community-release</code>.
                </p></li><li class="listitem"><p>
                  If you do not yet have the
                  <a class="ulink" href="http://dev.mysql.com/downloads/repo/yum/" target="_top">MySQL Yum
                  repository</a> as a software repository on your
                  system, follow the steps given in
                  <a class="ulink" href="http://dev.mysql.com/doc/mysql-yum-repo-quick-guide/en/#repo-qg-yum-repo-setup" target="_top">Adding
                  the MySQL Yum Repository</a>.
</p></li></ul>
</div>
</li><li class="listitem"><p>
              Enable the MySQL Tools Preview subrepository. You can do
              that by editing manually the
              <code class="filename">/etc/yum.repos.d/mysql-community.repo</code>
              file. This is an example of the subrepository's default
              entry in the file (the <code class="literal">baseurl</code> entry in
              your file might look different, depending on your Linux
              distribution):
            </p><pre class="screen">
[mysql-tools-preview]
name=MySQL Tools Preview
baseurl=http://repo.mysql.com/yum/mysql-tools-preview/el/6/$basearch/
enabled=0
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql
</pre><p>
              Change the entry <code class="option">enabled=0</code> to
              <code class="option">enabled=1</code> to enable the subrepository.
            </p></li><li class="listitem"><p>
              Install MySQL Shell with this command:
            </p><pre class="programlisting">
<strong class="userinput"><code>sudo yum install mysql-shell</code></strong>
</pre><p>
              For dnf-enabled systems, do this instead:
            </p><pre class="programlisting">
<strong class="userinput"><code>sudo dnf install mysql-shell</code></strong>
</pre></li></ul>
</div>

</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="installing-mysql-shell-linux-direct"></a>Installing MySQL Shell from Direct Downloads from the MySQL Developer
Zone</h5>
</div>
</div>
</div>
<p>
          RPM, Debian, and source packages for installing MySQL Shell
          are also available for download at
          <a class="ulink" href="http://dev.mysql.com/downloads/shell/" target="_top">Download MySQL
          Shell</a>.
</p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="installing-mysql-shell-osx-quick"></a>3.3.1.3 Installing MySQL Shell on OS X</h4>

</div>

</div>

</div>
<p>
        To install MySQL Shell on OS X, do the following:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
            Download the package from
            <a class="ulink" href="http://dev.mysql.com/downloads/shell/" target="_top">http://dev.mysql.com/downloads/shell/</a>.
          </p></li><li class="listitem"><p>
            Double-click the downloaded DMG to mount it. Finder opens.
          </p></li><li class="listitem"><p>
            Double-click the <code class="filename">.pkg</code> file shown in the
            Finder window.
          </p></li><li class="listitem"><p>
            Follow the steps in the installation wizard.
</p>
<div class="figure">
<a name="fig-x-installation-mysql-shell-osx-quick"></a><p class="title"><b>Figure 3.2 Installation of MySQL Shell on OS X</b></p>
<div class="figure-contents">

<div class="mediaobject">
<img src="images/x-installation-mysql-shell-osx-1.png" width="600" height="373" alt="Installation of MySQL Shell on OS X">
</div>

</div>

</div>
<br class="figure-break"></li><li class="listitem"><p>
            When the installer finishes, eject the DMG. (It can be
            deleted.)
</p></li></ol>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="installing-mysql-shell-starting"></a>3.3.2 Starting MySQL Shell</h3>

</div>

</div>

</div>
<p>
      You need an account name and password to establish a session using
      MySQL Shell. Replace <em class="replaceable"><code>user</code></em> with your
      account name.
    </p><p>
      On the same system where the server instance is running, open a
      terminal window (command prompt on Windows) and start MySQL Shell
      with the following command:

</p><pre class="programlisting">
<strong class="userinput"><code>mysqlsh --uri <em class="replaceable"><code>user</code></em>@localhost</code></strong>
</pre><p>

      You are prompted to input your password and then this establishes
      an X Session.
    </p><p>
      For instructions to get you started using MySQL Shell and MySQL
      as a document store, see the following quick-start guides:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <a class="link" href="document-store.html#mysql-shell-tutorial-javascript" title="3.4 Quick-Start Guide: MySQL Shell for JavaScript">Quick-Start
          Guide: MySQL Shell for JavaScript</a>
        </p></li><li class="listitem"><p>
          <a class="link" href="document-store.html#mysql-shell-tutorial-python" title="3.5 Quick-Start Guide: MySQL Shell for Python">Quick-Start Guide:
          MySQL Shell for Python</a>
</p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="mysql-shell-tutorial-javascript"></a>3.4 Quick-Start Guide: MySQL Shell for JavaScript</h2>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="document-store.html#mysql-shell-tutorial-javascript-introduction">3.4.1 Introduction</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-tutorial-javascript-download">3.4.2 Import Database Sample</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-tutorial-javascript-shell">3.4.3 MySQL Shell</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-tutorial-javascript-documents-collections">3.4.4 Documents and Collections</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-tutorial-javascript-relational-tables">3.4.5 Relational Tables</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-tutorial-javascript-documents-in-tables">3.4.6 Documents in Tables</a></span></dt></dl>
</div>
<p>
    This quick-start guide provides instructions to begin prototyping
    database applications interactively with MySQL Shell. The guide
    includes the following topics:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
        Introduction to MySQL functionality, MySQL Shell, and the
        <code class="literal">world_x</code> database sample.
      </p></li><li class="listitem"><p>
        Operations to manage collections and documents.
      </p></li><li class="listitem"><p>
        Operations to manage relational tables.
      </p></li><li class="listitem"><p>
        Operations that apply to documents within tables.
</p></li></ul>
</div>
<h3><a name="idm139777646853424"></a>Available Quick-Start Guides</h3>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
        <a class="link" href="document-store.html#mysql-shell-tutorial-python" title="3.5 Quick-Start Guide: MySQL Shell for Python">MySQL Shell for
        Python</a>
      </p></li><li class="listitem"><p>
        <a class="link" href="document-store.html#mysql-shell-visual-studio" title="3.6 Quick-Start Guide: MySQL for Visual Studio">MySQL for Visual
        Studio</a>
</p></li></ul>
</div>
<h3><a name="idm139777646848912"></a>Related Information</h3>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
        <a class="xref" href="document-store.html#mysql-shell" title="3.8 MySQL Shell User Guide">Section 3.8, “MySQL Shell User Guide”</a> provides more in-depth information
        about MySQL Shell.
      </p></li><li class="listitem"><p>
        <a class="ulink" href="http://dev.mysql.com/doc/x-devapi-userguide/en/" target="_top">X DevAPI User Guide</a> provides more examples of
        using X DevAPI.
</p></li></ul>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-shell-tutorial-javascript-introduction"></a>3.4.1 Introduction</h3>

</div>

</div>

</div>
<p>
      The MySQL Shell for JavaScript quick start provides a short but
      comprehensive introduction to the database functionality
      introduced with MySQL 5.7.12. This functionality includes the new
      X DevAPI, which offers a modern, integrative way to work
      with relational and document data, without requiring SQL knowledge
      from application developers.
    </p><p>
      In MySQL, tables are the native data storage container type and
      collections are stored internally using tables.
</p>
<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h4 class="title"><a name="idm139777646842304"></a>JSON Documents and Collections</h4>
</div>
</div>
</div>
<p>
        A JSON
        <a class="link" href="document-store.html#mysql-shell-tutorial-javascript-documents" title="Documents">document</a>
        is a data structure composed of field/value pairs stored within
        a
        <a class="link" href="document-store.html#mysql-shell-tutorial-javascript-collections" title="Collections">collection</a>.
        The values of fields often contain other documents, arrays, and
        lists of documents.
      </p><pre class="screen">
{
    "GNP": .6,
    "IndepYear": 1967,
    "Name": "Sealand",
    "_id": "SEA",
    "demographics": {
        "LifeExpectancy": 79,
        "Population": 27
    },
    "geography": {
        "Continent": "Europe",
        "Region": "British Islands",
        "SurfaceArea": 193
    },
    "government": {
        "GovernmentForm": "Monarchy",
        "HeadOfState": "Michael Bates"
    }
}
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="idm139777646837776"></a>Relational Tables</h4>

</div>

</div>

</div>
<p>
        A
        <a class="link" href="document-store.html#mysql-shell-tutorial-javascript-relational-tables" title="3.4.5 Relational Tables">table</a>
        in MySQL enables you to store data organized in rows and
        columns. The structure of a table is defined by one or more
        columns with user-defined names and data types. Every row stored
        in the table has the same structure.
      </p><pre class="screen">
+------+------------------+-------------+-----------------+------------------------+
| ID   | Name             | CountryCode | District        | Info                   |
+------+------------------+-------------+-----------------+------------------------+
|    1 | Kabul            | AFG         | Kabol           |{"Population": 1780000} |
|    2 | Qandahar         | AFG         | Qandahar        |{"Population": 237500}  |
|    3 | Herat            | AFG         | Herat           |{"Population": 186800}  |
|    4 | Mazar-e-Sharif   | AFG         | Balkh           |{"Population": 127800}  |
|    5 | Amsterdam        | NLD         | Noord-Holland   |{"Population": 731200}  |
|    6 | Rotterdam        | NLD         | Zuid-Holland    |{"Population": 593321}  |
+------+------------------+-------------+-----------------+------------------------+
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="idm139777646833776"></a>Related Information</h4>

</div>

</div>

</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="xref" href="document-store.html#mysql-shell" title="3.8 MySQL Shell User Guide">Section 3.8, “MySQL Shell User Guide”</a> provides a general overview.
          </p></li><li class="listitem"><p>
            See <a class="ulink" href="http://dev.mysql.com/doc/x-devapi-userguide/en/" target="_top">X DevAPI User Guide</a> for development
            reference documentation.
</p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-shell-tutorial-javascript-download"></a>3.4.2 Import Database Sample</h3>

</div>

</div>

</div>
<p>
      The <code class="literal">world_x</code> database sample contains one JSON
      collection and a set of three relational tables:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          Collection
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              countryinfo: Information about countries in the world.
</p></li></ul>
</div>
</li><li class="listitem"><p>
          Tables
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              country: Minimal information about countries of the world.
            </p></li><li class="listitem"><p>
              city: Information about some of the cities in those
              countries.
            </p></li><li class="listitem"><p>
              countrylanguage: Languages spoken in each country.
</p></li></ul>
</div>
</li></ul>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="idm139777646820688"></a>Requirements</h4>

</div>

</div>

</div>
<p>
        You must install MySQL Shell and MySQL 5.7.12 or higher with
        the X Protocol enabled. For instructions, see
        <a class="xref" href="document-store.html#document-store-setting-up" title="3.3 Setting Up MySQL as a Document Store">Section 3.3, “Setting Up MySQL as a Document Store”</a>.
      </p><p>
        Start the server before you load the <code class="literal">world_x</code>
        database for this guide.
</p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="idm139777646817472"></a>Download world_x Database</h4>

</div>

</div>

</div>
<p>
        To prepare the <code class="literal">world_x</code> database sample,
        follow these steps:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
            Download
            <a class="ulink" href="http://downloads.mysql.com/docs/world_x-db.zip" target="_top">world_x-db.zip</a>.
          </p></li><li class="listitem"><p>
            Extract the installation archive to a temporary location
            such as <code class="filename">/tmp/</code>. Unpacking the archive
            results in a single file named
            <code class="filename">world_x.sql</code>.
          </p></li><li class="listitem"><p>
            Create or recreate the schema with the following command:
          </p><pre class="programlisting">
<strong class="userinput"><code>mysqlsh -u root --sql --recreate-schema world_x &lt; /tmp/world_x-db/world_x.sql</code></strong>
Enter password: <strong class="userinput"><code>****</code></strong>
Recreating schema world_x...
</pre><p>
            Enter your password when prompted. A non-root account can be
            used as long as the account has privileges to create new
            databases.
          </p><p>
            Replace <code class="filename">/tmp/</code> with the path to the
            <code class="filename">world_x.sql</code> file on your system.
</p></li></ol>
</div>

</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="idm139777646805120"></a>Related Information</h4>

</div>

</div>

</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="xref" href="document-store.html#mysql-shell-sessions" title="3.8.2.1 MySQL Shell Sessions">Section 3.8.2.1, “MySQL Shell Sessions”</a> explains session
            types.
          </p></li><li class="listitem"><p>
            See <a class="xref" href="installing.html" title="Chapter 2 Installing and Upgrading MySQL">Chapter 2, <i>Installing and Upgrading MySQL</i></a> for general installation
            assistance.
</p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-shell-tutorial-javascript-shell"></a>3.4.3 MySQL Shell</h3>

</div>

</div>

</div>
<p>
      MySQL Shell is a unified scripting interface to MySQL Server. It
      supports scripting in JavaScript and Python. JavaScript is the
      default processing mode. In most cases, you need an account to
      connect to the local MySQL server instance.
</p>
<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h4 class="title"><a name="mysql-shell-tutorial-javascript-shell-start"></a>Start MySQL Shell</h4>
</div>
</div>
</div>
<p>
        After you have installed and started MySQL server, connect
        MySQL Shell to the server instance. By default, MySQL Shell
        connects using the X Protocol.
      </p><p>
        On the same system where the server instance is running, open a
        terminal window and start MySQL Shell with the following
        command:
      </p><pre class="programlisting">
<strong class="userinput"><code>mysqlsh -u <em class="replaceable"><code>name</code></em> world_x</code></strong>
Creating an X Session to <em class="replaceable"><code>name</code></em>@localhost:33060/world_x
Enter password:<strong class="userinput"><code> ****</code></strong>
</pre><p>
        You may need to specify the path as appropriate.
      </p><p>
        In addition:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <em class="replaceable"><code>name</code></em> represents the user name of
            your MySQL account.
          </p></li><li class="listitem"><p>
            MySQL Shell prompts you for your password.
          </p></li><li class="listitem"><p>
            The default schema for this session is the
            <code class="literal">world_x</code> database. For instructions on
            setting up the <code class="literal">world_x</code> database sample,
            see
            <a class="xref" href="document-store.html#mysql-shell-tutorial-javascript-download" title="3.4.2 Import Database Sample">Section 3.4.2, “Import Database Sample”</a>.
</p></li></ul>
</div>
<p>
        The <code class="literal">mysql-js&gt;</code> prompt indicates that the
        active language for this session is JavaScript.
      </p><pre class="programlisting">
mysql-js&gt;
</pre><p>
        When you run <a class="link" href="programs.html#mysqlsh" title="5.5.7 mysqlsh — The MySQL Shell"><span class="command"><strong>mysqlsh</strong></span></a> without the host
        argument, MySQL Shell attempts to connect to the server
        instance running on the localhost interface on port 33060. To
        specify a different host or port number, as well as other
        options, see the option descriptions at
        <a class="xref" href="programs.html#mysqlsh" title="5.5.7 mysqlsh — The MySQL Shell">Section 5.5.7, “<span class="command"><strong>mysqlsh</strong></span> — The MySQL Shell”</a>.
      </p><p>
        MySQL Shell supports input-line editing as follows:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <span class="keycap"><strong>left-arrow</strong></span> and <span class="keycap"><strong>right-arrow</strong></span>
            keys move horizontally within the current input line.
          </p></li><li class="listitem"><p>
            <span class="keycap"><strong>up-arrow</strong></span> and <span class="keycap"><strong>down-arrow</strong></span>
            keys move up and down through the set of previously entered
            lines.
          </p></li><li class="listitem"><p>
            <span class="keycap"><strong>Backspace</strong></span> deletes the character before the
            cursor and typing new characters enters them at the cursor
            position.
          </p></li><li class="listitem"><p>
            <span class="keycap"><strong>Enter</strong></span> enters the current input line.
</p></li></ul>
</div>

</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="mysql-shell-tutorial-javascript-shell-help"></a>Get Help for MySQL Shell</h4>

</div>

</div>

</div>
<p>
        Type <a class="link" href="programs.html#mysqlsh" title="5.5.7 mysqlsh — The MySQL Shell"><span class="command"><strong>mysqlsh --help</strong></span></a> at the prompt of your
        command interpreter for a list of command-line options.
      </p><pre class="programlisting">
<strong class="userinput"><code>mysqlsh --help</code></strong>
</pre><p>
        Type <span class="command"><strong>\help</strong></span> at the MySQL Shell prompt for a
        list of available commands and their descriptions.
      </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>\help</code></strong>
</pre><p>
        Type <span class="command"><strong>\help</strong></span> followed by a command name for
        detailed help about an individual MySQL Shell command. For
        example, to view help on the <span class="command"><strong>\connect</strong></span>
        command, type:
      </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>\help \connect</code></strong>
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="mysql-shell-tutorial-javascript-shell-quit"></a>Quit MySQL Shell</h4>

</div>

</div>

</div>
<p>
        To quit MySQL Shell, type the following command:
      </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>\quit</code></strong>
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="idm139777646760112"></a>Related Information</h4>

</div>

</div>

</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            See <a class="xref" href="document-store.html#mysql-shell-interactive-code-execution" title="3.8.3.1 Interactive Code Execution">Section 3.8.3.1, “Interactive Code Execution”</a>
            for an explanation of how interactive code execution works
            in MySQL Shell.
          </p></li><li class="listitem"><p>
            See <a class="xref" href="document-store.html#mysql-shell-getting-started" title="3.8.2 Getting Started with MySQL Shell">Section 3.8.2, “Getting Started with MySQL Shell”</a> to learn
            about session and connection alternatives.
</p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-shell-tutorial-javascript-documents-collections"></a>3.4.4 Documents and Collections</h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="document-store.html#mysql-shell-tutorial-javascript-collections-operations">3.4.4.1 Create, List, and Drop Collections</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-tutorial-javascript-collections-add">3.4.4.2 Add Documents</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-tutorial-javascript-documents-find">3.4.4.3 Find Documents</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-tutorial-javascript-documents-modify">3.4.4.4 Modify Documents</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-tutorial-javascript-documents-remove">3.4.4.5 Remove Documents</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-tutorial-javascript-indexes-create">3.4.4.6 Create and Drop Indexes</a></span></dt></dl>
</div>
<p>
      In MySQL, collections contain JSON documents that you can add,
      find, update, and remove. Collections are containers within a
      schema that you create, list, and drop.
    </p><p>
      The examples in this section use the countryinfo collection in the
      <code class="literal">world_x</code> database. For instructions on setting
      up the <code class="literal">world_x</code> database sample, see
      <a class="xref" href="document-store.html#mysql-shell-tutorial-javascript-download" title="3.4.2 Import Database Sample">Section 3.4.2, “Import Database Sample”</a>.
</p>
<h4><a name="mysql-shell-tutorial-javascript-documents"></a>Documents</h4>
<p>
      In MySQL, documents are represented as JSON objects. Internally,
      they are stored in an efficient binary format that enables fast
      lookups and updates.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          Simple document format for JavaScript:
        </p><pre class="screen">
{field1: "value", field2 : 10, "field 3": null}
</pre></li></ul>
</div>
<p>
      An array of documents consists of a set of documents separated by
      commas and enclosed within <code class="literal">[</code> and
      <code class="literal">]</code> characters.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          Simple array of documents for JavaScript:
        </p><pre class="screen">
[{Name: "Aruba", _id: "ABW"}, {Name: "Angola", _id: "AGO"}]
</pre></li></ul>
</div>
<p>
      MySQL supports the following JavaScript value types in JSON
      documents:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          numbers (integer and floating point)
        </p></li><li class="listitem"><p>
          strings
        </p></li><li class="listitem"><p>
          boolean (false and true)
        </p></li><li class="listitem"><p>
          null
        </p></li><li class="listitem"><p>
          arrays of more JSON values
        </p></li><li class="listitem"><p>
          nested (or embedded) objects of more JSON values
</p></li></ul>
</div>
<h4><a name="mysql-shell-tutorial-javascript-collections"></a>Collections</h4>
<p>
      Collections are containers for documents that share a purpose and
      possibly share one or more indexes. Each collection has a unique
      name and exists within a single schema.
    </p><p>
      The term schema is equivalent to a database, which means a group
      of database objects (as opposed to relational schema used to
      enforce structure and constraints over data). A schema does not
      enforce conformity on the documents in a collection.
    </p><p>
      In this quick-start guide:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          Basic objects include:
</p>
<div class="informaltable">
<table class="informaltable" summary="Objects to use interactively within
            MySQL Shell" border="1"><colgroup><col><col></colgroup><thead><tr><th scope="col">Object form</th><th scope="col">Description</th></tr></thead><tbody><tr><td scope="row"><code class="literal">db</code></td><td><code class="literal">db</code> is a global variable assigned to the current
                  active schema that you specified on the command line.
                  You can type <code class="literal">db</code> in MySQL Shell to
                  print a description of the object, which in this case
                  will be the name of the schema it represents.</td></tr><tr><td scope="row"><code class="literal">db.getCollections()</code></td><td><a class="link" href="document-store.html#mysql-shell-tutorial-javascript-collections-get" title="List Collections">db.getCollections()</a>
                  holds a list of collections in the schema. Use the
                  list to get references to collection objects, iterate
over them, and so on.</td></tr></tbody></table>
</div>
</li><li class="listitem"><p>
          Basic operations scoped by collections include:
</p>
<div class="informaltable">
<table class="informaltable" summary="CRUD operations to use interactively on documents
            within MySQL Shell" border="1"><colgroup><col><col></colgroup><thead><tr><th scope="col">Operation form</th><th scope="col">Description</th></tr></thead><tbody><tr><td scope="row"><code class="literal">db.<em class="replaceable"><code>name</code></em>.add()</code></td><td>The
                  <a class="link" href="document-store.html#mysql-shell-tutorial-javascript-collections-add" title="3.4.4.2 Add Documents">add()</a>
                  method inserts one document or a list of documents
                  into the named collection.</td></tr><tr><td scope="row"><code class="literal">db.<em class="replaceable"><code>name</code></em>.find()</code></td><td>The
                  <a class="link" href="document-store.html#mysql-shell-tutorial-javascript-documents-find" title="3.4.4.3 Find Documents">find()</a>
                  method returns some or all documents in the named
                  collection.</td></tr><tr><td scope="row"><code class="literal">db.<em class="replaceable"><code>name</code></em>.modify()</code></td><td>The
                  <a class="link" href="document-store.html#mysql-shell-tutorial-javascript-documents-modify" title="3.4.4.4 Modify Documents">modify()</a>
                  method updates documents in the named collection.</td></tr><tr><td scope="row"><code class="literal">db.<em class="replaceable"><code>name</code></em>.remove()</code></td><td>The
                  <a class="link" href="document-store.html#mysql-shell-tutorial-javascript-documents-remove" title="3.4.4.5 Remove Documents">remove()</a>
                  method deletes one document or a list of documents
from the named collection.</td></tr></tbody></table>
</div>
</li></ul>
</div>
<h4><a name="idm139777646704656"></a>Related Information</h4>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          See <a class="ulink" href="http://dev.mysql.com/doc/x-devapi-userguide/en/devapi-users-working-with-collections.html" target="_top">Working with Collections</a>
          for a general overview.
        </p></li><li class="listitem"><p>
          <a class="ulink" href="http://dev.mysql.com/doc/x-devapi-userguide/en/mysql-x-crud-ebnf-definitions.html" target="_top">CRUD EBNF Definitions</a> provides a
          complete list of operations.
</p></li></ul>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-shell-tutorial-javascript-collections-operations"></a>3.4.4.1 Create, List, and Drop Collections</h4>

</div>

</div>

</div>
<p>
        In MySQL Shell, you can create new collections, get a list of
        the existing collections in a schema, and remove an existing
        collection from a schema. Collection names are case-sensitive
        and each collection name must be unique.
</p>
<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h5 class="title"><a name="idm139777646698480"></a>Confirm the Schema</h5>
</div>
</div>
</div>
<p>
          To show the value that is assigned to the schema variable,
          type <code class="literal">db</code>.
        </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db</code></strong>
&lt;Schema:world_x&gt;
</pre><p>
          If the schema value is not <code class="literal">Schema:world_x</code>,
          then set the <code class="literal">db</code> variable as follows:
        </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>\use world_x</code></strong>
Schema `world_x` accessible through db.
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="mysql-shell-tutorial-javascript-collections-create"></a>Create a Collection</h5>

</div>

</div>

</div>
<p>
          To create a new collection in an existing schema, use the
          <code class="literal">createCollection()</code> method.
        </p><p>
          The following example creates in the
          <code class="literal">world_x</code> database a collection called flags.
          The method returns a collection object.
        </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db.createCollection("flags")</code></strong>
&lt;Collection:flags&gt;
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="mysql-shell-tutorial-javascript-collections-get"></a>List Collections</h5>

</div>

</div>

</div>
<p>
          To display all collections in the <code class="literal">world_x</code>
          database, use the <code class="literal">getCollections()</code> method
          on the schema object. Collections returned by the server
          appear between brackets.
        </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db.getCollections()</code></strong>
[
    &lt;Collection:countryinfo&gt;,
    &lt;Collection:flags&gt;
]
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="mysql-shell-tutorial-javascript-collections-drop"></a>Drop a Collection</h5>

</div>

</div>

</div>
<p>
          To drop an existing collection from a database, use the
          <code class="literal">dropCollection()</code> method on the session
          object. For example, to drop the flags collection from the
          <code class="literal">world_x</code> database, type:
        </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>session.dropCollection("world_x", "flags")</code></strong>
Query OK (0.04 sec)
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777646677040"></a>Related Information</h5>

</div>

</div>

</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              See
              <a class="xref" href="document-store.html#mysql-connections-in-javascript-and-python" title="3.8.2.2.6 Connections in JavaScript and Python">Section 3.8.2.2.6, “Connections in JavaScript and Python”</a>
              to learn more about the session object.
            </p></li><li class="listitem"><p>
              See <a class="ulink" href="http://dev.mysql.com/doc/x-devapi-userguide/en/collection-objects.html" target="_top">Collection Objects</a> for more
              examples.
</p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-shell-tutorial-javascript-collections-add"></a>3.4.4.2 Add Documents</h4>

</div>

</div>

</div>
<p>
        You can use the <code class="literal">add()</code> method to insert one
        document or a list documents into an existing collection using
        MySQL Shell. All examples in this section use the countryinfo
        collection.
</p>
<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h5 class="title"><a name="idm139777646669856"></a>Confirm the Schema</h5>
</div>
</div>
</div>
<p>
          To show the value that is assigned to the schema variable,
          type <code class="literal">db</code>.
        </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db</code></strong>
&lt;Schema:world_x&gt;
</pre><p>
          If the schema value is not <code class="literal">Schema:world_x</code>,
          then set the <code class="literal">db</code> variable as follows:
        </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>\use world_x</code></strong>
Schema `world_x` accessible through db.
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777646663248"></a>Add a Document</h5>

</div>

</div>

</div>
<p>
          Insert the following document into the countryinfo collection.
          Press <span class="keycap"><strong>Enter</strong></span> twice to insert the document.
        </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db.countryinfo.add(
 {
    GNP: .6,
    IndepYear: 1967,
    Name: "Sealand",
    _id: "SEA",
    demographics: {
        LifeExpectancy: 79,
        Population: 27
    },
    geography: {
        Continent: "Europe",
        Region: "British Islands",
        SurfaceArea: 193
    },
    government: {
        GovernmentForm: "Monarchy",
        HeadOfState: "Michael Bates"
    }
  }
)</code></strong>
Query OK, 1 item affected (0.02 sec)
</pre><p>
          The method returns the status of the operation.
        </p><p>
          Each document requires an identifier field called
          <code class="literal">_id</code>. The value of the
          <code class="literal">_id</code> field must be unique among all
          documents in the same collection. If the document passed to
          the <code class="literal">add()</code> method does not contain the
          <code class="literal">_id</code> field, MySQL Shell automatically
          inserts a field into the document and sets the value to a
          generated universal unique identifier (UUID).
</p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777646655392"></a>Related Information</h5>

</div>

</div>

</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              See <a class="ulink" href="http://dev.mysql.com/doc/x-devapi-userguide/en/crud-ebnf-collection-crud-functions.html#crud-ebnf-collectionaddfunction" target="_top">CollectionAddFunction</a> for
              the full syntax definition.
</p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-shell-tutorial-javascript-documents-find"></a>3.4.4.3 Find Documents</h4>

</div>

</div>

</div>
<p>
        You can use the <code class="literal">find()</code> method to query for
        and return documents from a collection in a database.
        MySQL Shell provides additional methods to use with the
        <code class="literal">find()</code> method to filter and sort the returned
        documents.
      </p><p>
        MySQL provides the following operators to specify search
        conditions: <code class="literal">OR</code> (<code class="literal">||</code>),
        <code class="literal">AND</code> (<code class="literal">&amp;&amp;</code>),
        <code class="literal">XOR</code>, <code class="literal">IS</code>,
        <code class="literal">NOT</code>, <code class="literal">BETWEEN</code>,
        <code class="literal">IN</code>, <code class="literal">LIKE</code>,
        <code class="literal">!=</code>, <code class="literal">&lt;&gt;</code>,
        <code class="literal">&gt;</code>, <code class="literal">&gt;=</code>,
        <code class="literal">&lt;</code>, <code class="literal">&lt;=</code>,
        <code class="literal">&amp;</code>, <code class="literal">|</code>,
        <code class="literal">&lt;&lt;</code>, <code class="literal">&gt;&gt;</code>,
        <code class="literal">+</code>, <code class="literal">-</code>,
        <code class="literal">*</code>, <code class="literal">/</code>,
        <code class="literal">~</code>, and <code class="literal">%</code>.
</p>
<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h5 class="title"><a name="idm139777646630592"></a>Find All Documents in a Collection</h5>
</div>
</div>
</div>
<p>
          To return all documents in a collection, use the
          <code class="literal">find()</code> method without specifying search
          conditions. For example, the following operation returns all
          documents in the countryinfo collection.
        </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db.countryinfo.find()</code></strong>
[
     {
          "GNP": 828,
          "IndepYear": null,
          "Name": "Aruba",
          "_id": "ABW",
          "demographics": {
              "LifeExpectancy": 78.4000015258789,
              "Population": 103000
          },
          "geography": {
              "Continent": "North America",
              "Region": "Caribbean",
              "SurfaceArea": 193
          },
          "government": {
              "GovernmentForm": "Nonmetropolitan Territory of The Netherlands",
              "HeadOfState": "Beatrix"
          }
          ...
      }
 ]
240 documents in set (0.00 sec)
</pre><p>
          The method produces results that contain operational
          information in addition to all documents in the collection.
        </p><p>
          An empty set (no matching documents) returns the following
          information:
        </p><pre class="screen">
Empty set (0.00 sec) 
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="mysql-shell-tutorial-javascript-documents-find-filter-searches"></a>Filter Searches</h5>

</div>

</div>

</div>
<p>
          You can include search conditions with the
          <code class="literal">find()</code> method. The syntax for expressions
          that form a search condition is the same as that of
          traditional <a class="link" href="functions.html" title="Chapter 13 Functions and Operators">MySQL</a>. You must
          enclose all expressions in quotes.
        </p><p>
          All examples in this section use the countryinfo collection in
          the <code class="literal">world_x</code> database. For the sake of
          brevity, some of the examples do not display output.
        </p><p>
          A simple search condition consists of the
          <code class="literal">_id</code> field and unique identifier of a
          document. The following example returns a single document
          matching the identifier string:
        </p><pre class="programlisting">
<strong class="userinput"><code>mysql-js&gt; db.countryinfo.find("_id = 'AUS'")</code></strong>
[
    {
        "GNP": 351182,
        "IndepYear": 1901,
        "Name": "Australia",
        "_id": "AUS",
        "demographics": {
            "LifeExpectancy": 79.80000305175781,
            "Population": 18886000
        },
        "geography": {
            "Continent": "Oceania",
            "Region": "Australia and New Zealand",
            "SurfaceArea": 7741220
        },
        "government": {
            "GovernmentForm": "Constitutional Monarchy, Federation",
            "HeadOfState": "Elisabeth II"
        }
    }
]
1 document in set (0.01 sec)
</pre><p>
          The following example searches for all countries that have a
          GNP higher than $500 billion. The countryinfo collection
          measures GNP in units of million.
        </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db.countryinfo.find("GNP &gt; 500000")</code></strong>
...[<span class="emphasis"><em>output removed</em></span>]
10 documents in set (0.00 sec)
</pre><p>
          The Population field in the following query is embedded within
          the demographics object. To access the embedded field, use a
          period between demographics and Population to identify the
          relationship. Document and field names are case sensitive.
        </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db.countryinfo.find("GNP &gt; 500000 and demographics.Population &lt; 100000000")</code></strong>
...[<span class="emphasis"><em>output removed</em></span>]
6 documents in set (0.00 sec)
</pre><p>
          Arithmetic operators in the following expression are used to
          query for countries with a GNP per capita higher than $30000.
          Search conditions can include arithmetic operators and most
          MySQL functions.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
            Seven documents in the countryinfo collection have a
            population value of zero. Warning messages appear at the end
            of the output.
</p>
</div>
<pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db.countryinfo.find("GNP*1000000/demographics.Population &gt; 30000")</code></strong>
...[<span class="emphasis"><em>output removed</em></span>]
9 documents in set, 7 warnings (0.00 sec)
Warning (Code 1365): Division by 0
Warning (Code 1365): Division by 0
Warning (Code 1365): Division by 0
Warning (Code 1365): Division by 0
Warning (Code 1365): Division by 0
Warning (Code 1365): Division by 0
Warning (Code 1365): Division by 0
</pre><p>
          You can separate a value from the search condition by using
          the <code class="literal">bind()</code> method. For example, instead of
          specifying a hard-coded country name as the condition,
          substitute a named placeholder consisting of a colon followed
          by a name that begins with a letter, such as
          <span class="emphasis"><em>country</em></span>. Then include the placeholder and
          value in the <code class="literal">bind()</code> method as follows:
        </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db.countryinfo.find("Name = :country").bind("country", "Italy")</code></strong>
[
    {
        "GNP": 1161755,
        "IndepYear": 1861,
        "Name": "Italy",
        "_id": "ITA",
        "demographics": {
            "LifeExpectancy": 79,
            "Population": 57680000
        },
        "geography": {
            "Continent": "Europe",
            "Region": "Southern Europe",
            "SurfaceArea": 301316
        },
        "government": {
            "GovernmentForm": "Republic",
            "HeadOfState": "Carlo Azeglio Ciampi"
        }
    }
]
1 document in set (0.01 sec)
</pre>
<div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Tip
</div>
<p>
            Within a program, binding enables you to specify
            placeholders in your expressions, which are filled in with
            values before execution and can benefit from automatic
            escaping, as appropriate.
          </p><p>
            Always use binding to sanitize input. Avoid introducing
            values in queries using string concatenation, which can
            produce invalid input and, in some cases, can cause security
            issues.
</p>
</div>

</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777646600528"></a>Project Results</h5>

</div>

</div>

</div>
<p>
          You can return specific fields of a document, instead of
          returning all the fields. The following example returns the
          GNP and Name fields of all documents in the countryinfo
          collection matching the search conditions.
        </p><p>
          Use the <code class="literal">fields()</code> method to pass the list of
          fields to return.
        </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db.countryinfo.find("GNP &gt; 5000000").fields(["GNP", "Name"])</code></strong>
[
    {
        "GNP": 8510700,
        "Name": "United States"
    }
]
1 document in set (0.00 sec)
 </pre><p>
          In addition, you can alter the returned
          documents—adding, renaming, nesting and even computing
          new field values—with an expression that describes the
          document to return.
        </p><p>
          First, use the following statement to import the mysqlx
          module:
        </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>var mysqlx=require('mysqlx');</code></strong>
</pre><p>
          Next, alter the names of the fields with the following
          expression to return only two documents.
        </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db.countryinfo.find().
fields(mysqlx.expr('{"Name": upper(Name), "GNPPerCapita": GNP*1000000/demographics.Population}')).
limit(2)</code></strong>
[
    {
        "GNPPerCapita": 8038.834951456311,
        "Name": "ARUBA"
    },
    {
        "GNPPerCapita": 263.0281690140845,
        "Name": "AFGHANISTAN"
    }
]
2 documents in set (0.00 sec)
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777646591248"></a>Limit, Sort, and Skip Results</h5>

</div>

</div>

</div>
<p>
          You can apply the <code class="literal">limit()</code>,
          <code class="literal">sort()</code>, and <code class="literal">skip()</code>
          methods to manage the number and order of documents returned
          by the <code class="literal">find()</code> method.
        </p><p>
          To specify the number of documents included in a result set,
          append the <code class="literal">limit()</code> method with a value to
          the <code class="literal">find()</code> method. The following query
          returns the first five documents in the countryinfo
          collection.
        </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db.countryinfo.find().limit(5)</code></strong>
... [<span class="emphasis"><em>output removed</em></span>]
5 documents in set (0.00 sec)
</pre><p>
          To specify an order for the results, append the
          <code class="literal">sort()</code> method to the
          <code class="literal">find()</code> method. Pass to the
          <code class="literal">sort()</code> method a list of one or more fields
          to sort by and, optionally, the descending
          (<code class="literal">desc</code>) or ascending
          (<code class="literal">asc</code>) attribute as appropriate. Ascending
          order is the default order type.
        </p><p>
          For example, the following query sorts all documents by the
          IndepYear field and then returns the first eight documents in
          descending order.
        </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db.countryinfo.find().sort(["IndepYear desc"]).limit(8)</code></strong>
... [<span class="emphasis"><em>output removed</em></span>]
8 documents in set (0.00 sec)
</pre><p>
          By default, the <code class="literal">limit()</code> method starts from
          the first document in the collection. You can use the
          <code class="literal">skip()</code> method to change the starting
          document. For example, to ignore the first document and return
          the next eight documents matching the condition, pass to the
          <code class="literal">skip()</code> method a value of 1.
        </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db.countryinfo.find().sort(["IndepYear desc"]).limit(8).skip(1)</code></strong>
... [<span class="emphasis"><em>output removed</em></span>]
8 documents in set (0.00 sec)
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777646571536"></a>Related Information</h5>

</div>

</div>

</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              The <a class="link" href="functions.html" title="Chapter 13 Functions and Operators">MySQL Reference
              Manual</a> provides detailed documentation on functions
              and operators.
            </p></li><li class="listitem"><p>
              See <a class="ulink" href="http://dev.mysql.com/doc/x-devapi-userguide/en/crud-ebnf-collection-crud-functions.html#crud-ebnf-collectionfindfunction" target="_top">CollectionFindFunction</a> for
              the full syntax definition.
</p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-shell-tutorial-javascript-documents-modify"></a>3.4.4.4 Modify Documents</h4>

</div>

</div>

</div>
<p>
        You can use the <code class="literal">modify()</code> method to update one
        or more documents in a collection. The X DevAPI provides
        additional methods for use with the <code class="literal">modify()</code>
        method to:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Set and unset fields within documents.
          </p></li><li class="listitem"><p>
            Append, insert, and delete arrays.
          </p></li><li class="listitem"><p>
            Bind, limit, and sort the documents to be modified.
</p></li></ul>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777646560720"></a>Set and Unset Fields</h5>

</div>

</div>

</div>
<p>
          The <code class="literal">modify()</code> method works by filtering a
          collection to include only the documents to be modified and
          then applying the operations that you specify to those
          documents.
        </p><p>
          In the following example, the <code class="literal">modify()</code>
          method uses the search condition to identify the document to
          change and then the <code class="literal">set()</code> method replaces
          two values within the nested demographics object.
        </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db.countryinfo.modify("_id = 'SEA'").
set("demographics", {LifeExpectancy: 78, Population: 28})</code></strong>
Query OK, 1 item affected (0.04 sec)
</pre><p>
          After you modify a document, use the <code class="literal">find()</code>
          method to verify the change.
        </p><p>
          To remove content from a document, use the
          <code class="literal">modify()</code> and <code class="literal">unset()</code>
          methods. For example, the following query removes the GNP from
          a document that matches the search condition.
        </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db.countryinfo.modify("Name = 'Sealand'").unset("GNP")</code></strong>
Query OK, 1 item affected (0.01 sec)   
</pre><p>
          Use the <code class="literal">find()</code> method to verify the change.
        </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db.countryinfo.find("Name = 'Sealand'")</code></strong>
[
    {
        "IndepYear": 1967,
        "Name": "Sealand",
        "_id": "SEA",
        "demographics": {
            "LifeExpectancy": 78,
            "Population": 28
        },
        "geography": {
            "Continent": "Europe",
            "Region": "British Islands",
            "SurfaceArea": 193
        },
        "government": {
            "GovernmentForm": "Monarchy",
            "HeadOfState": "Michael Bates"
        }
    }
]
1 document in set (0.00 sec)
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777646547392"></a>Append, Insert, and Delete Arrays</h5>

</div>

</div>

</div>
<p>
          To append an element to an array field, or insert, or delete
          elements in an array, use the
          <code class="literal">arrayAppend()</code>,
          <code class="literal">arrayInsert()</code>, or
          <code class="literal">arrayDelete()</code> methods. The following
          examples modify the countryinfo collection to enable tracking
          of international airports.
        </p><p>
          The first example uses the <code class="literal">modify()</code> and
          <code class="literal">set()</code> methods to create a new Airports
          field in all documents.
</p>
<div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Caution
</div>
<p>
            Use care when you modify documents without specifying a
            search condition. This action will modify all documents in
            the collection.
</p>
</div>
<pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db.countryinfo.modify().set("Airports", [])</code></strong>
Query OK, 240 items affected (0.07 sec)
</pre><p>
          With the Airports field added, the next example uses the
          <code class="literal">arrayAppend()</code> method to add a new airport
          to one of the documents. <span class="emphasis"><em>$.Airports</em></span> in
          the following example represents the Airports field of the
          current document.
        </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db.countryinfo.modify("Name = 'France'").arrayAppend("$.Airports", "ORY")</code></strong>
Query OK, 1 item affected (0.02 sec)
</pre><p>
          Use <strong class="userinput"><code>db.countryinfo.find("Name =
          'France'")</code></strong> to see the change.
        </p><p>
          To insert an element at a different position in the array, use
          the <code class="literal">arrayInsert()</code> method to specify which
          index to insert in the path expression. In this case, the
          index is 0, or the first element in the array.
        </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db.countryinfo.modify("Name = 'France'").arrayInsert("$.Airports[0]", "CDG")</code></strong>
Query OK, 1 item affected (0.04 sec)
</pre><p>
          To delete an element from the array, you must pass to the
          <code class="literal">arrayDelete()</code> method the index of the
          element to be deleted.
        </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db.countryinfo.modify("Name = 'France'").arrayDelete("$.Airports[1]")</code></strong>
Query OK, 1 item affected (0.03 sec)
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777646529360"></a>Related Information</h5>

</div>

</div>

</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              The <a class="link" href="data-types.html#json-paths" title="Searching and Modifying JSON Values">MySQL Reference
              Manual</a> provides instructions to help you search for
              and modify JSON values.
            </p></li><li class="listitem"><p>
              See <a class="ulink" href="http://dev.mysql.com/doc/x-devapi-userguide/en/crud-ebnf-collection-crud-functions.html#crud-ebnf-collectionmodifyfunction" target="_top">CollectionModifyFunction</a>
              for the full syntax definition.
</p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-shell-tutorial-javascript-documents-remove"></a>3.4.4.5 Remove Documents</h4>

</div>

</div>

</div>
<p>
        You can use the <code class="literal">remove()</code> method to delete
        some or all documents from a collection in a database. The
        X DevAPI provides additional methods for use with the
        <code class="literal">remove()</code> method to filter and sort the
        documents to be removed.
</p>
<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h5 class="title"><a name="idm139777646521328"></a>Remove Documents Using Conditions</h5>
</div>
</div>
</div>
<p>
          The example that follows passes a search condition to the
          <code class="literal">remove()</code> method. All documents matching the
          condition will be removed from the countryinfo collection. In
          this example, one document matches the condition.
        </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db.countryinfo.remove("_id = 'SEA'")</code></strong>
Query OK, 1 item affected (0.02 sec)
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777646517712"></a>Remove the First Document</h5>

</div>

</div>

</div>
<p>
          To remove the first document in the countryinfo collection,
          use the <code class="literal">limit()</code> method with a value of 1.
        </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db.countryinfo.remove().limit(1)</code></strong>
Query OK, 1 item affected (0.03 sec)
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777646514224"></a>Remove the Last Document in an Order</h5>

</div>

</div>

</div>
<p>
          The following example removes the last document in the
          countryinfo collection by country name.
        </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db.countryinfo.remove().sort(["Name desc"]).limit(1)</code></strong>
Query OK, 1 item affected (0.02 sec)
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777646511488"></a>Remove All Documents in a Collection</h5>

</div>

</div>

</div>
<p>
          You can remove all documents in a collection. To do so, use
          the <code class="literal">remove()</code> method without specifying a
          search condition.
</p>
<div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Caution
</div>
<p>
            Use care when you remove documents without specifying a
            search condition. This action will delete all documents in
            the collection.
</p>
</div>

</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777646508464"></a>Related Information</h5>

</div>

</div>

</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              See <a class="ulink" href="http://dev.mysql.com/doc/x-devapi-userguide/en/crud-ebnf-collection-crud-functions.html#crud-ebnf-collectionremovefunction" target="_top">CollectionRemoveFunction</a>
              for the full syntax definition.
            </p></li><li class="listitem"><p>
              See
              <a class="xref" href="document-store.html#mysql-shell-tutorial-javascript-download" title="3.4.2 Import Database Sample">Section 3.4.2, “Import Database Sample”</a>
              for instructions to recreate the
              <code class="literal">world_x</code> database.
</p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-shell-tutorial-javascript-indexes-create"></a>3.4.4.6 Create and Drop Indexes</h4>

</div>

</div>

</div>
<p>
        Indexes are used to find documents with specific field values
        quickly. Without an index, MySQL must begin with the first
        document and then read through the entire collection to find the
        relevant fields. The larger the collection, the more this costs.
        If a collection is large and queries on a specific field are
        common, then consider creating an index on a specific field
        inside a document.
      </p><p>
        For example, the following query will perform better with an
        index:
      </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db.countryinfo.find("demographics.Population &lt; 100")</code></strong>
...[<span class="emphasis"><em>output removed</em></span>]
8 documents in set (0.00 sec)
</pre><p>
        The <code class="literal">createIndex()</code> method creates an index
        that you can define as nonunique or unique. Use the
        <code class="literal">field()</code> method to chain the fields that
        should be indexed. The <code class="literal">execute()</code> method is
        required to create or drop an index.
      </p><p>
        In MySQL, the <code class="literal">_id</code> field is equivalent to a
        primary key by default.
</p>
<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h5 class="title"><a name="idm139777646494656"></a>Add a Nonunique Index</h5>
</div>
</div>
</div>
<p>
          To create a nonunique index, pass to the
          <code class="literal">createIndex()</code> method an index name.
          Duplicate index names are prohibited.
        </p><p>
          In the following example, the first parameter of the
          <code class="literal">field()</code> method specifies the Population
          field inside the demographics object and the next parameter
          indicates that the field should be indexed as an Integer
          numeric value. The last parameter indicates whether the field
          should require the NOT NULL constraint. If the value is
          <code class="literal">false</code>, the field can contain
          <code class="literal">NULL</code> values.
        </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db.countryinfo.createIndex("pop").
field("demographics.Population", "INTEGER", false).execute()</code></strong>
Query OK (0.04 sec)
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777646488160"></a>Add a Unique Index</h5>

</div>

</div>

</div>
<p>
          To create a unique index, pass to the
          <code class="literal">createIndex()</code> method an index name and the
          <code class="literal">mysqlx.IndexType.UNIQUE</code> type. The following
          statement imports the mysqlx module, which is required to
          specify an index type:
        </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>var mysqlx=require('mysqlx');</code></strong>
</pre><p>
          Country <code class="literal">"Name"</code> is another common field in
          the countryinfo collection to index. In the following example,
          <code class="literal">"Text(40)"</code> represents the number of
          characters to index and <code class="literal">true</code> indicates that
          the field cannot contain any <code class="literal">NULL</code> values.
        </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db.countryinfo.createIndex("name", mysqlx.IndexType.UNIQUE).
field("Name", "TEXT(40)", true).execute()</code></strong>
Query OK (0.04 sec)
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777646479024"></a>Drop an Index</h5>

</div>

</div>

</div>
<p>
          To drop an index, pass to the <code class="literal">dropIndex()</code>
          method the name of the index to drop. For example, you can
          drop the <span class="quote">“<span class="quote">pop</span>”</span> index as follows:
        </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db.countryinfo.dropIndex("pop").execute()</code></strong>
Query OK (0.58 sec)
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777646475104"></a>Related Information</h5>

</div>

</div>

</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              See
              <a class="ulink" href="http://dev.mysql.com/doc/x-devapi-userguide/en/crud-ebnf-collection-index-management-functions.html" target="_top">Collection Index Management Functions</a>
              for the full syntax definition.

              
</p></li></ul>
</div>

</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-shell-tutorial-javascript-relational-tables"></a>3.4.5 Relational Tables</h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="document-store.html#mysql-shell-tutorial-javascript-table-insert">3.4.5.1 Insert Records into Tables</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-tutorial-javascript-table-select">3.4.5.2 Select Tables</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-tutorial-javascript-table-update">3.4.5.3 Update Tables</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-tutorial-javascript-table-delete">3.4.5.4 Delete Tables</a></span></dt></dl>
</div>
<p>
      You can use MySQL Shell to manipulate not just JSON documents,
      but also relational tables.
    </p><p>
      In MySQL, each relational table is associated with a particular
      storage engine. The examples in this section use
      <a class="link" href="innodb-storage-engine.html" title="Chapter 15 The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> tables in the
      <code class="literal">world_x</code> database.
</p>
<h4><a name="idm139777646467008"></a>Confirm the Schema</h4>
<p>
      To show the value that is assigned to the schema variable, type
      <code class="literal">db</code>.
    </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db</code></strong>
&lt;Schema:world_x&gt;
</pre><p>
      If the schema value is not <code class="literal">Schema:world_x</code>, then
      set the <code class="literal">db</code> variable as follows:
    </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>\use world_x</code></strong>
Schema `world_x` accessible through db.
</pre>
<h4><a name="idm139777646460528"></a>Show All Tables</h4>
<p>
      To display all relational tables in the <code class="literal">world_x</code>
      database, use the <code class="literal">getTables()</code> method on the
      schema object.
    </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db.getTables()</code></strong>
{
    "city": &lt;Table:city&gt;,
    "country": &lt;Table:country&gt;,
    "countrylanguage": &lt;Table:countrylanguage&gt;
}
</pre>
<h4><a name="idm139777646456272"></a>Basic Table Operations</h4>
<p>
      Basic operations scoped by tables include:
</p>
<div class="informaltable">
<table class="informaltable" summary="CRUD operations to use interactively on tables within
        MySQL Shell" border="1"><colgroup><col><col></colgroup><thead><tr><th scope="col">Operation form</th><th scope="col">Description</th></tr></thead><tbody><tr><td scope="row"><code class="literal">db.<em class="replaceable"><code>name</code></em>.insert()</code></td><td>The
              <a class="link" href="document-store.html#mysql-shell-tutorial-javascript-table-insert" title="3.4.5.1 Insert Records into Tables">insert()</a>
              method inserts one or more records into the named table.</td></tr><tr><td scope="row"><code class="literal">db.<em class="replaceable"><code>name</code></em>.select()</code></td><td>The
              <a class="link" href="document-store.html#mysql-shell-tutorial-javascript-table-select" title="3.4.5.2 Select Tables">select()</a>
              method returns some or all records in the named table.</td></tr><tr><td scope="row"><code class="literal">db.<em class="replaceable"><code>name</code></em>.update()</code></td><td>The
              <a class="link" href="document-store.html#mysql-shell-tutorial-javascript-table-update" title="3.4.5.3 Update Tables">update()</a>
              method updates records in the named table.</td></tr><tr><td scope="row"><code class="literal">db.<em class="replaceable"><code>name</code></em>.delete()</code></td><td>The
              <a class="link" href="document-store.html#mysql-shell-tutorial-javascript-table-delete" title="3.4.5.4 Delete Tables">delete()</a>
method deletes one or more records from the named table.</td></tr></tbody></table>
</div>
<h4><a name="idm139777646437904"></a>Related Information</h4>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          See
          <a class="ulink" href="http://dev.mysql.com/doc/x-devapi-userguide/en/devapi-users-working-with-relational-tables.html" target="_top">Working with Relational Tables</a>
          for a general overview.
        </p></li><li class="listitem"><p>
          <a class="ulink" href="http://dev.mysql.com/doc/x-devapi-userguide/en/mysql-x-crud-ebnf-definitions.html" target="_top">CRUD EBNF Definitions</a> provides a
          complete list of operations.
        </p></li><li class="listitem"><p>
          See <a class="xref" href="document-store.html#mysql-shell-tutorial-javascript-download" title="3.4.2 Import Database Sample">Section 3.4.2, “Import Database Sample”</a>
          for instructions on setting up the <code class="literal">world_x</code>
          database sample.
</p></li></ul>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-shell-tutorial-javascript-table-insert"></a>3.4.5.1 Insert Records into Tables</h4>

</div>

</div>

</div>
<p>
        You can use the <code class="literal">insert()</code> method with the
        <code class="literal">values()</code> method to insert records into an
        existing relational table. The <code class="literal">insert()</code>
        method accepts individual columns or all columns in the table.
        Use one or more <code class="literal">values()</code> methods to specify
        the values to be inserted.
</p>
<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h5 class="title"><a name="idm139777646426624"></a>Insert a Complete Record</h5>
</div>
</div>
</div>
<p>
          To insert a complete record, pass to the
          <code class="literal">insert()</code> method all columns in the table.
          Then pass to the <code class="literal">values()</code> method one value
          for each column in the table. For example, to add a new record
          to the city table in the <code class="literal">world_x</code> database,
          insert the following record and press <span class="keycap"><strong>Enter</strong></span>
          twice.
        </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db.city.insert("ID", "Name", "CountryCode", "District", "Info").
values(null, "Olympia", "USA", "Washington", '{"Population": 5000}')</code></strong>
Query OK, 1 item affected (0.01 sec)
</pre><p>
          The city table has five columns: ID, Name, CountryCode,
          District, and Info. Each value must match the data type of the
          column it represents.
</p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777646420128"></a>Insert a Partial Record</h5>

</div>

</div>

</div>
<p>
          The following example inserts values into the ID, Name, and
          CountryCode columns of the city table.
        </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db.city.insert("ID", "Name", "CountryCode").
values(null, "Little Falls", "USA").values(null, "Happy Valley", "USA")</code></strong>
Query OK, 2 item affected (0.03 sec)
</pre><p>
          When you specify columns using the <code class="literal">insert()</code>
          method, the number of values must match the number of columns.
          In the previous example, you must supply three values to match
          the three columns specified.
</p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777646416000"></a>Related Information</h5>

</div>

</div>

</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              See <a class="ulink" href="http://dev.mysql.com/doc/x-devapi-userguide/en/crud-ebnf-table-crud-functions.html#crud-ebnf-tableinsertfunction" target="_top">TableInsertFunction</a> for
              the full syntax definition.
</p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-shell-tutorial-javascript-table-select"></a>3.4.5.2 Select Tables</h4>

</div>

</div>

</div>
<p>
        You can use the <code class="literal">select()</code> method to query for
        and return records from a table in a database. The
        X DevAPI provides additional methods to use with the
        <code class="literal">select()</code> method to filter and sort the
        returned records.
      </p><p>
        MySQL provides the following operators to specify search
        conditions: <code class="literal">OR</code> (<code class="literal">||</code>),
        <code class="literal">AND</code> (<code class="literal">&amp;&amp;</code>),
        <code class="literal">XOR</code>, <code class="literal">IS</code>,
        <code class="literal">NOT</code>, <code class="literal">BETWEEN</code>,
        <code class="literal">IN</code>, <code class="literal">LIKE</code>,
        <code class="literal">!=</code>, <code class="literal">&lt;&gt;</code>,
        <code class="literal">&gt;</code>, <code class="literal">&gt;=</code>,
        <code class="literal">&lt;</code>, <code class="literal">&lt;=</code>,
        <code class="literal">&amp;</code>, <code class="literal">|</code>,
        <code class="literal">&lt;&lt;</code>, <code class="literal">&gt;&gt;</code>,
        <code class="literal">+</code>, <code class="literal">-</code>,
        <code class="literal">*</code>, <code class="literal">/</code>,
        <code class="literal">~</code>, and <code class="literal">%</code>.
</p>
<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h5 class="title"><a name="idm139777646391408"></a>Select All Records</h5>
</div>
</div>
</div>
<p>
          To issue a query that returns all records from an existing
          table, use the <code class="literal">select()</code> method without
          specifying search conditions. The following example selects
          all records from the city table in the
          <code class="literal">world_x</code> database.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
            Limit the use of the empty <code class="literal">select()</code>
            method to interactive statements. Always use explicit
            column-name selections in your application code.
</p>
</div>
<pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db.city.select()</code></strong>
+------+------------+-------------+------------+-------------------------+
| ID   | Name       | CountryCode | District   | Info                    |
+------+------------+-------------+------------+-------------------------+
|    1 | Kabul      | AFG         | Kabol      |{"Population": 1780000}  |
|    2 | Qandahar   | AFG         | Qandahar   |{"Population": 237500}   |
|    3 | Herat      | AFG         | Herat      |{"Population": 186800}   |
...    ...          ...           ...          ...
| 4079 | Rafah      | PSE         | Rafah      |{"Population": 92020}    |
+------+------- ----+-------------+------------+-------------------------+
4082 rows in set (0.01 sec)
</pre><p>
          An empty set (no matching records) returns the following
          information:
        </p><pre class="screen">
Empty set (0.00 sec)
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777646383664"></a>Filter Searches</h5>

</div>

</div>

</div>
<p>
          To issue a query that returns a set of table columns, use the
          <code class="literal">select()</code> method and specify the columns to
          return between square brackets. This query returns the Name
          and CountryCode columns from the city table.
        </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db.city.select(["Name", "CountryCode"])</code></strong>
+-------------------+-------------+
| Name              | CountryCode |
+-------------------+-------------+
| Kabul             | AFG         |
| Qandahar          | AFG         |
| Herat             | AFG         |
| Mazar-e-Sharif    | AFG         |
| Amsterdam         | NLD         |
...                 ...
| Rafah             | PSE         |
| Olympia           | USA         |
| Little Falls      | USA         |
| Happy Valley      | USA         |
+-------------------+-------------+
4082 rows in set (0.00 sec)
</pre><p>
          To issue a query that returns rows matching specific search
          conditions, use the <code class="literal">where()</code> method to
          include those conditions. For example, the following example
          returns the names and country codes of the cities that start
          with the letter Z.
        </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db.city.select(["Name", "CountryCode"]).where("Name like 'Z%'")</code></strong>
+-------------------+-------------+
| Name              | CountryCode |
+-------------------+-------------+
| Zaanstad          | NLD         |
| Zoetermeer        | NLD         |
| Zwolle            | NLD         |
| Zenica            | BIH         |
| Zagazig           | EGY         |
| Zaragoza          | ESP         |
| Zamboanga         | PHL         |
| Zahedan           | IRN         |
| Zanjan            | IRN         |
| Zabol             | IRN         |
| Zama              | JPN         |
| Zhezqazghan       | KAZ         |
| Zhengzhou         | CHN         |
...                 ...
| Zeleznogorsk      | RUS         |
+-------------------+-------------+
59 rows in set (0.00 sec)
</pre><p>
          You can separate a value from the search condition by using
          the <code class="literal">bind()</code> method. For example, instead of
          using "Name = 'Z%' " as the condition, substitute a named
          placeholder consisting of a colon followed by a name that
          begins with a letter, such as <span class="emphasis"><em>name</em></span>. Then
          include the placeholder and value in the
          <code class="literal">bind()</code> method as follows:
        </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db.city.select(["Name", "CountryCode"]).
              where("Name like :name").bind("name", "Z%")</code></strong>
</pre>
<div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Tip
</div>
<p>
            Within a program, binding enables you to specify
            placeholders in your expressions, which are filled in with
            values before execution and can benefit from automatic
            escaping, as appropriate.
          </p><p>
            Always use binding to sanitize input. Avoid introducing
            values in queries using string concatenation, which can
            produce invalid input and, in some cases, can cause security
            issues.
</p>
</div>

</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777646370272"></a>Project Results</h5>

</div>

</div>

</div>
<p>
          To issue a query using the <a class="link" href="functions.html#operator_and"><code class="literal">AND</code></a>
          operator, add the operator between search conditions in the
          <code class="literal">where()</code> method.
        </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db.city.select(["Name", "CountryCode"]).
               where("Name like 'Z%' and CountryCode = 'CHN'")</code></strong>
+----------------+-------------+
| Name           | CountryCode |
+----------------+-------------+
| Zhengzhou      | CHN         |
| Zibo           | CHN         |
| Zhangjiakou    | CHN         |
| Zhuzhou        | CHN         |
| Zhangjiang     | CHN         |
| Zigong         | CHN         |
| Zaozhuang      | CHN         |
...              ...
| Zhangjiagang   | CHN         |
+----------------+-------------+
22 rows in set (0.01 sec)
</pre><p>
          To specify multiple conditional operators, you can enclose the
          search conditions in parenthesis to change the operator
          precedence. The following example demonstrates the placement
          of <a class="link" href="functions.html#operator_and"><code class="literal">AND</code></a> and
          <a class="link" href="functions.html#operator_or"><code class="literal">OR</code></a> operators.
        </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db.city.select(["Name", "CountryCode"]).
where("Name like 'Z%' and (CountryCode = 'CHN' or CountryCode = 'RUS')")</code></strong>
+-------------------+-------------+
| Name              | CountryCode |
+-------------------+-------------+
| Zhengzhou         | CHN         |
| Zibo              | CHN         |
| Zhangjiakou       | CHN         |
| Zhuzhou           | CHN         |
...                 ...
| Zeleznogorsk      | RUS         |
+-------------------+-------------+
29 rows in set (0.01 sec)
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777646360256"></a>Limit, Order, and Offset Results</h5>

</div>

</div>

</div>
<p>
          You can apply the <code class="literal">limit()</code>,
          <code class="literal">orderBy()</code>, and <code class="literal">offSet()</code>
          methods to manage the number and order of records returned by
          the <code class="literal">select()</code> method.
        </p><p>
          To specify the number of records included in a result set,
          append the <code class="literal">limit()</code> method with a value to
          the <code class="literal">select()</code> method. For example, the
          following query returns the first five records in the country
          table.
        </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db.country.select(["Code", "Name"]).limit(5)</code></strong>
+------+-------------+
| Code | Name        |
+------+-------------+
| ABW  | Aruba       |
| AFG  | Afghanistan |
| AGO  | Angola      |
| AIA  | Anguilla    |
| ALB  | Albania     |
+------+-------------+
5 rows in set (0.00 sec)
</pre><p>
          To specify an order for the results, append the
          <code class="literal">orderBy()</code> method to the
          <code class="literal">select()</code> method. Pass to the
          <code class="literal">orderBy()</code> method a list of one or more
          columns to sort by and, optionally, the descending
          (<code class="literal">desc</code>) or ascending
          (<code class="literal">asc</code>) attribute as appropriate. Ascending
          order is the default order type.
        </p><p>
          For example, the following query sorts all records by the Name
          column and then returns the first three records in descending
          order .
        </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db.country.select(["Code", "Name"]).orderBy(["Name desc"]).limit(3)</code></strong>
+------+------------+
| Code | Name       |
+------+------------+
| ZWE  | Zimbabwe   |
| ZMB  | Zambia     |
| YUG  | Yugoslavia |
+------+------------+
3 rows in set (0.00 sec)
</pre><p>
          By default, the <code class="literal">limit()</code> method starts from
          the first record in the table. You can use the
          <code class="literal">offset()</code> method to change the starting
          record. For example, to ignore the first record and return the
          next three records matching the condition, pass to the
          <code class="literal">offset()</code> method a value of 1.
        </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db.country.select(["Code", "Name"]).orderBy(["Name desc"]).limit(3).offset(1)</code></strong>
+------+------------+
| Code | Name       |
+------+------------+
| ZMB  | Zambia     |
| YUG  | Yugoslavia |
| YEM  | Yemen      |
+------+------------+
3 rows in set (0.00 sec)
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777646341440"></a>Related Information</h5>

</div>

</div>

</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              The <a class="link" href="functions.html" title="Chapter 13 Functions and Operators">MySQL Reference
              Manual</a> provides detailed documentation on functions
              and operators.
            </p></li><li class="listitem"><p>
              See <a class="ulink" href="http://dev.mysql.com/doc/x-devapi-userguide/en/crud-ebnf-table-crud-functions.html#crud-ebnf-tableselectfunction" target="_top">TableSelectFunction</a> for
              the full syntax definition.
</p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-shell-tutorial-javascript-table-update"></a>3.4.5.3 Update Tables</h4>

</div>

</div>

</div>
<p>
        You can use the <code class="literal">update()</code> method to modify one
        or more records in a table. The <code class="literal">update()</code>
        method works by filtering a query to include only the records to
        be updated and then applying the operations you specify to those
        records.
      </p><p>
        To replace a city name in the city table, pass to the
        <code class="literal">set()</code> method the new city name. Then, pass to
        the <code class="literal">where()</code> method the city name to locate
        and replace. The following example replaces the city Peking with
        Beijing.
      </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db.city.update().set("Name", "Beijing").where("Name = 'Peking'")</code></strong>
Query OK, 1 item affected (0.04 sec)
</pre><p>
        Use the <code class="literal">select()</code> method to verify the change.
      </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db.city.select(["ID", "Name", "CountryCode", "District", "Info"]).where("Name = 'Beijing'")</code></strong>
+------+-----------+-------------+----------+-----------------------------+
| ID   | Name      | CountryCode | District | Info                        |
+------+-----------+-------------+----------+-----------------------------+
| 1891 | Beijing   | CHN         | Peking   | {"Population": 7472000}     |
+------+-----------+-------------+----------+-----------------------------+
1 row in set (0.00 sec)
</pre>
<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h5 class="title"><a name="idm139777646326960"></a>Related Information</h5>
</div>
</div>
</div>

<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              See <a class="ulink" href="http://dev.mysql.com/doc/x-devapi-userguide/en/crud-ebnf-table-crud-functions.html#crud-ebnf-tableupdatefunction" target="_top">TableUpdateFunction</a> for
              the full syntax definition.
</p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-shell-tutorial-javascript-table-delete"></a>3.4.5.4 Delete Tables</h4>

</div>

</div>

</div>
<p>
        You can use the <code class="literal">delete()</code> method to remove
        some or all records from a table in a database. The
        X DevAPI provides additional methods to use with the
        <code class="literal">delete()</code> method to filter and order the
        records to be deleted.
</p>
<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h5 class="title"><a name="idm139777646320704"></a>Delete Records Using Conditions</h5>
</div>
</div>
</div>
<p>
          The example that follows passes search conditions to the
          <code class="literal">delete()</code> method. All records matching the
          condition will be deleted from the city table. In this
          example, one record matches the condition.
        </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db.city.delete().where("Name = 'Olympia'")</code></strong>
Query OK, 1 item affected (0.01 sec)
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777646317152"></a>Delete the First Record</h5>

</div>

</div>

</div>
<p>
          To delete the first record in the city table, use the
          <code class="literal">limit()</code> method with a value of 1.
        </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db.city.delete().limit(1)</code></strong>
Query OK, 1 item affected (0.02 sec)
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777646313696"></a>Delete All Records in a Table</h5>

</div>

</div>

</div>
<p>
          You can delete all records in a table. To do so, use the
          <code class="literal">delete()</code> method without specifying a search
          condition.
</p>
<div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Caution
</div>
<p>
            Use care when you delete records without specifying a search
            condition. This action will delete all records from the
            table.
</p>
</div>

</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777646310672"></a>Related Information</h5>

</div>

</div>

</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              See <a class="ulink" href="http://dev.mysql.com/doc/x-devapi-userguide/en/crud-ebnf-table-crud-functions.html#crud-ebnf-tabledeletefunction" target="_top">TableDeleteFunction</a> for
              the full syntax definition.
            </p></li><li class="listitem"><p>
              See
              <a class="xref" href="document-store.html#mysql-shell-tutorial-javascript-download" title="3.4.2 Import Database Sample">Section 3.4.2, “Import Database Sample”</a>
              for instructions to recreate the
              <code class="literal">world_x</code> database.
</p></li></ul>
</div>

</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-shell-tutorial-javascript-documents-in-tables"></a>3.4.6 Documents in Tables</h3>

</div>

</div>

</div>
<p>
      In MySQL, a table may contain traditional relational data, JSON
      values, or both. You can combine traditional data with JSON
      documents by storing the documents in columns having a native
      <a class="link" href="data-types.html#json" title="12.6 The JSON Data Type"><code class="literal">JSON</code></a> data type.
    </p><p>
      Examples in this section use the city table in the
      <code class="literal">world_x</code> database.
</p>
<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h4 class="title"><a name="idm139777646300992"></a>city Table Description</h4>
</div>
</div>
</div>
<p>
        The city table has five columns (or fields).
      </p><pre class="screen">
+---------------+------------+-------+-------+---------+------------------+
| Field         | Type       | Null  | Key   | Default | Extra            |
+---------------+------------+-------+-------+---------+------------------+
| ID            | int(11)    | NO    | PRI   | null    | auto_increment   |
| Name          | char(35)   | NO    |       |         |                  |
| CountryCode   | char(3)    | NO    |       |         |                  |
| District      | char(20)   | NO    |       |         |                  |
| Info          | json       | YES   |       | null    |                  |
+---------------+------------+-------+-------+---------+------------------+
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="idm139777646298368"></a>Insert a Record</h4>

</div>

</div>

</div>
<p>
        To insert a document into the column of a table, pass to the
        <code class="literal">values()</code> method a well-formed JSON document
        in the correct order. In the following example, a document is
        passed as the final value to be inserted into the Info column.
      </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db.city.insert().
values(null, "San Francisco", "USA", "California", '{"Population":830000}')</code></strong>
Query OK, 1 item affected (0.01 sec)
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="idm139777646294704"></a>Select a Record</h4>

</div>

</div>

</div>
<p>
        You can issue a query with a search condition that evaluates
        document values in the expression.
      </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db.city.select(["ID", "Name", "CountryCode", "District", "Info"]).
  where("CountryCode = :country and Info-&gt;'$.Population' &gt; 1000000").
  bind('country', 'USA')</code></strong>
+------+----------------+-------------+----------------+-----------------------------+
| ID   | Name           | CountryCode | District       | Info                        |
+------+----------------+-------------+----------------+-----------------------------+
| 3793 | New York       | USA         | New York       | {"Population": 8008278}     |
| 3794 | Los Angeles    | USA         | California     | {"Population": 3694820}     |
| 3795 | Chicago        | USA         | Illinois       | {"Population": 2896016}     |
| 3796 | Houston        | USA         | Texas          | {"Population": 1953631}     |
| 3797 | Philadelphia   | USA         | Pennsylvania   | {"Population": 1517550}     |
| 3798 | Phoenix        | USA         | Arizona        | {"Population": 1321045}     |
| 3799 | San Diego      | USA         | California     | {"Population": 1223400}     |
| 3800 | Dallas         | USA         | Texas          | {"Population": 1188580}     |
| 3801 | San Antonio    | USA         | Texas          | {"Population": 1144646}     |
+------+----------------+-------------+----------------+-----------------------------+
9 rows in set (0.01 sec)
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="idm139777646290640"></a>Related Information</h4>

</div>

</div>

</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            See
            <a class="ulink" href="http://dev.mysql.com/doc/x-devapi-userguide/en/devapi-users-working-with-relational-tables-and-documents.html" target="_top">Working with Relational Tables and Documents</a>
            for a general overview.
          </p></li><li class="listitem"><p>
            See <a class="xref" href="data-types.html#json" title="12.6 The JSON Data Type">Section 12.6, “The JSON Data Type”</a> for a detailed description of the
            data type.
</p></li></ul>
</div>

</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="mysql-shell-tutorial-python"></a>3.5 Quick-Start Guide: MySQL Shell for Python</h2>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="document-store.html#mysql-shell-tutorial-python-introduction">3.5.1 Introduction</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-tutorial-python-download">3.5.2 Import Database Sample</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-tutorial-python-shell">3.5.3 MySQL Shell</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-tutorial-python-collections">3.5.4 Documents and Collections</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-tutorial-python-relational-tables">3.5.5 Relational Tables</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-tutorial-python-documents-in-tables">3.5.6 Documents in Tables</a></span></dt></dl>
</div>
<p>
    This quick-start guide provides instructions to begin prototyping
    database applications interactively with MySQL Shell. The guide
    includes the following topics:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
        Introduction to MySQL functionality, MySQL Shell, and the
        <code class="literal">world_x</code> database sample.
      </p></li><li class="listitem"><p>
        Operations to manage collections and documents.
      </p></li><li class="listitem"><p>
        Operations to manage relational tables.
      </p></li><li class="listitem"><p>
        Operations that apply to documents within tables.
</p></li></ul>
</div>
<h3><a name="idm139777646279856"></a>Available Quick-Start Guides</h3>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
        <a class="link" href="document-store.html#mysql-shell-tutorial-javascript" title="3.4 Quick-Start Guide: MySQL Shell for JavaScript">MySQL Shell
        for JavaScript</a>
      </p></li><li class="listitem"><p>
        <a class="link" href="document-store.html#mysql-shell-visual-studio" title="3.6 Quick-Start Guide: MySQL for Visual Studio">MySQL for Visual
        Studio</a>
</p></li></ul>
</div>
<h3><a name="idm139777646275520"></a>Related Information</h3>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
        <a class="xref" href="document-store.html#mysql-shell" title="3.8 MySQL Shell User Guide">Section 3.8, “MySQL Shell User Guide”</a> provides more in-depth information
        about MySQL Shell.
      </p></li><li class="listitem"><p>
        <a class="ulink" href="http://dev.mysql.com/doc/x-devapi-userguide/en/" target="_top">X DevAPI User Guide</a> provides more examples of
        using X DevAPI.
</p></li></ul>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-shell-tutorial-python-introduction"></a>3.5.1 Introduction</h3>

</div>

</div>

</div>
<p>
      The MySQL Shell for Python quick start provides a short but
      comprehensive introduction to the database functionality
      introduced with MySQL 5.7.12. This functionality includes the new
      X DevAPI, which offers a modern, integrative way to work
      with relational and document data, without requiring SQL knowledge
      from application developers.
    </p><p>
      In MySQL, tables are the native data storage container type and
      collections are stored internally using tables.
</p>
<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h4 class="title"><a name="idm139777646268848"></a>JSON Documents and Collections</h4>
</div>
</div>
</div>
<p>
        A JSON
        <a class="link" href="document-store.html#mysql-shell-tutorial-python-documents" title="Documents">document</a>
        is a data structure composed of field/value pairs stored within
        a
        <a class="link" href="document-store.html#mysql-shell-tutorial-python-collections" title="3.5.4 Documents and Collections">collection</a>.
        The values of fields often contain other documents, arrays, and
        lists of documents.
      </p><pre class="screen">
{
    "GNP": .6,
    "IndepYear": 1967,
    "Name": "Sealand",
    "_id": "SEA",
    "demographics": {
        "LifeExpectancy": 79,
        "Population": 27
    },
    "geography": {
        "Continent": "Europe",
        "Region": "British Islands",
        "SurfaceArea": 193
    },
    "government": {
        "GovernmentForm": "Monarchy",
        "HeadOfState": "Michael Bates"
    }
}
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="idm139777646264352"></a>Relational Tables</h4>

</div>

</div>

</div>
<p>
        A
        <a class="link" href="document-store.html#mysql-shell-tutorial-python-relational-tables" title="3.5.5 Relational Tables">table</a>
        in MySQL enables you to store data organized in rows and
        columns. The structure of a table is defined by one or more
        columns with user-defined names and data types. Every row stored
        in the table has the same structure.
      </p><pre class="screen">
+------+------------------+-------------+-----------------+------------------------+
| ID   | Name             | CountryCode | District        | Info                   |
+------+------------------+-------------+-----------------+------------------------+
|    1 | Kabul            | AFG         | Kabol           |{"Population": 1780000} |
|    2 | Qandahar         | AFG         | Qandahar        |{"Population": 237500}  |
|    3 | Herat            | AFG         | Herat           |{"Population": 186800}  |
|    4 | Mazar-e-Sharif   | AFG         | Balkh           |{"Population": 127800}  |
|    5 | Amsterdam        | NLD         | Noord-Holland   |{"Population": 731200}  |
|    6 | Rotterdam        | NLD         | Zuid-Holland    |{"Population": 593321}  |
+------+------------------+-------------+-----------------+------------------------+
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="idm139777646260416"></a>Related Information</h4>

</div>

</div>

</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="xref" href="document-store.html#mysql-shell" title="3.8 MySQL Shell User Guide">Section 3.8, “MySQL Shell User Guide”</a> provides a general overview.
          </p></li><li class="listitem"><p>
            See <a class="ulink" href="http://dev.mysql.com/doc/x-devapi-userguide/en/" target="_top">X DevAPI User Guide</a> for development
            reference documentation.
</p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-shell-tutorial-python-download"></a>3.5.2 Import Database Sample</h3>

</div>

</div>

</div>
<p>
      The <code class="literal">world_x</code> database sample contains one JSON
      collection and a set of three relational tables:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          Collection
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              countryinfo: Information about countries in the world.
</p></li></ul>
</div>
</li><li class="listitem"><p>
          Tables
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              country: Minimal information about countries of the world.
            </p></li><li class="listitem"><p>
              city: Information about some of the cities in those
              countries.
            </p></li><li class="listitem"><p>
              countrylanguage: Languages spoken in each country.
</p></li></ul>
</div>
</li></ul>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="idm139777646247424"></a>Requirements</h4>

</div>

</div>

</div>
<p>
        You must install MySQL Shell and MySQL 5.7.12 or higher with
        the X Protocol enabled. For instructions, see
        <a class="xref" href="document-store.html#document-store-setting-up" title="3.3 Setting Up MySQL as a Document Store">Section 3.3, “Setting Up MySQL as a Document Store”</a>.
      </p><p>
        Start the server before you load the <code class="literal">world_x</code>
        database for this guide.
</p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="idm139777646244144"></a>Download world_x Database</h4>

</div>

</div>

</div>
<p>
        To prepare the <code class="literal">world_x</code> database sample,
        follow these steps:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
            Download
            <a class="ulink" href="http://downloads.mysql.com/docs/world_x-db.zip" target="_top">world_x-db.zip</a>.
          </p></li><li class="listitem"><p>
            Extract the installation archive to a temporary location
            such as <code class="filename">/tmp/</code>. Unpacking the archive
            results in a single file named
            <code class="filename">world_x.sql</code>.
          </p></li><li class="listitem"><p>
            Create or recreate the schema with the following command:
          </p><pre class="programlisting">
<strong class="userinput"><code>mysqlsh -u root --sql --recreate-schema world_x &lt; /tmp/world_x-db/world_x.sql</code></strong>
Enter password: <strong class="userinput"><code>****</code></strong>
Recreating schema world_x...
</pre><p>
            Enter your password when prompted. A non-root account can be
            used as long as the account has privileges to create new
            databases.
          </p><p>
            Replace <code class="filename">/tmp/</code> with the path to the
            <code class="filename">world_x.sql</code> file on your system.
</p></li></ol>
</div>

</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="idm139777646231792"></a>Related Information</h4>

</div>

</div>

</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="xref" href="document-store.html#mysql-shell-sessions" title="3.8.2.1 MySQL Shell Sessions">Section 3.8.2.1, “MySQL Shell Sessions”</a> explains session
            types.
          </p></li><li class="listitem"><p>
            See <a class="xref" href="installing.html" title="Chapter 2 Installing and Upgrading MySQL">Chapter 2, <i>Installing and Upgrading MySQL</i></a> for general installation
            assistance.
</p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-shell-tutorial-python-shell"></a>3.5.3 MySQL Shell</h3>

</div>

</div>

</div>
<p>
      MySQL Shell is a unified scripting interface to MySQL Server. It
      supports scripting in JavaScript and Python. JavaScript is the
      default processing mode. In most cases, you need an account to
      connect to the local MySQL server instance.
</p>
<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h4 class="title"><a name="mysql-shell-tutorial-python-shell-start"></a>Start MySQL Shell</h4>
</div>
</div>
</div>
<p>
        After you have installed and started MySQL server, connect
        MySQL Shell to the server instance. By default, MySQL Shell
        connects using the X Protocol.
      </p><p>
        On the same system where the server instance is running, open a
        terminal window and start MySQL Shell with the following
        command:
      </p><pre class="programlisting">
<strong class="userinput"><code>mysqlsh -u <em class="replaceable"><code>name</code></em> --py world_x</code></strong>
Creating an X Session to <em class="replaceable"><code>name</code></em>@localhost:33060/world_x
Enter password:<strong class="userinput"><code> ****</code></strong>
</pre><p>
        You may need to specify the path as appropriate.
      </p><p>
        In addition:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <em class="replaceable"><code>name</code></em> represents the user name of
            your MySQL account.
          </p></li><li class="listitem"><p>
            MySQL Shell prompts you for your password.
          </p></li><li class="listitem"><p>
            The <code class="literal">--py</code> option starts MySQL Shell in
            Python mode. If you omit <code class="literal">--py</code>,
            MySQL Shell starts in JavaScript mode.
          </p></li><li class="listitem"><p>
            The default schema for this session is the
            <code class="literal">world_x</code> database. For instructions on
            setting up the <code class="literal">world_x</code> database sample,
            see <a class="xref" href="document-store.html#mysql-shell-tutorial-python-download" title="3.5.2 Import Database Sample">Section 3.5.2, “Import Database Sample”</a>.
</p></li></ul>
</div>
<p>
        The <code class="literal">mysql-py&gt;</code> prompt indicates that the
        active language for this session is Python.
      </p><pre class="programlisting">
mysql-py&gt;
</pre><p>
        When you run <a class="link" href="programs.html#mysqlsh" title="5.5.7 mysqlsh — The MySQL Shell"><span class="command"><strong>mysqlsh</strong></span></a> without the host
        argument, MySQL Shell attempts to connect to the server
        instance running on the localhost interface on port 33060. To
        specify a different host or port number, as well as other
        options, see the option descriptions at
        <a class="xref" href="programs.html#mysqlsh" title="5.5.7 mysqlsh — The MySQL Shell">Section 5.5.7, “<span class="command"><strong>mysqlsh</strong></span> — The MySQL Shell”</a>.
      </p><p>
        MySQL Shell supports input-line editing as follows:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <span class="keycap"><strong>left-arrow</strong></span> and <span class="keycap"><strong>right-arrow</strong></span>
            keys move horizontally within the current input line.
          </p></li><li class="listitem"><p>
            <span class="keycap"><strong>up-arrow</strong></span> and <span class="keycap"><strong>down-arrow</strong></span>
            keys move up and down through the set of previously entered
            lines.
          </p></li><li class="listitem"><p>
            <span class="keycap"><strong>Backspace</strong></span> deletes the character before the
            cursor and typing new characters enters them at the cursor
            position.
          </p></li><li class="listitem"><p>
            <span class="keycap"><strong>Enter</strong></span> enters the current input line.
</p></li></ul>
</div>

</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="mysql-shell-tutorial-python-shell-help"></a>Get Help for MySQL Shell</h4>

</div>

</div>

</div>
<p>
        Type <a class="link" href="programs.html#mysqlsh" title="5.5.7 mysqlsh — The MySQL Shell"><span class="command"><strong>mysqlsh --help</strong></span></a> at the prompt of your
        command interpreter for a list of command-line options.
      </p><pre class="programlisting">
<strong class="userinput"><code>mysqlsh --help</code></strong>
</pre><p>
        Type <span class="command"><strong>\help</strong></span> at the MySQL Shell prompt for a
        list of available commands and their descriptions.
      </p><pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>\help</code></strong>
</pre><p>
        Type <span class="command"><strong>\help</strong></span> followed by a command name for
        detailed help about an individual MySQL Shell command. For
        example, to view help on the <span class="command"><strong>\connect</strong></span>
        command, type:
      </p><pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>\help \connect</code></strong>
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="mysql-shell-tutorial-python-shell-quit"></a>Quit MySQL Shell</h4>

</div>

</div>

</div>
<p>
        To quit MySQL Shell, type the following command:
      </p><pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>\quit</code></strong>
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="idm139777646184896"></a>Related Information</h4>

</div>

</div>

</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            See <a class="xref" href="document-store.html#mysql-shell-interactive-code-execution" title="3.8.3.1 Interactive Code Execution">Section 3.8.3.1, “Interactive Code Execution”</a>
            for an explanation of how interactive code execution works
            in MySQL Shell.
          </p></li><li class="listitem"><p>
            See <a class="xref" href="document-store.html#mysql-shell-getting-started" title="3.8.2 Getting Started with MySQL Shell">Section 3.8.2, “Getting Started with MySQL Shell”</a> to learn
            about session and connection alternatives.
</p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-shell-tutorial-python-collections"></a>3.5.4 Documents and Collections</h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="document-store.html#mysql-shell-tutorial-python-collections-operations">3.5.4.1 Create, List, and Drop Collections</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-tutorial-python-documents-add">3.5.4.2 Add Documents</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-tutorial-python-documents-find">3.5.4.3 Find Documents</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-tutorial-python-documents-modify">3.5.4.4 Modify Documents</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-tutorial-python-documents-remove">3.5.4.5 Remove Documents</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-tutorial-python-documents-index">3.5.4.6 Create and Drop Indexes</a></span></dt></dl>
</div>
<p>
      In MySQL, collections contain JSON documents that you can add,
      find, update, and remove. Collections are containers within a
      schema that you create, list, and drop.
    </p><p>
      The examples in this section use the countryinfo collection in the
      <code class="literal">world_x</code> database. For instructions on setting
      up the <code class="literal">world_x</code> database sample, see
      <a class="xref" href="document-store.html#mysql-shell-tutorial-python-download" title="3.5.2 Import Database Sample">Section 3.5.2, “Import Database Sample”</a>.
</p>
<h4><a name="mysql-shell-tutorial-python-documents"></a>Documents</h4>
<p>
      In MySQL, documents are represented as JSON objects. Internally,
      they are stored in an efficient binary format that enables fast
      lookups and updates.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          Simple document format for Python:
        </p><pre class="screen">
{"field1": "value", "field2" : 10, "field 3": null}
</pre></li></ul>
</div>
<p>
      An array of documents consists of a set of documents separated by
      commas and enclosed within <code class="literal">[</code> and
      <code class="literal">]</code> characters.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          Simple array of documents for Python:
        </p><pre class="screen">
[{"Name": "Aruba", "_id": "ABW"}, {"Name": "Angola", "_id": "AGO"}]
</pre></li></ul>
</div>
<p>
      MySQL supports the following Python value types in JSON documents:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          numbers (integer and floating point)
        </p></li><li class="listitem"><p>
          strings
        </p></li><li class="listitem"><p>
          boolean (False and True)
        </p></li><li class="listitem"><p>
          None
        </p></li><li class="listitem"><p>
          arrays of more JSON values
        </p></li><li class="listitem"><p>
          nested (or embedded) objects of more JSON values
</p></li></ul>
</div>
<h4><a name="mysql-shell-tutorial-python-collections-details"></a>Collections</h4>
<p>
      Collections are containers for documents that share a purpose and
      possibly share one or more indexes. Each collection has a unique
      name and exists within a single schema.
    </p><p>
      The term schema is equivalent to a database, which means a group
      of database objects (as opposed to relational schema used to
      enforce structure and constraints over data). A schema does not
      enforce conformity on the documents in a collection.
    </p><p>
      In this quick-start guide:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          Basic objects include:
</p>
<div class="informaltable">
<table class="informaltable" summary="Objects to use interactively in
            MySQL Shell" border="1"><colgroup><col><col></colgroup><thead><tr><th scope="col">Object form</th><th scope="col">Description</th></tr></thead><tbody><tr><td scope="row"><code class="literal">db</code></td><td><code class="literal">db</code> is a global variable assigned to the current
                  active schema that you specified on the command line.
                  You can type <code class="literal">db</code> in MySQL Shell to
                  print a description of the object, which in this case
                  will be the name of the schema it represents.</td></tr><tr><td scope="row"><code class="literal">db.get_collections()</code></td><td><a class="link" href="document-store.html#mysql-shell-tutorial-python-collections-get" title="List Collections">db.get_collections()</a>
                  holds a list of collections in the schema. Use the
                  list to get references to collection objects, iterate
over them, and so on.</td></tr></tbody></table>
</div>
</li><li class="listitem"><p>
          Basic operations scoped by collections include:
</p>
<div class="informaltable">
<table class="informaltable" summary="CRUD operations to use interactively on documents in
            MySQL Shell" border="1"><colgroup><col><col></colgroup><thead><tr><th scope="col">Operation form</th><th scope="col">Description</th></tr></thead><tbody><tr><td scope="row"><code class="literal">db.<em class="replaceable"><code>name</code></em>.add()</code></td><td>The
                  <a class="link" href="document-store.html#mysql-shell-tutorial-python-documents-add" title="3.5.4.2 Add Documents">add()</a>
                  method inserts one document or a list of documents
                  into the named collection.</td></tr><tr><td scope="row"><code class="literal">db.<em class="replaceable"><code>name</code></em>.find()</code></td><td>The
                  <a class="link" href="document-store.html#mysql-shell-tutorial-python-documents-find" title="3.5.4.3 Find Documents">find()</a>
                  method returns some or all documents in the named
                  collection.</td></tr><tr><td scope="row"><code class="literal">db.<em class="replaceable"><code>name</code></em>.modify()</code></td><td>The
                  <a class="link" href="document-store.html#mysql-shell-tutorial-python-documents-modify" title="3.5.4.4 Modify Documents">modify()</a>
                  method updates documents in the named collection.</td></tr><tr><td scope="row"><code class="literal">db.<em class="replaceable"><code>name</code></em>.remove()</code></td><td>The
                  <a class="link" href="document-store.html#mysql-shell-tutorial-python-documents-remove" title="3.5.4.5 Remove Documents">remove()</a>
                  method deletes one document or a list of documents
from the named collection.</td></tr></tbody></table>
</div>
</li></ul>
</div>
<h4><a name="idm139777646129920"></a>Related Information</h4>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          See <a class="ulink" href="http://dev.mysql.com/doc/x-devapi-userguide/en/devapi-users-working-with-collections.html" target="_top">Working with Collections</a>
          for a general overview.
        </p></li><li class="listitem"><p>
          <a class="ulink" href="http://dev.mysql.com/doc/x-devapi-userguide/en/mysql-x-crud-ebnf-definitions.html" target="_top">CRUD EBNF Definitions</a> provides a
          complete list of operations.
</p></li></ul>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-shell-tutorial-python-collections-operations"></a>3.5.4.1 Create, List, and Drop Collections</h4>

</div>

</div>

</div>
<p>
        In MySQL Shell, you can create new collections, get a list of
        the existing collections in a schema, and remove an existing
        collection from a schema. Collection names are case-sensitive
        and each collection name must be unique.
</p>
<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h5 class="title"><a name="idm139777646123696"></a>Confirm the Schema</h5>
</div>
</div>
</div>
<p>
          To show the value that is assigned to the schema variable,
          type <code class="literal">db</code>.
        </p><pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>db</code></strong>
&lt;Schema:world_x&gt;
</pre><p>
          If the schema value is not <code class="literal">Schema:world_x</code>,
          then set the <code class="literal">db</code> variable as follows:
        </p><pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>\use world_x</code></strong>
Schema `world_x` accessible through db.
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="mysql-shell-tutorial-python-collections-create"></a>Create a Collection</h5>

</div>

</div>

</div>
<p>
          To create a new collection in an existing schema, use the
          <code class="literal">create_collection()</code> method.
        </p><p>
          The following example creates in the
          <code class="literal">world_x</code> database a collection called flags.
          The method returns a collection object.
        </p><pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>db.create_collection("flags")</code></strong>
&lt;Collection:flags&gt;
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="mysql-shell-tutorial-python-collections-get"></a>List Collections</h5>

</div>

</div>

</div>
<p>
          To display all collections in the <code class="literal">world_x</code>
          database, use the <code class="literal">get_collections()</code> method
          on the schema object. Collections returned by the server
          appear between brackets.
        </p><pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>db.get_collections()</code></strong>
[
    &lt;Collection:countryinfo&gt;,
    &lt;Collection:flags&gt;
]
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="mysql-shell-tutorial-python-collections-drop"></a>Drop a Collection</h5>

</div>

</div>

</div>
<p>
          To drop an existing collection from a database, use the
          <code class="literal">drop_collection()</code> method on the session
          object. For example, to drop the flags collection from the
          <code class="literal">world_x</code> database, type:
        </p><pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>session.drop_collection("world_x", "flags")</code></strong>
Query OK (0.04 sec)
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777646102304"></a>Related Information</h5>

</div>

</div>

</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              See
              <a class="xref" href="document-store.html#mysql-connections-in-javascript-and-python" title="3.8.2.2.6 Connections in JavaScript and Python">Section 3.8.2.2.6, “Connections in JavaScript and Python”</a>
              to learn more about the session object.
            </p></li><li class="listitem"><p>
              See <a class="ulink" href="http://dev.mysql.com/doc/x-devapi-userguide/en/collection-objects.html" target="_top">Collection Objects</a> for more
              examples.
</p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-shell-tutorial-python-documents-add"></a>3.5.4.2 Add Documents</h4>

</div>

</div>

</div>
<p>
        You can use the <code class="literal">add()</code> method to insert one
        document or a list documents into an existing collection using
        MySQL Shell. All examples in this section use the countryinfo
        collection.
</p>
<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h5 class="title"><a name="idm139777646095232"></a>Confirm the Schema</h5>
</div>
</div>
</div>
<p>
          To show the value that is assigned to the schema variable,
          type<code class="literal">db</code>.
        </p><pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>db</code></strong>
&lt;Schema:world_x&gt;
</pre><p>
          If the schema value is not <code class="literal">Schema:world_x</code>,
          then set the <code class="literal">db</code> variable as follows:
        </p><pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>\use world_x</code></strong>
Schema `world_x` accessible through db.
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777646088624"></a>Add a Document</h5>

</div>

</div>

</div>
<p>
          Insert the following document into the countryinfo collection.
          Press <span class="keycap"><strong>Enter</strong></span> twice to insert the document.
        </p><pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>db.countryinfo.add(
 {
    "GNP": .6,
    "IndepYear": 1967,
    "Name": "Sealand",
    "_id": "SEA",
    "demographics": {
        "LifeExpectancy": 79,
        "Population": 27
    },
    "geography": {
        "Continent": "Europe",
        "Region": "British Islands",
        "SurfaceArea": 193
    },
    "government": {
        "GovernmentForm": "Monarchy",
        "HeadOfState": "Michael Bates"
    }
  }
)</code></strong>
Query OK, 1 item affected (0.02 sec)
</pre><p>
          The method returns the status of the operation.
        </p><p>
          Each document requires an identifier field called
          <code class="literal">_id</code>. The value of the
          <code class="literal">_id</code> field must be unique among all
          documents in the same collection. If the document passed to
          the <code class="literal">add()</code> method does not contain the
          <code class="literal">_id</code> field, MySQL Shell automatically
          inserts a field into the document and sets the value to a
          generated universal unique identifier (UUID).
</p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777646080784"></a>Related Information</h5>

</div>

</div>

</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              See <a class="ulink" href="http://dev.mysql.com/doc/x-devapi-userguide/en/crud-ebnf-collection-crud-functions.html#crud-ebnf-collectionaddfunction" target="_top">CollectionAddFunction</a> for
              the full syntax definition.
</p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-shell-tutorial-python-documents-find"></a>3.5.4.3 Find Documents</h4>

</div>

</div>

</div>
<p>
        You can use the <code class="literal">find()</code> method to query for
        and return documents from a collection in a database.
        MySQL Shell provides additional methods to use with the
        <code class="literal">find()</code> method to filter and sort the returned
        documents.
      </p><p>
        MySQL provides the following operators to specify search
        conditions: <code class="literal">OR</code> (<code class="literal">||</code>),
        <code class="literal">AND</code> (<code class="literal">&amp;&amp;</code>),
        <code class="literal">XOR</code>, <code class="literal">IS</code>,
        <code class="literal">NOT</code>, <code class="literal">BETWEEN</code>,
        <code class="literal">IN</code>, <code class="literal">LIKE</code>,
        <code class="literal">!=</code>, <code class="literal">&lt;&gt;</code>,
        <code class="literal">&gt;</code>, <code class="literal">&gt;=</code>,
        <code class="literal">&lt;</code>, <code class="literal">&lt;=</code>,
        <code class="literal">&amp;</code>, <code class="literal">|</code>,
        <code class="literal">&lt;&lt;</code>, <code class="literal">&gt;&gt;</code>,
        <code class="literal">+</code>, <code class="literal">-</code>,
        <code class="literal">*</code>, <code class="literal">/</code>,
        <code class="literal">~</code>, and <code class="literal">%</code>.
</p>
<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h5 class="title"><a name="mysql-shell-tutorial-python-documents-find-all"></a>Find All Documents in a Collection</h5>
</div>
</div>
</div>
<p>
          To return all documents in a collection, use the
          <code class="literal">find()</code> method without specifying search
          conditions. For example, the following operation returns all
          documents in the countryinfo collection.
        </p><pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>db.countryinfo.find()</code></strong>
[
     {
          "GNP": 828,
          "IndepYear": null,
          "Name": "Aruba",
          "_id": "ABW",
          "demographics": {
              "LifeExpectancy": 78.4000015258789,
              "Population": 103000
          },
          "geography": {
              "Continent": "North America",
              "Region": "Caribbean",
              "SurfaceArea": 193
          },
          "government": {
              "GovernmentForm": "Nonmetropolitan Territory of The Netherlands",
              "HeadOfState": "Beatrix"
          }
          ...
      }
 ]
240 documents in set (0.00 sec)
</pre><p>
          The method produces results that contain operational
          information in addition to all documents in the collection.
        </p><p>
          An empty set (no matching documents) returns the following
          information:
        </p><pre class="screen">
Empty set (0.00 sec) 
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777646049760"></a>Filter Searches</h5>

</div>

</div>

</div>
<p>
          You can include search conditions with the
          <code class="literal">find()</code> method. The syntax for expressions
          that form a search condition is the same as that of
          traditional <a class="link" href="functions.html" title="Chapter 13 Functions and Operators">MySQL</a>. You must
          enclose all expressions in quotes.
        </p><p>
          All examples in this section use the countryinfo collection in
          the <code class="literal">world_x</code> database. For the sake of
          brevity, some of the examples do not display output.
        </p><p>
          A simple search condition consists of the
          <code class="literal">_id</code> field and unique identifier of a
          document. The following example returns a single document
          matching the identifier string:
        </p><pre class="programlisting">
<strong class="userinput"><code>mysql-py&gt; db.countryinfo.find("_id = 'AUS'")</code></strong>
[
    {
        "GNP": 351182,
        "IndepYear": 1901,
        "Name": "Australia",
        "_id": "AUS",
        "demographics": {
            "LifeExpectancy": 79.80000305175781,
            "Population": 18886000
        },
        "geography": {
            "Continent": "Oceania",
            "Region": "Australia and New Zealand",
            "SurfaceArea": 7741220
        },
        "government": {
            "GovernmentForm": "Constitutional Monarchy, Federation",
            "HeadOfState": "Elisabeth II"
        }
    }
]
1 document in set (0.01 sec)
</pre><p>
          The following example searches for all countries that have a
          GNP higher than $500 billion. The countryinfo collection
          measures GNP in units of million.
        </p><pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>db.countryinfo.find("GNP &gt; 500000")</code></strong>
...[<span class="emphasis"><em>output removed</em></span>]
10 documents in set (0.00 sec)
</pre><p>
          The Population field in the following query is embedded within
          the demographics object. To access the embedded field, use a
          period between demographics and Population to identify the
          relationship. Document and field names are case sensitive.
        </p><pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>db.countryinfo.find("GNP &gt; 500000 and demographics.Population &lt; 100000000")</code></strong>
...[<span class="emphasis"><em>output removed</em></span>]
6 documents in set (0.00 sec)
</pre><p>
          Arithmetic operators in the following expression are used to
          query for countries with a GNP per capita higher than $30000.
          Search conditions can include arithmetic operators and most
          MySQL functions.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
            Seven documents in the countryinfo collection have a
            population value of zero. Warning messages appear at the end
            of the output.
</p>
</div>
<pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>db.countryinfo.find("GNP*1000000/demographics.Population &gt; 30000")</code></strong>
...[<span class="emphasis"><em>output removed</em></span>]
9 documents in set, 7 warnings (0.00 sec)
Warning (Code 1365): Division by 0
Warning (Code 1365): Division by 0
Warning (Code 1365): Division by 0
Warning (Code 1365): Division by 0
Warning (Code 1365): Division by 0
Warning (Code 1365): Division by 0
Warning (Code 1365): Division by 0
</pre><p>
          You can separate a value from the search condition by using
          the <code class="literal">bind()</code> method. For example, instead of
          specifying a hard-coded country name as the condition,
          substitute a named placeholder consisting of a colon followed
          by a name that begins with a letter, such as
          <span class="emphasis"><em>country</em></span>. Then include the placeholder and
          value in the <code class="literal">bind()</code> method as follows:
        </p><pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>db.countryinfo.find("Name = :country").bind("country", "Italy")</code></strong>
[
    {
        "GNP": 1161755,
        "IndepYear": 1861,
        "Name": "Italy",
        "_id": "ITA",
        "demographics": {
            "LifeExpectancy": 79,
            "Population": 57680000
        },
        "geography": {
            "Continent": "Europe",
            "Region": "Southern Europe",
            "SurfaceArea": 301316
        },
        "government": {
            "GovernmentForm": "Republic",
            "HeadOfState": "Carlo Azeglio Ciampi"
        }
    }
]
1 document in set (0.01 sec)
</pre>
<div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Tip
</div>
<p>
            Within a program, binding enables you to specify
            placeholders in your expressions, which are filled in with
            values before execution and can benefit from automatic
            escaping, as appropriate.
          </p><p>
            Always use binding to sanitize input. Avoid introducing
            values in queries using string concatenation, which can
            produce invalid input and, in some cases, can cause security
            issues.
</p>
</div>

</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777646026864"></a>Project Results</h5>

</div>

</div>

</div>
<p>
          You can return specific fields of a document, instead of
          returning all the fields. The following example returns the
          GNP and Name fields of all documents in the countryinfo
          collection matching the search conditions.
        </p><p>
          Use the <code class="literal">fields()</code> method to pass the list of
          fields to return.
        </p><pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>db.countryinfo.find("GNP &gt; 5000000").fields(["GNP", "Name"])</code></strong>
[
    {
        "GNP": 8510700,
        "Name": "United States"
    }
]
1 document in set (0.00 sec)
 </pre><p>
          In addition, you can alter the returned
          documents—adding, renaming, nesting and even computing
          new field values—with an expression that describes the
          document to return.
        </p><p>
          First, use the following statement to import the mysqlx
          module:
        </p><pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>import mysqlx</code></strong>
</pre><p>
          Next, alter the names of the fields with the following
          expression to return only two documents.
        </p><pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>db.countryinfo.find().\
fields(mysqlx.expr('{"Name": upper(Name), "GNPPerCapita": GNP*1000000/demographics.Population}')).\
limit(2)</code></strong>
[
    {
        "GNPPerCapita": 8038.834951456311,
        "Name": "ARUBA"
    },
    {
        "GNPPerCapita": 263.0281690140845,
        "Name": "AFGHANISTAN"
    }
]
2 documents in set (0.00 sec)
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777646017600"></a>Limit, Sort, and Skip Results</h5>

</div>

</div>

</div>
<p>
          You can apply the <code class="literal">limit()</code>,
          <code class="literal">sort()</code>, and <code class="literal">skip()</code>
          methods to manage the number and order of documents returned
          by the <code class="literal">find()</code> method.
        </p><p>
          To specify the number of documents included in a result set,
          append the <code class="literal">limit()</code> method with a value to
          the <code class="literal">find()</code> method. The following query
          returns the first five documents in the countryinfo
          collection.
        </p><pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>db.countryinfo.find().limit(5)</code></strong>
... [<span class="emphasis"><em>output removed</em></span>]
5 documents in set (0.00 sec)
</pre><p>
          To specify an order for the results, append the
          <code class="literal">sort()</code> method to the
          <code class="literal">find()</code> method. Pass to the
          <code class="literal">sort()</code> method a list of one or more fields
          to sort by and, optionally, the descending
          (<code class="literal">desc</code>) or ascending
          (<code class="literal">asc</code>) attribute as appropriate. Ascending
          order is the default order type.
        </p><p>
          For example, the following query sorts all documents by the
          IndepYear field and then returns the first eight documents in
          descending order.
        </p><pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>db.countryinfo.find().sort(["IndepYear desc"]).limit(8)</code></strong>
... [<span class="emphasis"><em>output removed</em></span>]
8 documents in set (0.00 sec)
</pre><p>
          By default, the <code class="literal">limit()</code> method starts from
          the first document in the collection. You can use the
          <code class="literal">skip()</code> method to change the starting
          document. For example, to ignore the first document and return
          the next eight documents matching the condition, pass to the
          <code class="literal">skip()</code> method a value of 1.
        </p><pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>db.countryinfo.find().sort(["IndepYear desc"]).limit(8).skip(1)</code></strong>
... [<span class="emphasis"><em>output removed</em></span>]
8 documents in set (0.00 sec)
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777645997936"></a>Related Information</h5>

</div>

</div>

</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              The <a class="link" href="functions.html" title="Chapter 13 Functions and Operators">MySQL Reference
              Manual</a> provides detailed documentation on functions
              and operators.
            </p></li><li class="listitem"><p>
              See <a class="ulink" href="http://dev.mysql.com/doc/x-devapi-userguide/en/crud-ebnf-collection-crud-functions.html#crud-ebnf-collectionfindfunction" target="_top">CollectionFindFunction</a> for
              the full syntax definition.
</p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-shell-tutorial-python-documents-modify"></a>3.5.4.4 Modify Documents</h4>

</div>

</div>

</div>
<p>
        You can use the <code class="literal">modify()</code> method to update one
        or more documents in a collection. The X DevAPI provides
        additional methods for use with the <code class="literal">modify()</code>
        method to:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Set and unset fields within documents.
          </p></li><li class="listitem"><p>
            Append, insert, and delete arrays.
          </p></li><li class="listitem"><p>
            Bind, limit, and sort the documents to be modified.
</p></li></ul>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777645987120"></a>Set and Unset Fields</h5>

</div>

</div>

</div>
<p>
          The <code class="literal">modify()</code> method works by filtering a
          collection to include only the documents to be modified and
          then applying the operations that you specify to those
          documents.
        </p><p>
          In the following example, the <code class="literal">modify()</code>
          method uses the search condition to identify the document to
          change and then the <code class="literal">set()</code> method replaces
          two values within the nested demographics object.
        </p><pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>db.countryinfo.modify("_id = 'SEA'").\
set("demographics", {"LifeExpectancy": 78, "Population": 28})</code></strong>
Query OK, 1 item affected (0.04 sec)
</pre><p>
          After you modify a document, use the <code class="literal">find()</code>
          method to verify the change.
        </p><p>
          To remove content from a document, use the
          <code class="literal">modify()</code> and <code class="literal">unset()</code>
          methods. For example, the following query removes the GNP from
          a document that matches the search condition.
        </p><pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>db.countryinfo.modify("Name = 'Sealand'").unset("GNP")</code></strong>
Query OK, 1 item affected (0.01 sec)   
</pre><p>
          Use the <code class="literal">find()</code> method to verify the change.
        </p><pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>db.countryinfo.find("Name = 'Sealand'")</code></strong>
[
    {
        "IndepYear": 1967,
        "Name": "Sealand",
        "_id": "SEA",
        "demographics": {
            "LifeExpectancy": 78,
            "Population": 28
        },
        "geography": {
            "Continent": "Europe",
            "Region": "British Islands",
            "SurfaceArea": 193
        },
        "government": {
            "GovernmentForm": "Monarchy",
            "HeadOfState": "Michael Bates"
        }
    }
]
1 document in set (0.00 sec)
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777645973792"></a>Append, Insert, and Delete Arrays</h5>

</div>

</div>

</div>
<p>
          To append an element to an array field, or insert, or delete
          elements in an array, use the
          <code class="literal">array_append()</code>,
          <code class="literal">array_insert()</code>, or
          <code class="literal">array_delete()</code> methods. The following
          examples modify the countryinfo collection to enable tracking
          of international airports.
        </p><p>
          The first example uses the <code class="literal">modify()</code> and
          <code class="literal">set()</code> methods to create a new Airports
          field in all documents.
</p>
<div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Caution
</div>
<p>
            Use care when you modify documents without specifying a
            search condition. This action will modify all documents in
            the collection.
</p>
</div>
<pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>db.countryinfo.modify().set("Airports", [])</code></strong>
Query OK, 240 items affected (0.07 sec)
</pre><p>
          With the Airports field added, the next example uses the
          <code class="literal">array_append()</code> method to add a new airport
          to one of the documents. <span class="emphasis"><em>$.Airports</em></span> in
          the following example represents the Airports field of the
          current document.
        </p><pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>db.countryinfo.modify("Name = 'France'").array_append("$.Airports", "ORY")</code></strong>
Query OK, 1 item affected (0.02 sec)
</pre><p>
          Use <strong class="userinput"><code>db.countryinfo.find("Name =
          'France'")</code></strong> to see the change.
        </p><p>
          To insert an element at a different position in the array, use
          the <code class="literal">array_insert()</code> method to specify which
          index to insert in the path expression. In this case, the
          index is 0, or the first element in the array.
        </p><pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>db.countryinfo.modify("Name = 'France'").array_insert("$.Airports[0]", "CDG")</code></strong>
Query OK, 1 item affected (0.04 sec)
</pre><p>
          To delete an element from the array, you must pass to the
          <code class="literal">array_delete()</code> method the index of the
          element to be deleted.
        </p><pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>db.countryinfo.modify("Name = 'France'").array_delete("$.Airports[1]")</code></strong>
Query OK, 1 item affected (0.03 sec)
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777645955760"></a>Related Information</h5>

</div>

</div>

</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              The <a class="link" href="data-types.html#json-paths" title="Searching and Modifying JSON Values">MySQL Reference
              Manual</a> provides instructions to help you search for
              and modify JSON values.
            </p></li><li class="listitem"><p>
              See <a class="ulink" href="http://dev.mysql.com/doc/x-devapi-userguide/en/crud-ebnf-collection-crud-functions.html#crud-ebnf-collectionmodifyfunction" target="_top">CollectionModifyFunction</a>
              for the full syntax definition.
</p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-shell-tutorial-python-documents-remove"></a>3.5.4.5 Remove Documents</h4>

</div>

</div>

</div>
<p>
        You can use the <code class="literal">remove()</code> method to delete
        some or all documents from a collection in a database. The
        X DevAPI provides additional methods for use with the
        <code class="literal">remove()</code> method to filter and sort the
        documents to be removed.
</p>
<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h5 class="title"><a name="idm139777645947792"></a>Remove Documents Using Conditions</h5>
</div>
</div>
</div>
<p>
          The example that follows passes a search condition to the
          <code class="literal">remove()</code> method. All documents matching the
          condition will be removed from the countryinfo collection. In
          this example, one document matches the condition.
        </p><pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>db.countryinfo.remove("_id = 'SEA'")</code></strong>
Query OK, 1 item affected (0.02 sec)
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777645944176"></a>Remove the First Document</h5>

</div>

</div>

</div>
<p>
          To remove the first document in the countryinfo collection,
          use the <code class="literal">limit()</code> method with a value of 1.
        </p><pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>db.countryinfo.remove().limit(1)</code></strong>
Query OK, 1 item affected (0.03 sec)
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777645940688"></a>Remove the Last Document in an Order</h5>

</div>

</div>

</div>
<p>
          The following example removes the last document in the
          countryinfo collection by country name.
        </p><pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>db.countryinfo.remove().sort(["Name desc"]).limit(1)</code></strong>
Query OK, 1 item affected (0.02 sec)
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777645937952"></a>Remove All Documents in a Collection</h5>

</div>

</div>

</div>
<p>
          You can remove all documents in a collection. To do so, use
          the <code class="literal">remove()</code> method without specifying a
          search condition.
</p>
<div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Caution
</div>
<p>
            Use care when you remove documents without specifying a
            search condition. This action will delete all documents from
            the collection.
</p>
</div>

</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777645934928"></a>Related Information</h5>

</div>

</div>

</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              See <a class="ulink" href="http://dev.mysql.com/doc/x-devapi-userguide/en/crud-ebnf-collection-crud-functions.html#crud-ebnf-collectionremovefunction" target="_top">CollectionRemoveFunction</a>
              for the full syntax definition.
            </p></li><li class="listitem"><p>
              See <a class="xref" href="document-store.html#mysql-shell-tutorial-python-download" title="3.5.2 Import Database Sample">Section 3.5.2, “Import Database Sample”</a>
              for instructions to recreate the
              <code class="literal">world_x</code> database.
</p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-shell-tutorial-python-documents-index"></a>3.5.4.6 Create and Drop Indexes</h4>

</div>

</div>

</div>
<p>
        Indexes are used to find documents with specific field values
        quickly. Without an index, MySQL must begin with the first
        document and then read through the entire collection to find the
        relevant fields. The larger the collection, the more this costs.
        If a collection is large and queries on a specific field are
        common, then consider creating an index on a specific field
        inside a document.
      </p><p>
        For example, the following query will perform better with an
        index:
      </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db.countryinfo.find("demographics.Population &lt; 100")</code></strong>
...[<span class="emphasis"><em>output removed</em></span>]
8 documents in set (0.00 sec)
</pre><p>
        The <code class="literal">create_index()</code> method creates an index
        that you can define as nonunique or unique. Use the
        <code class="literal">field()</code> method to chain the fields that
        should be indexed. The <code class="literal">execute()</code> method is
        required to create or drop an index.
      </p><p>
        In MySQL, the <code class="literal">_id</code> field is equivalent to a
        primary key by default.
</p>
<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h5 class="title"><a name="idm139777645921168"></a>Add a Nonunique Index</h5>
</div>
</div>
</div>
<p>
          To create a nonunique index, pass to the
          <code class="literal">create_index()</code> method an index name.
          Duplicate index names are prohibited.
        </p><p>
          In the following example, the first parameter of the
          <code class="literal">field()</code> method specifies the Population
          field inside the demographics object and the next parameter
          indicates that the field should be indexed as an Integer
          numeric value. The last parameter indicates whether the field
          should require the NOT NULL constraint. If the value is
          <code class="literal">False</code>, the field can contain
          <code class="literal">NULL</code> values.
        </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db.countryinfo.create_index("pop").\
field("demographics.Population", "INTEGER", False).execute()</code></strong>
Query OK (0.04 sec)
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777645914672"></a>Add a Unique Index</h5>

</div>

</div>

</div>
<p>
          To create a unique index, pass to the
          <code class="literal">create_index()</code> method an index name and the
          <code class="literal">mysqlx.IndexType.UNIQUE</code> type. The following
          statement imports the mysqlx module, which is required to
          specify an index type:
        </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>import mysqlx</code></strong>
</pre><p>
          Country <code class="literal">"Name"</code> is another common field in
          the countryinfo collection to index. In the following example,
          <code class="literal">"Text(40)"</code> represents the number of
          characters to index and <code class="literal">True</code> indicates that
          the field cannot contain any <code class="literal">NULL</code> values.
        </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db.countryinfo.create_index("name", mysqlx.IndexType.UNIQUE).\
field("Name", "TEXT(40)", True).execute()</code></strong>
Query OK (0.04 sec)
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777645905536"></a>Drop an Index</h5>

</div>

</div>

</div>
<p>
          To drop an index, pass to the <code class="literal">drop_index()</code>
          method the name of the index to drop. For example, you can
          drop the <span class="quote">“<span class="quote">pop</span>”</span> index as follows:
        </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>db.countryinfo.drop_index("pop").execute()</code></strong>
Query OK (0.58 sec)
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777645901616"></a>Related Information</h5>

</div>

</div>

</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              See
              <a class="ulink" href="http://dev.mysql.com/doc/x-devapi-userguide/en/crud-ebnf-collection-index-management-functions.html" target="_top">Collection Index Management Functions</a>
              for the full syntax definition.

              
</p></li></ul>
</div>

</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-shell-tutorial-python-relational-tables"></a>3.5.5 Relational Tables</h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="document-store.html#mysql-shell-tutorial-python-table-insert">3.5.5.1 Insert Records into Tables</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-tutorial-python-table-select">3.5.5.2 Select Tables</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-tutorial-python-table-update">3.5.5.3 Update Tables</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-tutorial-python-table-delete">3.5.5.4 Delete Tables</a></span></dt></dl>
</div>
<p>
      You can use MySQL Shell to manipulate not just JSON documents,
      but also relational tables.
    </p><p>
      In MySQL, each relational table is associated with a particular
      storage engine. The examples in this section use
      <a class="link" href="innodb-storage-engine.html" title="Chapter 15 The InnoDB Storage Engine"><code class="literal">InnoDB</code></a> tables in the
      <code class="literal">world_x</code> database.
</p>
<h4><a name="idm139777645893520"></a>Confirm the Schema</h4>
<p>
      To show the value that is assigned to the schema variable, type
      <code class="literal">db</code>.
    </p><pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>db</code></strong>
&lt;Schema:world_x&gt;
</pre><p>
      If the schema value is not the <code class="literal">Schema:world_x</code>
      database, then set the <code class="literal">db</code> variable as follows:
    </p><pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>\use world_x</code></strong>
Schema `world_x` accessible through db.
</pre>
<h4><a name="idm139777645887024"></a>Show All Tables</h4>
<p>
      To display all relational tables in the <code class="literal">world_x</code>
      database, use the <code class="literal">get_tables()</code> method on the
      schema object.
    </p><pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>db.get_tables()</code></strong>
{
    "city": &lt;Table:city&gt;,
    "country": &lt;Table:country&gt;,
    "countrylanguage": &lt;Table:countrylanguage&gt;
}
</pre>
<h4><a name="idm139777645882768"></a>Basic Table Operations</h4>
<p>
      Basic operations scoped by tables include:
</p>
<div class="informaltable">
<table class="informaltable" summary="CRUD operations to use interactively on tables within
        MySQL Shell" border="1"><colgroup><col><col></colgroup><thead><tr><th scope="col">Operation form</th><th scope="col">Description</th></tr></thead><tbody><tr><td scope="row"><code class="literal">db.<em class="replaceable"><code>name</code></em>.insert()</code></td><td>The
              <a class="link" href="document-store.html#mysql-shell-tutorial-python-table-insert" title="3.5.5.1 Insert Records into Tables">insert()</a>
              method inserts one or more records into the named table.</td></tr><tr><td scope="row"><code class="literal">db.<em class="replaceable"><code>name</code></em>.select()</code></td><td>The
              <a class="link" href="document-store.html#mysql-shell-tutorial-python-table-select" title="3.5.5.2 Select Tables">select()</a>
              method returns some or all records in the named table.</td></tr><tr><td scope="row"><code class="literal">db.<em class="replaceable"><code>name</code></em>.update()</code></td><td>The
              <a class="link" href="document-store.html#mysql-shell-tutorial-python-table-update" title="3.5.5.3 Update Tables">update()</a>
              method updates records in the named table.</td></tr><tr><td scope="row"><code class="literal">db.<em class="replaceable"><code>name</code></em>.delete()</code></td><td>The
              <a class="link" href="document-store.html#mysql-shell-tutorial-python-table-delete" title="3.5.5.4 Delete Tables">delete()</a>
method deletes one or more records from the named table.</td></tr></tbody></table>
</div>
<h4><a name="idm139777645864352"></a>Related Information</h4>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          See
          <a class="ulink" href="http://dev.mysql.com/doc/x-devapi-userguide/en/devapi-users-working-with-relational-tables.html" target="_top">Working with Relational Tables</a>
          for a general overview.
        </p></li><li class="listitem"><p>
          <a class="ulink" href="http://dev.mysql.com/doc/x-devapi-userguide/en/mysql-x-crud-ebnf-definitions.html" target="_top">CRUD EBNF Definitions</a> provides a
          complete list of operations.
        </p></li><li class="listitem"><p>
          See <a class="xref" href="document-store.html#mysql-shell-tutorial-python-download" title="3.5.2 Import Database Sample">Section 3.5.2, “Import Database Sample”</a> for
          instructions on setting up the <code class="literal">world_x</code>
          database sample.
</p></li></ul>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-shell-tutorial-python-table-insert"></a>3.5.5.1 Insert Records into Tables</h4>

</div>

</div>

</div>
<p>
        You can use the <code class="literal">insert()</code> method with the
        <code class="literal">values()</code> method to insert records into an
        existing relational table. The <code class="literal">insert()</code>
        method accepts individual columns or all columns in the table.
        Use one or more <code class="literal">values()</code> methods to specify
        the values to be inserted.
</p>
<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h5 class="title"><a name="idm139777645853040"></a>Insert a Complete Record</h5>
</div>
</div>
</div>
<p>
          To insert a complete record, pass to the
          <code class="literal">insert()</code> method all columns in the table.
          Then pass to the <code class="literal">values()</code> method one value
          for each column. For example, to add a new record to the city
          table in the <code class="literal">world_x</code> database, insert the
          following record and press <span class="keycap"><strong>Enter</strong></span> twice.
        </p><pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>db.city.insert("ID", "Name", "CountryCode", "District", "Info").\
values(None, "Olympia", "USA", "Washington", '{"Population": 5000}')</code></strong>
Query OK, 1 item affected (0.01 sec)
</pre><p>
          The city table has five columns: ID, Name, CountryCode,
          District, and Info. Each value must match the data type of the
          column it represents.
</p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777645846576"></a>Insert a Partial Record</h5>

</div>

</div>

</div>
<p>
          The following example inserts values into the ID, Name, and
          CountryCode columns of the city table.
        </p><pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>db.city.insert("ID", "Name", "CountryCode").\
values(None, "Little Falls", "USA").values(None, "Happy Valley", "USA")</code></strong>
Query OK, 2 item affected (0.03 sec)
</pre><p>
          When you specify columns using the <code class="literal">insert()</code>
          method, the number of values must match the number of columns.
          In the previous example, you must supply three values to match
          the three columns specified.
</p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777645842448"></a>Related Information</h5>

</div>

</div>

</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              See <a class="ulink" href="http://dev.mysql.com/doc/x-devapi-userguide/en/crud-ebnf-table-crud-functions.html#crud-ebnf-tableinsertfunction" target="_top">TableInsertFunction</a> for
              the full syntax definition.
</p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-shell-tutorial-python-table-select"></a>3.5.5.2 Select Tables</h4>

</div>

</div>

</div>
<p>
        You can use the <code class="literal">select()</code> method to query for
        and return records from a table in a database. The
        X DevAPI provides additional methods to use with the
        <code class="literal">select()</code> method to filter and sort the
        returned records.
      </p><p>
        MySQL provides the following operators to specify search
        conditions: <code class="literal">OR</code> (<code class="literal">||</code>),
        <code class="literal">AND</code> (<code class="literal">&amp;&amp;</code>),
        <code class="literal">XOR</code>, <code class="literal">IS</code>,
        <code class="literal">NOT</code>, <code class="literal">BETWEEN</code>,
        <code class="literal">IN</code>, <code class="literal">LIKE</code>,
        <code class="literal">!=</code>, <code class="literal">&lt;&gt;</code>,
        <code class="literal">&gt;</code>, <code class="literal">&gt;=</code>,
        <code class="literal">&lt;</code>, <code class="literal">&lt;=</code>,
        <code class="literal">&amp;</code>, <code class="literal">|</code>,
        <code class="literal">&lt;&lt;</code>, <code class="literal">&gt;&gt;</code>,
        <code class="literal">+</code>, <code class="literal">-</code>,
        <code class="literal">*</code>, <code class="literal">/</code>,
        <code class="literal">~</code>, and <code class="literal">%</code>.
</p>
<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h5 class="title"><a name="idm139777645817856"></a>Select All Records</h5>
</div>
</div>
</div>
<p>
          To issue a query that returns all records from an existing
          table, use the <code class="literal">select()</code> method without
          specifying search conditions. The following example selects
          all records from the city table in the
          <code class="literal">world_x</code> database.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
            Limit the use of the empty <code class="literal">select()</code>
            method to interactive statements. Always use explicit
            column-name selections in your application code.
</p>
</div>
<pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>db.city.select()</code></strong>
+------+------------+-------------+------------+-------------------------+
| ID   | Name       | CountryCode | District   | Info                    |
+------+------------+-------------+------------+-------------------------+
|    1 | Kabul      | AFG         | Kabol      |{"Population": 1780000}  |
|    2 | Qandahar   | AFG         | Qandahar   |{"Population": 237500}   |
|    3 | Herat      | AFG         | Herat      |{"Population": 186800}   |
...    ...          ...           ...          ...
| 4079 | Rafah      | PSE         | Rafah      |{"Population": 92020}    |
+------+------- ----+-------------+------------+-------------------------+
4082 rows in set (0.01 sec)
</pre><p>
          An empty set (no matching records) returns the following
          information:
        </p><pre class="screen">
Empty set (0.00 sec)
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777645810112"></a>Filter Searches</h5>

</div>

</div>

</div>
<p>
          To issue a query that returns a set of table columns, use the
          <code class="literal">select()</code> method and specify the columns to
          return between square brackets. This query returns the Name
          and CountryCode columns from the city table.
        </p><pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>db.city.select(["Name", "CountryCode"])</code></strong>
+-------------------+-------------+
| Name              | CountryCode |
+-------------------+-------------+
| Kabul             | AFG         |
| Qandahar          | AFG         |
| Herat             | AFG         |
| Mazar-e-Sharif    | AFG         |
| Amsterdam         | NLD         |
...                 ...
| Rafah             | PSE         |
| Olympia           | USA         |
| Little Falls      | USA         |
| Happy Valley      | USA         |
+-------------------+-------------+
4082 rows in set (0.00 sec)
</pre><p>
          To issue a query that returns rows matching specific search
          conditions, use the <code class="literal">where()</code> method to
          include those conditions. For example, the following example
          returns the names and country codes of the cities that start
          with the letter Z.
        </p><pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>db.city.select(["Name", "CountryCode"]).where("Name like 'Z%'")</code></strong>
+-------------------+-------------+
| Name              | CountryCode |
+-------------------+-------------+
| Zaanstad          | NLD         |
| Zoetermeer        | NLD         |
| Zwolle            | NLD         |
| Zenica            | BIH         |
| Zagazig           | EGY         |
| Zaragoza          | ESP         |
| Zamboanga         | PHL         |
| Zahedan           | IRN         |
| Zanjan            | IRN         |
| Zabol             | IRN         |
| Zama              | JPN         |
| Zhezqazghan       | KAZ         |
| Zhengzhou         | CHN         |
...                 ...
| Zeleznogorsk      | RUS         |
+-------------------+-------------+
59 rows in set (0.00 sec)
</pre><p>
          You can separate a value from the search condition by using
          the <code class="literal">bind()</code> method. For example, instead of
          using "Name = 'Z%' " as the condition, substitute a named
          placeholder consisting of a colon followed by a name that
          begins with a letter, such as <span class="emphasis"><em>name</em></span>. Then
          include the placeholder and value in the
          <code class="literal">bind()</code> method as follows:
        </p><pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>db.city.select(["Name", "CountryCode"]).\
              where("Name like :name").bind("name", "Z%")</code></strong>
</pre>
<div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Tip
</div>
<p>
            Within a program, binding enables you to specify
            placeholders in your expressions, which are filled in with
            values before execution and can benefit from automatic
            escaping, as appropriate.
          </p><p>
            Always use binding to sanitize input. Avoid introducing
            values in queries using string concatenation, which can
            produce invalid input and, in some cases, can cause security
            issues.
</p>
</div>

</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777645796032"></a>Project Results</h5>

</div>

</div>

</div>
<p>
          To issue a query using the <a class="link" href="functions.html#operator_and"><code class="literal">AND</code></a>
          operator, add the operator between search conditions in the
          <code class="literal">where()</code> method.
        </p><pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>db.city.select(["Name", "CountryCode"]).\
               where("Name like 'Z%' and CountryCode = 'CHN'")</code></strong>
+----------------+-------------+
| Name           | CountryCode |
+----------------+-------------+
| Zhengzhou      | CHN         |
| Zibo           | CHN         |
| Zhangjiakou    | CHN         |
| Zhuzhou        | CHN         |
| Zhangjiang     | CHN         |
| Zigong         | CHN         |
| Zaozhuang      | CHN         |
...              ...
| Zhangjiagang   | CHN         |
+----------------+-------------+
22 rows in set (0.01 sec)
</pre><p>
          To specify multiple conditional operators, you can enclose the
          search conditions in parenthesis to change the operator
          precedence. The following example demonstrates the placement
          of <a class="link" href="functions.html#operator_and"><code class="literal">AND</code></a> and
          <a class="link" href="functions.html#operator_or"><code class="literal">OR</code></a> operators.
        </p><pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>db.city.select(["Name", "CountryCode"]).\
where("Name like 'Z%' and (CountryCode = 'CHN' or CountryCode = 'RUS')")</code></strong>
+-------------------+-------------+
| Name              | CountryCode |
+-------------------+-------------+
| Zhengzhou         | CHN         |
| Zibo              | CHN         |
| Zhangjiakou       | CHN         |
| Zhuzhou           | CHN         |
...                 ...
| Zeleznogorsk      | RUS         |
+-------------------+-------------+
29 rows in set (0.01 sec)
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777645786000"></a>Limit, Order, and Offset Results</h5>

</div>

</div>

</div>
<p>
          You can apply the <code class="literal">limit()</code>,
          <code class="literal">order_by()</code>, and <code class="literal">offset()</code>
          methods to manage the number and order of records returned by
          the <code class="literal">select()</code> method.
        </p><p>
          To specify the number of records included in a result set,
          append the <code class="literal">limit()</code> method with a value to
          the <code class="literal">select()</code> method. For example, the
          following query returns the first five records in the country
          table.
        </p><pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>db.country.select(["Code", "Name"]).limit(5)</code></strong>
+------+-------------+
| Code | Name        |
+------+-------------+
| ABW  | Aruba       |
| AFG  | Afghanistan |
| AGO  | Angola      |
| AIA  | Anguilla    |
| ALB  | Albania     |
+------+-------------+
5 rows in set (0.00 sec)
</pre><p>
          To specify an order for the results, append the
          <code class="literal">order_by()</code> method to the
          <code class="literal">select()</code> method. Pass to the
          <code class="literal">order_by()</code> method a list of one or more
          columns to sort by and, optionally, the descending
          (<code class="literal">desc</code>) or ascending
          (<code class="literal">asc</code>) attribute as appropriate. Ascending
          order is the default order type.
        </p><p>
          For example, the following query sorts all records by the Name
          column and then returns the first three records in descending
          order .
        </p><pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>db.country.select(["Code", "Name"]).order_by(["Name desc"]).limit(3)</code></strong>
+------+------------+
| Code | Name       |
+------+------------+
| ZWE  | Zimbabwe   |
| ZMB  | Zambia     |
| YUG  | Yugoslavia |
+------+------------+
3 rows in set (0.00 sec)
</pre><p>
          By default, the <code class="literal">limit()</code> method starts from
          the first record in the table. You can use the
          <code class="literal">offset()</code> method to change the starting
          record. For example, to ignore the first record and return the
          next three records matching the condition, pass to the
          <code class="literal">offset()</code> method a value of 1.
        </p><pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>db.country.select(["Code", "Name"]).order_by(["Name desc"]).limit(3).offset(1)</code></strong>
+------+------------+
| Code | Name       |
+------+------------+
| ZMB  | Zambia     |
| YUG  | Yugoslavia |
| YEM  | Yemen      |
+------+------------+
3 rows in set (0.00 sec)
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777645767184"></a>Related Information</h5>

</div>

</div>

</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              The <a class="link" href="functions.html" title="Chapter 13 Functions and Operators">MySQL Reference
              Manual</a> provides detailed documentation on functions
              and operators.
            </p></li><li class="listitem"><p>
              See <a class="ulink" href="http://dev.mysql.com/doc/x-devapi-userguide/en/crud-ebnf-table-crud-functions.html#crud-ebnf-tableselectfunction" target="_top">TableSelectFunction</a> for
              the full syntax definition.
</p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-shell-tutorial-python-table-update"></a>3.5.5.3 Update Tables</h4>

</div>

</div>

</div>
<p>
        You can use the <code class="literal">update()</code> method to modify one
        or more records in a table. The <code class="literal">update()</code>
        method works by filtering a query to include only the records to
        be updated and then applying the operations you specify to those
        records.
      </p><p>
        To replace a city name in the city table, pass to the
        <code class="literal">set()</code> method the new city name. Then, pass to
        the <code class="literal">where()</code> method the city name to locate
        and replace. The following example replaces the city Peking with
        Beijing.
      </p><pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>db.city.update().set("Name", "Beijing").where("Name = 'Peking'")</code></strong>
Query OK, 1 item affected (0.04 sec)
</pre><p>
        Use the <code class="literal">select()</code> method to verify the change.
      </p><pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>db.city.select(["ID", "Name", "CountryCode", "District", "Info"]).where("Name = 'Beijing'")</code></strong>
+------+-----------+-------------+----------+-----------------------------+
| ID   | Name      | CountryCode | District | Info                        |
+------+-----------+-------------+----------+-----------------------------+
| 1891 | Beijing   | CHN         | Peking   | {"Population": 7472000}     |
+------+-----------+-------------+----------+-----------------------------+
1 row in set (0.00 sec)
</pre>
<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h5 class="title"><a name="idm139777645752704"></a>Related Information</h5>
</div>
</div>
</div>

<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              See <a class="ulink" href="http://dev.mysql.com/doc/x-devapi-userguide/en/crud-ebnf-table-crud-functions.html#crud-ebnf-tableupdatefunction" target="_top">TableUpdateFunction</a> for
              the full syntax definition.
</p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-shell-tutorial-python-table-delete"></a>3.5.5.4 Delete Tables</h4>

</div>

</div>

</div>
<p>
        You can use the <code class="literal">delete()</code> method to remove
        some or all records from a table in a database. The
        X DevAPI provides additional methods to use with the
        <code class="literal">delete()</code> method to filter and order the
        records to be deleted.
</p>
<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h5 class="title"><a name="idm139777645746448"></a>Delete Records Using Conditions</h5>
</div>
</div>
</div>
<p>
          The example that follows passes search conditions to the
          <code class="literal">delete()</code> method. All records matching the
          condition will be deleted from the city table. In this
          example, one record matches the condition.
        </p><pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>db.city.delete().where("Name = 'Olympia'")</code></strong>
Query OK, 1 item affected (0.01 sec)
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777645742896"></a>Delete the First Record</h5>

</div>

</div>

</div>
<p>
          To delete the first record in the city table, use the
          <code class="literal">limit()</code> method with a value of 1.
        </p><pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>db.city.delete().limit(1)</code></strong>
Query OK, 1 item affected (0.02 sec)
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777645739440"></a>Delete All Records in a Table</h5>

</div>

</div>

</div>
<p>
          You can delete all records in a table. To do so, use the
          <code class="literal">delete()</code> method without specifying a search
          condition.
</p>
<div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Caution
</div>
<p>
            Use care when you delete records without specifying a search
            condition. This action will delete all records from the
            table.
</p>
</div>

</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777645736416"></a>Related Information</h5>

</div>

</div>

</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              See <a class="ulink" href="http://dev.mysql.com/doc/x-devapi-userguide/en/crud-ebnf-table-crud-functions.html#crud-ebnf-tabledeletefunction" target="_top">TableDeleteFunction</a> for
              the full syntax definition.
            </p></li><li class="listitem"><p>
              See <a class="xref" href="document-store.html#mysql-shell-tutorial-python-download" title="3.5.2 Import Database Sample">Section 3.5.2, “Import Database Sample”</a>
              for instructions to recreate the
              <code class="literal">world_x</code> database.
</p></li></ul>
</div>

</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-shell-tutorial-python-documents-in-tables"></a>3.5.6 Documents in Tables</h3>

</div>

</div>

</div>
<p>
      In MySQL, a table may contain traditional relational data, JSON
      values, or both. You can combine traditional data with JSON
      documents by storing the documents in columns having a native
      <a class="link" href="data-types.html#json" title="12.6 The JSON Data Type"><code class="literal">JSON</code></a> data type.
    </p><p>
      Examples in this section use the city table in the
      <code class="literal">world_x</code> database.
</p>
<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h4 class="title"><a name="idm139777645726800"></a>city Table Description</h4>
</div>
</div>
</div>
<p>
        The city table has five columns (or fields).
      </p><pre class="screen">
+---------------+------------+-------+-------+---------+------------------+
| Field         | Type       | Null  | Key   | Default | Extra            |
+---------------+------------+-------+-------+---------+------------------+
| ID            | int(11)    | NO    | PRI   | null    | auto_increment   |
| Name          | char(35)   | NO    |       |         |                  |
| CountryCode   | char(3)    | NO    |       |         |                  |
| District      | char(20)   | NO    |       |         |                  |
| Info          | json       | YES   |       | null    |                  |
+---------------+------------+-------+-------+---------+------------------+
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="idm139777645724176"></a>Insert a Record</h4>

</div>

</div>

</div>
<p>
        To insert a document into the column of a table, pass to the
        <code class="literal">values()</code> method a well-formed JSON document
        in the correct order. In the following example, a document is
        passed as the final value to be inserted into the Info column.
      </p><pre class="programlisting"> mysql-py&gt; <strong class="userinput"><code>db.city.insert().\
values(None, "San Francisco", "USA", "California", '{"Population":830000}')</code></strong>
Query OK, 1 item affected (0.01 sec)
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="idm139777645720512"></a>Select a Record</h4>

</div>

</div>

</div>
<p>
        You can issue a query with a search condition that evaluates
        document values in the expression.
      </p><pre class="programlisting">
mysql-py&gt; <strong class="userinput"><code>db.city.select(["ID", "Name", "CountryCode", "District", "Info"]).\
  where("CountryCode = :country and Info-&gt;'$.Population' &gt; 1000000").\
  bind('country', 'USA')</code></strong>
+------+----------------+-------------+----------------+-----------------------------+
| ID   | Name           | CountryCode | District       | Info                        |
+------+----------------+-------------+----------------+-----------------------------+
| 3793 | New York       | USA         | New York       | {"Population": 8008278}     |
| 3794 | Los Angeles    | USA         | California     | {"Population": 3694820}     |
| 3795 | Chicago        | USA         | Illinois       | {"Population": 2896016}     |
| 3796 | Houston        | USA         | Texas          | {"Population": 1953631}     |
| 3797 | Philadelphia   | USA         | Pennsylvania   | {"Population": 1517550}     |
| 3798 | Phoenix        | USA         | Arizona        | {"Population": 1321045}     |
| 3799 | San Diego      | USA         | California     | {"Population": 1223400}     |
| 3800 | Dallas         | USA         | Texas          | {"Population": 1188580}     |
| 3801 | San Antonio    | USA         | Texas          | {"Population": 1144646}     |
+------+----------------+-------------+----------------+-----------------------------+
9 rows in set (0.01 sec)
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="idm139777645716448"></a>Related Information</h4>

</div>

</div>

</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            See
            <a class="ulink" href="http://dev.mysql.com/doc/x-devapi-userguide/en/devapi-users-working-with-relational-tables-and-documents.html" target="_top">Working with Relational Tables and Documents</a>
            for a general overview.
          </p></li><li class="listitem"><p>
            See <a class="xref" href="data-types.html#json" title="12.6 The JSON Data Type">Section 12.6, “The JSON Data Type”</a> for a detailed description of the
            data type.
</p></li></ul>
</div>

</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="mysql-shell-visual-studio"></a>3.6 Quick-Start Guide: MySQL for Visual Studio</h2>

</div>

</div>

</div>
<p>
    This section explains how to use MySQL Shell to script a server
    using MySQL for Visual Studio.
</p>
<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h3 class="title"><a name="mysql-shell-visual-studio-introduction"></a>Introduction</h3>
</div>
</div>
</div>
<p>
      MySQL for Visual Studio provides access to MySQL objects and data without forcing
      developers to leave Visual Studio. Designed and developed as a
      Visual Studio package, MySQL for Visual Studio integrates directly into Server
      Explorer providing a seamless experience for setting up new
      connections and working with database objects.
    </p><p>
      The following MySQL for Visual Studio features are available as of version 2.0.2:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          JavaScript and Python code editors, where scripts in those
          languages can be executed to query data from a MySQL database.
        </p></li><li class="listitem"><p>
          Better integration with the Server Explorer to open MySQL,
          JavaScript, and Python code editors directly from a connected
          MySQL instance.
        </p></li><li class="listitem"><p>
          A newer user interface for displaying query results, where
          different views are presented from result sets returned by a
          MySQL Server like:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              Multiple tabs for each result set returned by an executed
              query.
            </p></li><li class="listitem"><p>
              Results view, where the information can be seen in grid,
              tree, or text representation for JSON results.
            </p></li><li class="listitem"><p>
              Field types view, where information about the columns of a
              result set is shown, such as names, data types, character
              sets, and more.
            </p></li><li class="listitem"><p>
              Query statistics view, displaying information about the
              executed query such as execution times, processed rows,
              index and temporary tables usage, and more.
            </p></li><li class="listitem"><p>
              Execution plan view, displaying an explanation of the
              query execution done internally by the MySQL Server.
</p></li></ul>
</div>
</li></ul>
</div>

</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h3 class="title"><a name="mysql-shell-visual-studio-getting-started"></a>Getting Started</h3>

</div>

</div>

</div>
<p>
      The requirements are MySQL for Visual Studio 2.0.2 or higher, and Visual Studio
      2010 or higher. X DevAPI support requires MySQL Server 5.7.12 or
      higher with the X plugin enabled.
</p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h3 class="title"><a name="mysql-shell-visual-studio-code-editor-open"></a>Opening a Code Editor</h3>

</div>

</div>

</div>
<p>
      Before opening a code editor that can execute queries against a
      MySQL server, a connection needs to be established:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
          Open the Server Explorer pane through the View menu, or with
          <span class="keycap"><strong>Control</strong></span> + <span class="keycap"><strong>W</strong></span>,
          <span class="keycap"><strong>K</strong></span>.
        </p></li><li class="listitem"><p>
          Right-click on the Data Connections node, select <span class="guilabel">Add
          Connection...</span>.
        </p></li><li class="listitem"><p>
          In the <span class="guilabel">Add Connection</span> dialog, make sure
          the MySQL Data Provider is being used and fill in all the
          information.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
            To enter the port number, click
            <span class="guibutton">Advanced...</span> and set the Port among
            the list of connection properties.
</p>
</div>
</li><li class="listitem"><p>
          Click <span class="guibutton">Test Connection</span> to ensure you
          have a valid connection, then click <span class="guibutton">OK</span>.
        </p></li><li class="listitem"><p>
          Right-click your newly created connection, select <span class="guimenu">New
          MySQL Script</span> and then the language for the code
          editor you want to open.
</p></li></ol>
</div>
<p>
      For existing MySQL connections, to create a new editor you need
      only to do the last step.
</p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h3 class="title"><a name="mysql-shell-visual-studio-code-editor-using"></a>Using the Code Editor</h3>

</div>

</div>

</div>
<p>
      The MySQL script editors have a toolbar at the top where
      information about the session is displayed, along with the actions
      that can be executed.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
        Note the first two buttons in the toolbar represent a way to
        connect or disconnect from a MySQL server. If the editor was
        opened from the Server Explorer, the connection will be already
        established for the new editor window.
</p>
</div>
<p>
      The third button is the <span class="guibutton">Run</span> button, the
      script contained in the editor window is executed by clicking it
      and results from the script execution are displayed below the
      script window.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
        Some commands in the MySQL Shell can be executed without
        appending <span class="command"><strong>execute()</strong></span> while in interactive
        mode. In MySQL for Visual Studio, these commands do require
        <span class="command"><strong>execute()</strong></span>. In other words, append
        ".execute()" to execute commands.
</p>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="x-plugin"></a>3.7 X Plugin</h2>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="document-store.html#x-plugin-ssl-connections">3.7.1 Using Secure Connections with X Plugin</a></span></dt><dt><span class="section"><a href="document-store.html#x-plugin-options-variables">3.7.2 X Plugin Options and Variables</a></span></dt><dt><span class="section"><a href="document-store.html#x-plugin-system-monitoring">3.7.3 Monitoring X Plugin</a></span></dt></dl>
</div>
<p>
    X Plugin extends MySQL Server to be able to function as a
    document store. Running X Plugin enables MySQL Server to
    communicate with clients using the X Protocol, which is
    designed to expose the ACID compliant storage abilities of MySQL as
    a document store. Documents are stored in JSON format and enable
    schema-less storage. Using the X DevAPI you can use a
    NoSQL-like syntax to execute Create, Read, Update, Delete (CRUD)
    operations against these documents.
  </p><p>
    This section explains how to configure and monitor the
    X Plugin in MySQL Server.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="x-plugin-ssl-connections"></a>3.7.1 Using Secure Connections with X Plugin</h3>
</div>
</div>
</div>
<p>
      This section explains how to configure X Plugin to use
      secure connections. For more background information, see
      <a class="xref" href="security.html#secure-connections" title="7.4 Using Secure Connections">Section 7.4, “Using Secure Connections”</a>.
    </p><p>
      X Plugin has is own SSL settings which can differ from those
      used with MySQL Server. This means that X Plugin can be
      configured with a different SSL key, certificate, and certificate
      authorities file than MySQL Server. Similarly, X Plugin has
      its own SSL status variables calculated independently from the
      MySQL Server SSL related variables. By default the X Plugin
      SSL configuration is taken from the
      <code class="literal">mysqlx_ssl_*</code> variables, described at
      <a class="xref" href="document-store.html#x-plugin-system-variables-options" title="3.7.2.2 X Plugin System Variables and Options">Section 3.7.2.2, “X Plugin System Variables and Options”</a>. If no
      configuration is provided using the
      <code class="literal">mysqlx_ssl_*</code> variables, X Plugin falls
      back to using the MySQL Server SSL system variables. This means
      you can choose to either have separate SSL configurations for
      MySQL Protocol and X Protocol connections by configuring
      each separately, or share the SSL configuration between MySQL
      Protocol and X Protocol connections by only configuring the
      <code class="literal">ssl-*</code> variables.
    </p><p>
      On a server with X Plugin installed, to configure MySQL
      Protocol and X Protocol connections with separate SSL
      configurations use both the <code class="literal">ssl-*</code> and
      <code class="literal">mysqlx-ssl-*</code> variables in
      <code class="filename">my.cnf</code>:
    </p><pre class="programlisting">
[mysqld]
ssl-ca=ca1.pem
ssl-cert=server-cert1.pem
ssl-key=server-key1.pem

mysqlx-ssl-ca=ca2.pem
mysqlx-ssl-cert=server-cert2.pem
mysqlx-ssl-key=server-key2.pem
</pre><p>
      The available <code class="literal">mysqlx_ssl_*</code> variables mirror the
      SSL variables in MySQL Server, so the files and techniques
      described for configuring MySQL Server to use SSL at
      <a class="xref" href="security.html#using-secure-connections" title="7.4.4 Configuring MySQL to Use Secure Connections">Section 7.4.4, “Configuring MySQL to Use Secure Connections”</a> are relevant to
      configuring X Plugin to use secure connections. An exception
      to this rule is the <code class="literal">mysqlx_ssl</code> variable, which
      defaults to <code class="literal">1</code> whenever any of the other
      X Protocol SSL related variables is configured. In other
      words, if you configure any of the <code class="literal">mysqlx_ssl_*</code>
      variables there is no need to configure
      <code class="literal">mysqlx_ssl</code>.
    </p><p>
      You can configure the TLS versions used by X Protocol SSL
      connections using the <a class="link" href="server-administration.html#sysvar_tls_version"><code class="literal">tls_version</code></a>
      system variable. The TLS version used by MySQL Protocol and
      X Protocol connections is therefore the same TLS version.
    </p><p>
      Encryption per connection is optional, but a specific user can be
      forced to use encryption for X Protocol and MySQL Protocol
      connections. You configure such a user by issuing a
      <a class="link" href="sql-syntax.html#grant" title="14.7.1.4 GRANT Syntax"><code class="literal">GRANT</code></a> statement with the
      <code class="literal">REQUIRE</code> option. For more details see
      <a class="xref" href="sql-syntax.html#grant" title="14.7.1.4 GRANT Syntax">Section 14.7.1.4, “GRANT Syntax”</a>. Alternatively all X Protocol and
      MySQL Protocol connections can be forced to use encryption by
      setting <a class="link" href="server-administration.html#sysvar_require_secure_transport"><code class="literal">require_secure_transport</code></a>.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="x-plugin-options-variables"></a>3.7.2 X Plugin Options and Variables</h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="document-store.html#x-plugin-option-variable-reference">3.7.2.1 X Plugin Option and Variable Reference</a></span></dt><dt><span class="section"><a href="document-store.html#x-plugin-system-variables-options">3.7.2.2 X Plugin System Variables and Options</a></span></dt></dl>
</div>
<p>
      This section describes the available command-line options and
      system variables which configure MySQL Shell.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="x-plugin-option-variable-reference"></a>3.7.2.1 X Plugin Option and Variable Reference</h4>
</div>
</div>
</div>
<p>
        This table provides an overview of the command-line options, and
        system and status variables provided by X Plugin.
</p>
<div class="table">
<a name="idm139777645645952"></a><p class="title"><b>Table 3.1 X Plugin Option and Variable
Reference</b></p>
<div class="table-contents">
<table class="table" summary="X Plugin Option and Variable
Reference" border="1"><colgroup><col class="name"><col class="cmd-line"><col class="option_file"><col class="system_var"><col class="status_var"><col class="var_scope"><col class="dynamic"></colgroup><thead><tr><th scope="col">Name</th><th scope="col">Cmd-Line</th><th scope="col">Option File</th><th scope="col">System Var</th><th scope="col">Status Var</th><th scope="col">Var Scope</th><th scope="col">Dynamic</th></tr></thead><tbody><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_bytes_received">Mysqlx_bytes_received</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Both</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_bytes_sent">Mysqlx_bytes_sent</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Both</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#option_mysqld_mysqlx_connect_timeout">mysqlx_connect_timeout</a></td><td>Yes</td><td>Yes</td><td>Yes</td><td> </td><td>Global</td><td>Yes</td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_connection_accept_errors">Mysqlx_connection_accept_errors</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Both</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_connection_errors">Mysqlx_connection_errors</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Both</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_connections_accepted">Mysqlx_connections_accepted</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Global</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_connections_closed">Mysqlx_connections_closed</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Global</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_connections_rejected">Mysqlx_connections_rejected</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Global</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_crud_delete">Mysqlx_crud_delete</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Both</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_crud_find">Mysqlx_crud_find</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Both</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_crud_insert">Mysqlx_crud_insert</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Both</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_crud_update">Mysqlx_crud_update</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Both</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_errors_sent">Mysqlx_errors_sent</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Both</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_expect_close">Mysqlx_expect_close</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Both</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_expect_open">Mysqlx_expect_open</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Both</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#option_mysqld_mysqlx_idle_worker_thread_timeout">mysqlx_idle_worker_thread_timeout</a></td><td>Yes</td><td>Yes</td><td> </td><td> </td><td> </td><td> </td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_init_error">Mysqlx_init_error</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Both</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#option_mysqld_mysqlx_max_allowed_packet">mysqlx_max_allowed_packet</a></td><td>Yes</td><td>Yes</td><td> </td><td> </td><td> </td><td> </td></tr><tr><td scope="row"><a class="link" href="document-store.html#option_mysqld_mysqlx_max_connections">mysqlx_max_connections</a></td><td>Yes</td><td>Yes</td><td>Yes</td><td> </td><td>Global</td><td>Yes</td></tr><tr><td scope="row"><a class="link" href="document-store.html#option_mysqld_mysqlx_min_worker_threads">mysqlx_min_worker_threads</a></td><td>Yes</td><td>Yes</td><td> </td><td> </td><td> </td><td> </td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_notice_other_sent">Mysqlx_notice_other_sent</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Both</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_notice_warning_sent">Mysqlx_notice_warning_sent</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Both</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#option_mysqld_mysqlx_port">mysqlx_port</a></td><td>Yes</td><td>Yes</td><td>Yes</td><td> </td><td>Global</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_rows_sent">Mysqlx_rows_sent</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Both</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_sessions">Mysqlx_sessions</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Global</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_sessions_accepted">Mysqlx_sessions_accepted</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Global</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_sessions_closed">Mysqlx_sessions_closed</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Global</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_sessions_fatal_error">Mysqlx_sessions_fatal_error</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Global</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_sessions_killed">Mysqlx_sessions_killed</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Global</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_sessions_rejected">Mysqlx_sessions_rejected</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Global</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#option_mysqld_mysqlx_ssl">mysqlx_ssl</a></td><td>Yes</td><td>Yes</td><td>Yes</td><td> </td><td>Global</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_ssl_accept_renegotiates">Mysqlx_ssl_accept_renegotiates</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Global</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_ssl_accepts">Mysqlx_ssl_accepts</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Global</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_ssl_active">Mysqlx_ssl_active</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Both</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#option_mysqld_mysqlx_ssl_ca">mysqlx_ssl_ca</a></td><td>Yes</td><td>Yes</td><td>Yes</td><td> </td><td>Global</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#option_mysqld_mysqlx_ssl_capath">mysqlx_ssl_capath</a></td><td>Yes</td><td>Yes</td><td>Yes</td><td> </td><td>Global</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#option_mysqld_mysqlx_ssl_cert">mysqlx_ssl_cert</a></td><td>Yes</td><td>Yes</td><td>Yes</td><td> </td><td>Global</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_ssl_cipher">Mysqlx_ssl_cipher</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Both</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#option_mysqld_mysqlx_ssl_cipher">mysqlx_ssl_cipher</a></td><td>Yes</td><td>Yes</td><td> </td><td> </td><td> </td><td> </td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_ssl_cipher_list">Mysqlx_ssl_cipher_list</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Both</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#option_mysqld_mysqlx_ssl_crl">mysqlx_ssl_crl</a></td><td>Yes</td><td>Yes</td><td>Yes</td><td> </td><td>Global</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#option_mysqld_mysqlx_ssl_crlpath">mysqlx_ssl_crlpath</a></td><td>Yes</td><td>Yes</td><td>Yes</td><td> </td><td>Global</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_ssl_ctx_verify_depth">Mysqlx_ssl_ctx_verify_depth</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Both</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_ssl_ctx_verify_mode">Mysqlx_ssl_ctx_verify_mode</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Both</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_ssl_finished_accepts">Mysqlx_ssl_finished_accepts</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Global</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#option_mysqld_mysqlx_ssl_key">mysqlx_ssl_key</a></td><td>Yes</td><td>Yes</td><td>Yes</td><td> </td><td>Global</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_ssl_server_not_after">Mysqlx_ssl_server_not_after</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Global</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_ssl_server_not_before">Mysqlx_ssl_server_not_before</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Global</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_ssl_verify_depth">Mysqlx_ssl_verify_depth</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Global</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_ssl_verify_mode">Mysqlx_ssl_verify_mode</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Global</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_ssl_version">Mysqlx_ssl_version</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Both</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_stmt_create_collection">Mysqlx_stmt_create_collection</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Both</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_stmt_create_collection_index">Mysqlx_stmt_create_collection_index</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Both</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_stmt_disable_notices">Mysqlx_stmt_disable_notices</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Both</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_stmt_drop_collection">Mysqlx_stmt_drop_collection</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Both</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_stmt_drop_collection_index">Mysqlx_stmt_drop_collection_index</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Both</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_stmt_enable_notices">Mysqlx_stmt_enable_notices</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Both</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_stmt_execute_sql">Mysqlx_stmt_execute_sql</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Both</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_stmt_execute_xplugin">Mysqlx_stmt_execute_xplugin</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Both</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_stmt_kill_client">Mysqlx_stmt_kill_client</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Both</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_stmt_list_clients">Mysqlx_stmt_list_clients</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Both</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_stmt_list_notices">Mysqlx_stmt_list_notices</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Both</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_stmt_list_objects">Mysqlx_stmt_list_objects</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Both</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_stmt_ping">Mysqlx_stmt_ping</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Both</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_worker_threads">Mysqlx_worker_threads</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Global</td><td>No</td></tr><tr><td scope="row"><a class="link" href="document-store.html#statvar_Mysqlx_worker_threads_active">Mysqlx_worker_threads_active</a></td><td> </td><td> </td><td> </td><td>Yes</td><td>Global</td><td>No</td></tr></tbody></table>
</div>

</div>
<br class="table-break">
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="x-plugin-system-variables-options"></a>3.7.2.2 X Plugin System Variables and Options</h4>

</div>

</div>

</div>
<p>
        The following system variables configure X Plugin:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_mysqld_mysqlx_port"></a>
            <a class="indexterm" name="idm139777645422112"></a>

            <a class="indexterm" name="idm139777645421040"></a>

            <a class="link" href="document-store.html#option_mysqld_mysqlx_port"><code class="option">--mysqlx_port[=<em class="replaceable"><code>value</code></em>]</code></a>
</p>
<div class="informaltable">
<table class="informaltable" summary="Options for mysqlx_port" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--mysqlx_port=#</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal">mysqlx_port</code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">No</td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2">integer</td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">33060</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">1</code></td></tr><tr><td scope="row"><span class="bold"><strong>Max Value</strong></span></td><td colspan="2"><code class="literal">65535</code></td></tr></tbody></table>
</div>
<p>
            Specifies the port where the X Plugin listens for
            connections. This option is only read at start up, therefore
            to change it on a running server requires a restart.

            
          </p></li><li class="listitem"><p><a name="option_mysqld_mysqlx_connect_timeout"></a>
            <a class="indexterm" name="idm139777645392976"></a>

            <a class="indexterm" name="idm139777645391936"></a>

            <a class="link" href="document-store.html#option_mysqld_mysqlx_connect_timeout"><code class="option">--mysqlx_connect_timeout[=<em class="replaceable"><code>value</code></em>]</code></a>
</p>
<div class="informaltable">
<table class="informaltable" summary="Options for mysqlx_connect_timeout" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--mysqlx_connect_timeout=#</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal">mysqlx_connect_timeout</code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">Yes</td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2">integer</td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">30</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">1</code></td></tr><tr><td scope="row"><span class="bold"><strong>Max Value</strong></span></td><td colspan="2"><code class="literal">18446744073709551615</code></td></tr></tbody></table>
</div>
<p>
            Number of seconds to wait for the first packet to be
            received from newly connected clients. This option is
            dynamically changeable.
          </p></li><li class="listitem"><p><a name="option_mysqld_mysqlx_idle_worker_thread_timeout"></a>
            <a class="indexterm" name="idm139777645364576"></a>

            <a class="indexterm" name="idm139777645363536"></a>

            <a class="link" href="document-store.html#option_mysqld_mysqlx_idle_worker_thread_timeout"><code class="option">mysqlx_idle_worker_thread_timeout[=<em class="replaceable"><code>value</code></em>]</code></a>
</p>
<div class="informaltable">
<table class="informaltable" summary="Options for mysqlx_idle_worker_thread_timeout" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--mysqlx_idle_worker_thread_timeout=#</code></td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2">integer</td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">60</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr><tr><td scope="row"><span class="bold"><strong>Max Value</strong></span></td><td colspan="2"><code class="literal">18446744073709551615</code></td></tr></tbody></table>
</div>
<p>
            Time in seconds after which an idle worker thread is
            terminated.
          </p></li><li class="listitem"><p><a name="option_mysqld_mysqlx_max_allowed_packet"></a>
            <a class="indexterm" name="idm139777645343184"></a>

            <a class="indexterm" name="idm139777645342144"></a>

            <a class="link" href="document-store.html#option_mysqld_mysqlx_max_allowed_packet"><code class="option">mysqlx_max_allowed_packet[=<em class="replaceable"><code>value</code></em>]</code></a>
</p>
<div class="informaltable">
<table class="informaltable" summary="Options for mysqlx_max_allowed_packet" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--mysqlx_max_allowed_packet=#</code></td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2">integer</td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">1048576</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">0</code></td></tr><tr><td scope="row"><span class="bold"><strong>Max Value</strong></span></td><td colspan="2"><code class="literal">18446744073709551615</code></td></tr></tbody></table>
</div>
<p>
            Maxmum size of a network packet that X Plugin can
            process. This option is dynamically changeable.
          </p></li><li class="listitem"><p><a name="option_mysqld_mysqlx_max_connections"></a>
            <a class="indexterm" name="idm139777645321888"></a>

            <a class="indexterm" name="idm139777645320848"></a>

            <a class="link" href="document-store.html#option_mysqld_mysqlx_max_connections"><code class="option">mysqlx_max_connections[=<em class="replaceable"><code>value</code></em>]</code></a>
</p>
<div class="informaltable">
<table class="informaltable" summary="Options for mysqlx_max_connections" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--mysqlx_max_connections=#</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal">mysqlx_max_connections</code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">Yes</td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2">integer</td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">100</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">1</code></td></tr><tr><td scope="row"><span class="bold"><strong>Max Value</strong></span></td><td colspan="2"><code class="literal">18446744073709551615</code></td></tr></tbody></table>
</div>
<p>
            Maximum number of concurrent client connections the
            X Plugin can accept. This option is dynamically
            changeable. When modifying this variable, if the new value
            is smaller than the current number of connections, the new
            limit is only taken into account for new connections.
          </p></li><li class="listitem"><p><a name="option_mysqld_mysqlx_min_worker_threads"></a>
            <a class="indexterm" name="idm139777645293424"></a>

            <a class="indexterm" name="idm139777645292384"></a>

            <a class="link" href="document-store.html#option_mysqld_mysqlx_min_worker_threads"><code class="option">mysqlx_min_worker_threads[=<em class="replaceable"><code>value</code></em>]</code></a>
</p>
<div class="informaltable">
<table class="informaltable" summary="Options for mysqlx_min_worker_threads" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--mysqlx_min_worker_threads=#</code></td></tr><tr><td scope="row" rowspan="4"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2">integer</td></tr><tr><td scope="row"><span class="bold"><strong>Default</strong></span></td><td colspan="2"><code class="literal">2</code></td></tr><tr><td scope="row"><span class="bold"><strong>Min Value</strong></span></td><td colspan="2"><code class="literal">1</code></td></tr><tr><td scope="row"><span class="bold"><strong>Max Value</strong></span></td><td colspan="2"><code class="literal">18446744073709551615</code></td></tr></tbody></table>
</div>
<p>
            The minimum number of worker threads the X Plugin uses
            for handling client requests. The maximum number of worker
            threads is limited implicitly by
            <a class="link" href="document-store.html#option_mysqld_mysqlx_max_connections"><code class="option">--mysqlx_max_connections</code></a>.
            This option is dynamically changeable.
          </p></li><li class="listitem"><p><a name="option_mysqld_mysqlx_ssl"></a>
            <a class="indexterm" name="idm139777645270976"></a>

            <a class="indexterm" name="idm139777645269904"></a>

            <a class="link" href="document-store.html#option_mysqld_mysqlx_ssl"><code class="option">--mysqlx_ssl[=<em class="replaceable"><code>value</code></em>]</code></a>
</p>
<div class="informaltable">
<table class="informaltable" summary="Options for mysqlx_ssl" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--mysqlx_ssl=#</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal">mysqlx_ssl</code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">No</td></tr><tr><td scope="row"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2">integer</td></tr></tbody></table>
</div>
<p>
            The equivalent of <code class="literal">ssl</code> for X Plugin,
            see that variable for more information.
          </p></li><li class="listitem"><p><a name="option_mysqld_mysqlx_ssl_ca"></a>
            <a class="indexterm" name="idm139777645248848"></a>

            <a class="indexterm" name="idm139777645247776"></a>

            <a class="link" href="document-store.html#option_mysqld_mysqlx_ssl_ca"><code class="option">--mysqlx_ssl_ca[=<em class="replaceable"><code>value</code></em>]</code></a>
</p>
<div class="informaltable">
<table class="informaltable" summary="Options for mysqlx_ssl_ca" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--mysqlx_ssl_ca=file_name</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal">mysqlx_ssl_ca</code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">No</td></tr><tr><td scope="row"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2">file name</td></tr></tbody></table>
</div>
<p>
            The equivalent of <a class="link" href="server-administration.html#sysvar_ssl_ca"><code class="literal">ssl_ca</code></a>
            for X Plugin, see that variable for more information.
          </p></li><li class="listitem"><p><a name="option_mysqld_mysqlx_ssl_capath"></a>
            <a class="indexterm" name="idm139777645225968"></a>

            <a class="indexterm" name="idm139777645224928"></a>

            <a class="link" href="document-store.html#option_mysqld_mysqlx_ssl_capath"><code class="option">--mysqlx_ssl_capath[=<em class="replaceable"><code>value</code></em>]</code></a>
</p>
<div class="informaltable">
<table class="informaltable" summary="Options for mysqlx_ssl_capath" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--mysqlx_ssl_capath=dir_name</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal">mysqlx_ssl_capath</code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">No</td></tr><tr><td scope="row"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2">directory name</td></tr></tbody></table>
</div>
<p>
            The equivalent of
            <a class="link" href="server-administration.html#sysvar_ssl_capath"><code class="literal">ssl_capath</code></a> for
            X Plugin, see that variable for more information.
          </p></li><li class="listitem"><p><a name="option_mysqld_mysqlx_ssl_cert"></a>
            <a class="indexterm" name="idm139777645203040"></a>

            <a class="indexterm" name="idm139777645201968"></a>

            <a class="link" href="document-store.html#option_mysqld_mysqlx_ssl_cert"><code class="option">--mysqlx_ssl_cert[=<em class="replaceable"><code>value</code></em>]</code></a>
</p>
<div class="informaltable">
<table class="informaltable" summary="Options for mysqlx_ssl_cert" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--mysqlx_ssl_cert</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal">mysqlx_ssl_key</code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">No</td></tr><tr><td scope="row"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2">file name</td></tr></tbody></table>
</div>
<p>
            The equivalent of <a class="link" href="server-administration.html#sysvar_ssl_cert"><code class="literal">ssl_cert</code></a>
            for X Plugin, see that variable for more information.
          </p></li><li class="listitem"><p><a name="option_mysqld_mysqlx_ssl_cipher"></a>
            <a class="indexterm" name="idm139777645180176"></a>

            <a class="indexterm" name="idm139777645179136"></a>

            <a class="link" href="document-store.html#option_mysqld_mysqlx_ssl_cipher"><code class="option">--mysqlx_ssl_cipher[=<em class="replaceable"><code>value</code></em>]</code></a>
</p>
<div class="informaltable">
<table class="informaltable" summary="Options for mysqlx_ssl_cipher" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--mysqlx_ssl_cipher=name</code></td></tr><tr><td scope="row"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2">string</td></tr></tbody></table>
</div>
<p>
            The equivalent of
            <a class="link" href="server-administration.html#sysvar_ssl_cipher"><code class="literal">ssl_cipher</code></a> for
            X Plugin, see that variable for more information.
          </p></li><li class="listitem"><p><a name="option_mysqld_mysqlx_ssl_crl"></a>
            <a class="indexterm" name="idm139777645164192"></a>

            <a class="indexterm" name="idm139777645163120"></a>

            <a class="link" href="document-store.html#option_mysqld_mysqlx_ssl_crl"><code class="option">--mysqlx_ssl_crl[=<em class="replaceable"><code>value</code></em>]</code></a>
</p>
<div class="informaltable">
<table class="informaltable" summary="Options for mysqlx_ssl_crl" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--mysqlx_ssl_crl=file_name</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal">mysqlx_ssl_crl</code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">No</td></tr><tr><td scope="row"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2">file name</td></tr></tbody></table>
</div>
<p>
            The equivalent of <a class="link" href="server-administration.html#sysvar_ssl_crl"><code class="literal">ssl_crl</code></a>
            for X Plugin, see that variable for more information.
          </p></li><li class="listitem"><p><a name="option_mysqld_mysqlx_ssl_crlpath"></a>
            <a class="indexterm" name="idm139777645141312"></a>

            <a class="indexterm" name="idm139777645140272"></a>

            <a class="link" href="document-store.html#option_mysqld_mysqlx_ssl_crlpath"><code class="option">--mysqlx_ssl_crlpath[=<em class="replaceable"><code>value</code></em>]</code></a>
</p>
<div class="informaltable">
<table class="informaltable" summary="Options for mysqlx_ssl_crlpath" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--mysqlx_ssl_crlpath=directory_name</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal">mysqlx_ssl_crlpath</code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">No</td></tr><tr><td scope="row"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2">directory name</td></tr></tbody></table>
</div>
<p>
            The equivalent of
            <a class="link" href="server-administration.html#sysvar_ssl_crlpath"><code class="literal">ssl_crlpath</code></a> for
            X Plugin, see that variable for more information.
          </p></li><li class="listitem"><p><a name="option_mysqld_mysqlx_ssl_key"></a>
            <a class="indexterm" name="idm139777645118400"></a>

            <a class="indexterm" name="idm139777645117328"></a>

            <a class="link" href="document-store.html#option_mysqld_mysqlx_ssl_key"><code class="option">--mysqlx_ssl_key[=<em class="replaceable"><code>value</code></em>]</code></a>
</p>
<div class="informaltable">
<table class="informaltable" summary="Options for mysqlx_ssl_key" border="1"><colgroup><col class="title"><col class="vt"><col class="vd"><col class="v"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong>Command-Line Format</strong></span></td><td colspan="3"><code class="literal">--mysqlx_ssl_key=file_name</code></td></tr><tr><td scope="row" rowspan="3"><span class="bold"><strong>System Variable</strong></span></td><td><span class="bold"><strong>Name</strong></span></td><td colspan="2"><code class="literal">mysqlx_ssl_key</code></td></tr><tr><td scope="row"><span class="bold"><strong>Variable Scope</strong></span></td><td colspan="2">Global</td></tr><tr><td scope="row"><span class="bold"><strong>Dynamic Variable</strong></span></td><td colspan="2">No</td></tr><tr><td scope="row"><span class="bold"><strong>Permitted Values</strong></span></td><td><span class="bold"><strong>Type</strong></span></td><td colspan="2">file name</td></tr></tbody></table>
</div>
<p>
            The equivalent of <a class="link" href="server-administration.html#sysvar_ssl_key"><code class="literal">ssl_key</code></a>
            for X Plugin, see that variable for more information.
</p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="x-plugin-system-monitoring"></a>3.7.3 Monitoring X Plugin</h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="document-store.html#x-plugin-monitoring-status-variables">3.7.3.1 Status Variables for X Plugin</a></span></dt></dl>
</div>
<p>
      This section describes how to monitor X Plugin. There are
      two available methods of monitoring, using Performance Schema
      tables or status variables.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="x-plugin-monitoring-status-variables"></a>3.7.3.1 Status Variables for X Plugin</h4>
</div>
</div>
</div>
<p>
        The status variables have the following meanings.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="statvar_Mysqlx_bytes_sent"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_bytes_sent"><code class="literal">Mysqlx_bytes_sent</code></a>
          </p><p>
            The number of bytes sent through the network.
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_bytes_received"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_bytes_received"><code class="literal">Mysqlx_bytes_received</code></a>
          </p><p>
            The number of bytes received through the network.
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_stmt_execute_sql"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_stmt_execute_sql"><code class="literal">Mysqlx_stmt_execute_sql</code></a>
          </p><p>
            

            The number of StmtExecute requests received for the SQL
            namespace.
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_stmt_execute_xplugin"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_stmt_execute_xplugin"><code class="literal">Mysqlx_stmt_execute_xplugin</code></a>
          </p><p>
            

            The number of StmtExecute requests received for the
            X Plugin namespace.
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_stmt_create_collection"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_stmt_create_collection"><code class="literal">Mysqlx_stmt_create_collection</code></a>
          </p><p>
            The number of create collection statements received.
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_stmt_create_collection_index"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_stmt_create_collection_index"><code class="literal">Mysqlx_stmt_create_collection_index</code></a>
          </p><p>
            The number of create collection index statements received.
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_stmt_drop_collection"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_stmt_drop_collection"><code class="literal">Mysqlx_stmt_drop_collection</code></a>
          </p><p>
            The number of drop collection statements received.
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_stmt_drop_collection_index"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_stmt_drop_collection_index"><code class="literal">Mysqlx_stmt_drop_collection_index</code></a>
          </p><p>
            The number of drop collection index statements received.
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_stmt_list_objects"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_stmt_list_objects"><code class="literal">Mysqlx_stmt_list_objects</code></a>
          </p><p>
            The number of list object statements received.
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_stmt_enable_notices"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_stmt_enable_notices"><code class="literal">Mysqlx_stmt_enable_notices</code></a>
          </p><p>
            The number of enable notice statements received.
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_stmt_disable_notices"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_stmt_disable_notices"><code class="literal">Mysqlx_stmt_disable_notices</code></a>
          </p><p>
            The number of disable notice statements received.
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_stmt_list_notices"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_stmt_list_notices"><code class="literal">Mysqlx_stmt_list_notices</code></a>
          </p><p>
            The number of list notice statements received.
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_stmt_list_clients"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_stmt_list_clients"><code class="literal">Mysqlx_stmt_list_clients</code></a>
          </p><p>
            The number of list client statements received.
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_stmt_kill_client"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_stmt_kill_client"><code class="literal">Mysqlx_stmt_kill_client</code></a>
          </p><p>
            The number of kill client statements received.
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_stmt_ping"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_stmt_ping"><code class="literal">Mysqlx_stmt_ping</code></a>
          </p><p>
            The number of ping statements received.
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_crud_insert"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_crud_insert"><code class="literal">Mysqlx_crud_insert</code></a>
          </p><p>
            The number of insert requests received.
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_crud_update"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_crud_update"><code class="literal">Mysqlx_crud_update</code></a>
          </p><p>
            The number of update requests received.
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_crud_delete"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_crud_delete"><code class="literal">Mysqlx_crud_delete</code></a>
          </p><p>
            The number of delete requests received.
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_crud_find"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_crud_find"><code class="literal">Mysqlx_crud_find</code></a>
          </p><p>
            The number of find requests received.
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_expect_open"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_expect_open"><code class="literal">Mysqlx_expect_open</code></a>
          </p><p>
            

            The number of expectation blocks opened.
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_expect_close"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_expect_close"><code class="literal">Mysqlx_expect_close</code></a>
          </p><p>
            The number of expectation blocks closed.
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_rows_sent"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_rows_sent"><code class="literal">Mysqlx_rows_sent</code></a>
          </p><p>
            The number of rows sent back to clients.
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_notice_warning_sent"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_notice_warning_sent"><code class="literal">Mysqlx_notice_warning_sent</code></a>
          </p><p>
            The number of warning notices sent back to clients.
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_notice_other_sent"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_notice_other_sent"><code class="literal">Mysqlx_notice_other_sent</code></a>
          </p><p>
            The number of other types of notices sent back to clients.
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_ssl_cipher"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_ssl_cipher"><code class="literal">Mysqlx_ssl_cipher</code></a>
          </p><p>
            The current SSL cipher (empty for non-SSL connections).
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_ssl_cipher_list"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_ssl_cipher_list"><code class="literal">Mysqlx_ssl_cipher_list</code></a>
          </p><p>
            A list of possible SSL ciphers (empty for non-SSL
            connections).
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_ssl_verify_depth"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_ssl_verify_depth"><code class="literal">Mysqlx_ssl_verify_depth</code></a>
          </p><p>
            The certificate verification depth for SSL connection.
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_ssl_verify_mode"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_ssl_verify_mode"><code class="literal">Mysqlx_ssl_verify_mode</code></a>
          </p><p>
            The certificate verification mode for SSL connection.
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_ssl_version"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_ssl_version"><code class="literal">Mysqlx_ssl_version</code></a>
          </p><p>
            The name of the protocol used for the connection ssl.
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_sessions"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_sessions"><code class="literal">Mysqlx_sessions</code></a>
          </p><p>
            The number of sessions that have been opened.
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_sessions_closed"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_sessions_closed"><code class="literal">Mysqlx_sessions_closed</code></a>
          </p><p>
            The number of sessions that have been closed.
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_sessions_fatal_error"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_sessions_fatal_error"><code class="literal">Mysqlx_sessions_fatal_error</code></a>
          </p><p>
            The number of sessions that have closed with a fatal error.
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_init_error"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_init_error"><code class="literal">Mysqlx_init_error</code></a>
          </p><p>
            The number of errors during initialisation.
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_sessions_accepted"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_sessions_accepted"><code class="literal">Mysqlx_sessions_accepted</code></a>
          </p><p>
            The number of session attempts which have been accepted.
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_sessions_rejected"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_sessions_rejected"><code class="literal">Mysqlx_sessions_rejected</code></a>
          </p><p>
            The number of session attempts which have been rejected.
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_sessions_killed"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_sessions_killed"><code class="literal">Mysqlx_sessions_killed</code></a>
          </p><p>
            The number of sessions which have been killed.
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_connections_closed"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_connections_closed"><code class="literal">Mysqlx_connections_closed</code></a>
          </p><p>
            The number of connections which have been closed.
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_connections_accepted"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_connections_accepted"><code class="literal">Mysqlx_connections_accepted</code></a>
          </p><p>
            The number of connections which have been accepted.
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_connections_rejected"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_connections_rejected"><code class="literal">Mysqlx_connections_rejected</code></a>
          </p><p>
            The number of connections which have been rejected.
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_connection_accept_errors"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_connection_accept_errors"><code class="literal">Mysqlx_connection_accept_errors</code></a>
          </p><p>
            The number of connections which have caused accept errors.
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_connection_errors"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_connection_errors"><code class="literal">Mysqlx_connection_errors</code></a>
          </p><p>
            The number of connections which have caused errors.
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_worker_threads"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_worker_threads"><code class="literal">Mysqlx_worker_threads</code></a>
          </p><p>
            The number of worker threads available.
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_worker_threads_active"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_worker_threads_active"><code class="literal">Mysqlx_worker_threads_active</code></a>
          </p><p>
            The number of worker threads currently used.
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_ssl_active"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_ssl_active"><code class="literal">Mysqlx_ssl_active</code></a>
          </p><p>
            If SSL is active.
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_ssl_ctx_verify_depth"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_ssl_ctx_verify_depth"><code class="literal">Mysqlx_ssl_ctx_verify_depth</code></a>
          </p><p>
            

            The certificate verification depth limit currently set in
            ctx.
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_ssl_ctx_verify_mode"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_ssl_ctx_verify_mode"><code class="literal">Mysqlx_ssl_ctx_verify_mode</code></a>
          </p><p>
            The certificate verification mode currently set in ctx.
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_ssl_finished_accepts"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_ssl_finished_accepts"><code class="literal">Mysqlx_ssl_finished_accepts</code></a>
          </p><p>
            The number of successful SSL connections to the server.
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_ssl_accepts"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_ssl_accepts"><code class="literal">Mysqlx_ssl_accepts</code></a>
          </p><p>
            The number of accepted SSL connections.
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_ssl_server_not_after"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_ssl_server_not_after"><code class="literal">Mysqlx_ssl_server_not_after</code></a>
          </p><p>
            The last date for which the SSL certificate is valid.
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_ssl_server_not_before"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_ssl_server_not_before"><code class="literal">Mysqlx_ssl_server_not_before</code></a>
          </p><p>
            The first date for which the SSL certificate is valid.
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_ssl_accept_renegotiates"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_ssl_accept_renegotiates"><code class="literal">Mysqlx_ssl_accept_renegotiates</code></a>
          </p><p>
            The number of negotiations needed to establish the
            connection.
          </p></li><li class="listitem"><p><a name="statvar_Mysqlx_errors_sent"></a>
            <a class="link" href="document-store.html#statvar_Mysqlx_errors_sent"><code class="literal">Mysqlx_errors_sent</code></a>
          </p><p>
            The number of errors sent to clients.
</p></li></ul>
</div>

</div>

</div>

</div>
<div lang="en" class="section">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both"><a name="mysql-shell"></a>3.8 MySQL Shell User Guide</h2>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="document-store.html#mysql-shell-features">3.8.1 MySQL Shell Features</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-getting-started">3.8.2 Getting Started with MySQL Shell</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-code-execution">3.8.3 MySQL Shell Code Execution</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-configuring">3.8.4 Configuring MySQL Shell</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-stored-sessions">3.8.5 Stored Sessions</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-application-log">3.8.6 MySQL Shell Application Log</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-customizing">3.8.7 Customizing MySQL Shell</a></span></dt></dl>
</div>
<p>
    This section provides user documentation for MySQL Shell, which
    enables you to prototype code using the X DevAPI to
    communicate with a MySQL Server running the X Plugin. The
    X Plugin is a new MySQL Server feature available with MySQL
    Server 5.7.12 and higher.
  </p><p>
    MySQL Shell is an advanced command-line client and code editor for
    the MySQL Server. In addition to SQL, MySQL Shell also offers
    scripting capabilities for JavaScript and Python. When MySQL Shell
    is connected to the MySQL Server through the X Protocol, the
    X DevAPI can be used to work with both relational and document
    data.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-shell-features"></a>3.8.1 MySQL Shell Features</h3>
</div>
</div>
</div>
<p>
    The following features are available in MySQL Shell.
</p>
<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h4 class="title"><a name="idm139777644931552"></a>Interactive Code Execution</h4>
</div>
</div>
</div>
<p>
      MySQL Shell provides an interactive code execution mode, where
      you type code at the MySQL Shell prompt and each entered
      statement is processed, with the result of the processing printed
      onscreen.
</p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="idm139777644930112"></a>Supported Languages</h4>

</div>

</div>

</div>
<p>
      MySQL Shell processes code in the following languages:
      JavaScript, Python and SQL. Any entered code is processed as one
      of these languages, based on the language that is currently
      active. There are also specific commands that are treated as
      <span class="quote">“<span class="quote">shell commands</span>”</span> which enable you to configure
      MySQL Shell or retrieve information. For more information see
      <a class="xref" href="document-store.html#mysql-shell-commands" title="3.8.4.1 MySQL Shell Commands">Section 3.8.4.1, “MySQL Shell Commands”</a>.
</p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="idm139777644927312"></a>Batch Code Execution</h4>

</div>

</div>

</div>
<p>
      In addition to the interactive execution of code, MySQL Shell
      can also take code from different sources and process it. This
      method of processing code in a non-interactive way is called
      <span class="emphasis"><em>Batch Execution</em></span>.
    </p><p>
      As batch execution mode is intended for script processing of a
      single language, it is limited to having minimal non-formatted
      output and disabling the execution of commands. To avoid these
      limitations, use the <a class="link" href="programs.html#option_mysqlsh_interactive"><code class="option">--interactive</code></a>
      command-line option, which tells MySQL Shell to execute the
      input as if it were an interactive session. In this mode the input
      is processed <span class="emphasis"><em>line by line</em></span> just as if each
      line were typed in an interactive session. For more information
      see <a class="xref" href="document-store.html#mysql-shell-batch-mode-interactive" title="3.8.3.5 Batch Mode Made Interactive">Section 3.8.3.5, “Batch Mode Made Interactive”</a>.
</p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="idm139777644922048"></a>Output Formats</h4>

</div>

</div>

</div>
<p>
      MySQL Shell provides output in different formats depending on
      how it is used: Tabbed, Table and JSON. For more information see
      <a class="xref" href="document-store.html#mysql-shell-output-formats" title="3.8.3.3 Output Formats">Section 3.8.3.3, “Output Formats”</a>.
</p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="idm139777644919824"></a>Multiple-line Support</h4>

</div>

</div>

</div>
<p>
      Multiple-line code can be written using a command, enabling
      MySQL Shell to cache multiple lines and then execute them as a
      single statement. For more information see
      <a class="xref" href="document-store.html#mysql-shell-multiple-line-support" title="3.8.3.5.1 Multiple-line Support">Section 3.8.3.5.1, “Multiple-line Support”</a>.
</p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="idm139777644917600"></a>Stored Sessions</h4>

</div>

</div>

</div>
<p>
      MySQL Shell maintains a list of connection data for different
      servers. You can connect to a server using these stored sessions.
      The list of stored sessions can be edited. See
      <a class="xref" href="document-store.html#mysql-shell-stored-sessions" title="3.8.5 Stored Sessions">Section 3.8.5, “Stored Sessions”</a> for more
      information.
</p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="idm139777644915344"></a>Application Log</h4>

</div>

</div>

</div>
<p>
      MySQL Shell can be configured to log information about the
      execution process. For more information see
      <a class="xref" href="document-store.html#mysql-shell-application-log" title="3.8.6 MySQL Shell Application Log">Section 3.8.6, “MySQL Shell Application Log”</a>.
</p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="idm139777644913088"></a>X DevAPI</h4>

</div>

</div>

</div>
<p>
      Code written in MySQL Shell uses the X DevAPI, provided
      for Python and JavaScript. For general information, see
      <a class="ulink" href="http://dev.mysql.com/doc/x-devapi-userguide/en/" target="_top">X DevAPI User Guide</a>.

      
</p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="idm139777644910240"></a>X Protocol Support</h4>

</div>

</div>

</div>
<p>
      MySQL Shell is designed to provide an integrated command-line
      client for all MySQL products which support X Protocol. The
      development features of MySQL Shell are designed for sessions
      using the X Protocol. MySQL Shell can also connect to
      MySQL Servers that do not support the X Protocol using the
      legacy MySQL Protocol. A minimal set of features from the
      X DevAPI are available for sessions created using the legacy
      MySQL protocol.

      
</p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h4 class="title"><a name="idm139777644907824"></a>Global Session</h4>

</div>

</div>

</div>
<p>
      Interaction with a MySQL Server is done through a Session object.
      For Python and JavaScript, a Session can be created through the
      <code class="literal">getSession</code> and
      <code class="literal">getNodeSession</code> functions of the mysqlx module.
      If a session is created in JavaScript mode using any of these
      methods, it is available only in JavaScript mode. The same happens
      if the session is created in Python mode. None of these sessions
      can be used in SQL mode.
    </p><p>
      For SQL Mode, the concept of Global Session is supported by the
      MySQL Shell. A Global Session is created when the connection
      information is passed to MySQL Shell using command-line options,
      or by using the <code class="literal">\connect</code> command.
    </p><p>
      The Global Session is used to execute statements in SQL mode and
      the same session is available in both Python or JavaScript modes.
      When a Global Session is created, a variable called
      <code class="literal">session</code> is set in the scripting languages, so
      you can execute code in the different languages by switching the
      active mode.
    </p><p>
      For more information, see <a class="xref" href="document-store.html#mysql-shell-sessions" title="3.8.2.1 MySQL Shell Sessions">Section 3.8.2.1, “MySQL Shell Sessions”</a>.
</p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-shell-getting-started"></a>3.8.2 Getting Started with MySQL Shell</h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="document-store.html#mysql-shell-sessions">3.8.2.1 MySQL Shell Sessions</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-connections">3.8.2.2 MySQL Shell Connections</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-global-variables">3.8.2.3 MySQL Shell Global Variables</a></span></dt></dl>
</div>
<p>
    This section describes how to get started with MySQL Shell. This
    section assumes you have a MySQL Server running X Plugin and
    that you have installed MySQL Shell, see
    <a class="xref" href="document-store.html#document-store-setting-up" title="3.3 Setting Up MySQL as a Document Store">Section 3.3, “Setting Up MySQL as a Document Store”</a>.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-shell-sessions"></a>3.8.2.1 MySQL Shell Sessions</h4>
</div>
</div>
</div>
<p>
      This section explains the different types of sessions in
      MySQL Shell and how to create and configure them.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h5 class="title"><a name="mysql-shell-sessions-introduction"></a>3.8.2.1.1 MySQL Shell Sessions Explained</h5>
</div>
</div>
</div>
<p>
        MySQL Shell is a unified interface to operate MySQL Server
        through scripting languages such as JavaScript or Python. To
        maintain compatibility with previous versions, SQL can also be
        executed in certain modes. A connection to a MySQL server is
        required. In MySQL Shell these connections are handled by a
        <span class="emphasis"><em>Session</em></span> object.
      </p><p>
        The following different types of Session objects are available:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <span class="emphasis"><em>XSession</em></span>: Use this session type for new
            application development. It offers the best integration with
            MySQL Server, and therefore, it is used by default. SQL
            execution is not supported and therefore it is not
            compatible with MySQL Shell's <span class="emphasis"><em>SQL
            Mode</em></span>.
          </p></li><li class="listitem"><p>
            <span class="emphasis"><em>Node Session</em></span>: Use this session type for
            SQL execution on a MySQL Server with the X Protocol
            enabled. SQL execution is available with this session type,
            therefore it can be used in MySQL Shell's
            <span class="emphasis"><em>SQL Mode</em></span>.
          </p><p>
            This session type should only be used when connecting
            <span class="emphasis"><em>directly</em></span> to an X Protocol enabled
            MySQL Server.
          </p></li><li class="listitem"><p>
            <span class="emphasis"><em>Classic Session</em></span> Use this session type
            to interact with MySQL Servers that do not have the
            X Protocol enabled. SQL execution is available with
            this session type, therefore it can be used in
            MySQL Shell's <span class="emphasis"><em>SQL Mode</em></span>.
          </p><p>
            The development API available for this type of session is
            very limited. For example, there are no CRUD operations, no
            collection handling, and binding is not supported.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h5 class="title"><a name="mysql-shell-choose-session-type"></a>3.8.2.1.2 Choosing a MySQL Shell Session Type</h5>

</div>

</div>

</div>
<p>
        MySQL Shell creates an XSession object by default. To choose
        which type of session should be created, use one of these
        options:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="link" href="programs.html#option_mysqlsh_node"><code class="option">--node</code></a> creates a Node
            Session.
          </p></li><li class="listitem"><p>
            <a class="link" href="programs.html#option_mysqlsh_classic"><code class="option">--classic</code></a> creates a Classic
            Session.
          </p></li><li class="listitem"><p>
            <a class="link" href="programs.html#option_mysqlsh_x"><code class="option">--x</code></a> creates an XSession.
</p></li></ul>
</div>
<p>
        For more information, see
        <a class="xref" href="document-store.html#mysql-shell-connection-using-uri" title="3.8.2.2.1 Connecting using a URI String">Section 3.8.2.2.1, “Connecting using a URI String”</a> and
        <a class="xref" href="document-store.html#mysql-shell-connection-using-parameters" title="3.8.2.2.2 Connecting using Individual Parameters">Section 3.8.2.2.2, “Connecting using Individual Parameters”</a>.
</p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-shell-connections"></a>3.8.2.2 MySQL Shell Connections</h4>

</div>

</div>

</div>
<p>
      MySQL Shell can be configured to connect to a MySQL Server
      running X Plugin using command-line options at start up or
      from MySQL Shell itself. The address of the MySQL Server can be
      specified using individual parameters, such as user, hostname and
      port, or using a Uniform Resource Identifier (URI) in the format
      <code class="literal">user@host:port/schema</code>, such as
      <code class="literal">mike@myserver:33060/testDB</code>. The following
      sections describe these methods.
    </p><p>
      Regardless of the method you choose to connect it is important to
      understand how passwords are handled by MySQL Shell:
</p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Important
</div>
<p>
        By default connections are assumed to require a password. The
        password is requested at the login prompt. To specify a
        password-less account use the
        <a class="link" href="programs.html#option_mysqlsh_password"><code class="option">--password</code></a> option, or use a
        <code class="literal">:</code> after the <code class="literal">user</code> in a URI.
</p>
</div>
<p>
      If you do not specify parameters for a connection the following
      defaults are used:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          user defaults to the current system user name
        </p></li><li class="listitem"><p>
          host defaults to localhost
        </p></li><li class="listitem"><p>
          port defaults to the X Plugin port 33060 when using an X
          Session, and port 3306 when using a Classic session
</p></li></ul>
</div>
<p>
      MySQL Shell connections using X Protocol
      <span class="emphasis"><em>always</em></span> use TCP, using Linux sockets is not
      supported. MySQL Shell connections using MySQL Protocol can use
      Linux sockets by specifying the
      <a class="link" href="programs.html#option_mysqlsh_socket"><code class="option">--socket</code></a> command-line option.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h5 class="title"><a name="mysql-shell-connection-using-uri"></a>3.8.2.2.1 Connecting using a URI String</h5>
</div>
</div>
</div>
<p>
        You configure the MySQL Server which MySQL Shell connects to
        by passing the connection data in string format using the
        <a class="link" href="programs.html#option_mysqlsh_uri"><code class="option">--uri</code></a> command-line option.
      </p><p>
        Use the following format:
      </p><pre class="programlisting">
[<em class="replaceable"><code>dbuser</code></em>[:[<em class="replaceable"><code>dbpassword</code></em>]]@]<em class="replaceable"><code>host</code></em>[:<em class="replaceable"><code>port</code></em>][/<em class="replaceable"><code>schema</code></em>]
</pre><p>
        Descriptions of these options:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <em class="replaceable"><code>dbuser</code></em>: specifies the MySQL user
            account to be used for the authentication process.
          </p></li><li class="listitem"><p>
            <em class="replaceable"><code>dbpassword</code></em>: specifies the dbuser
            password to be used for the authentication process.
</p>
<div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Warning
</div>
<p>
              Storing the password in the URI is not recommended.
</p>
</div>
</li><li class="listitem"><p>
            <em class="replaceable"><code>host</code></em>: specifies the host to which
            the session object connects. If not specified,
            <span class="emphasis"><em>localhost</em></span> is used by default.
          </p></li><li class="listitem"><p>
            <em class="replaceable"><code>port</code></em>: specifies which port the
            target MySQL server is listening on for the connection. If
            not specified, 33060 is used by default for the
            X Protocol enabled sessions, and 3306 is the default
            for traditional MySQL protocol sessions.
          </p></li><li class="listitem"><p>
            <em class="replaceable"><code>schema</code></em>: Indicates the database to
            be set as default when the session is established.
</p></li></ul>
</div>
<p>
        If no password is specified using the URI, which is recommended,
        then the password is prompted for. The following examples show
        how to use these command-line options:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Connect with a Node Session at port 33065.
          </p><pre class="programlisting">
shell&gt; <strong class="userinput"><code>mysqlsh --uri <em class="replaceable"><code>user</code></em>@localhost:33065 --node</code></strong>
</pre></li><li class="listitem"><p>
            Connect with a Classic Session.
          </p><pre class="programlisting">
shell&gt; <strong class="userinput"><code>mysqlsh --uri <em class="replaceable"><code>user</code></em>@localhost --classic</code></strong>
</pre></li></ul>
</div>
<p>
        Although using a password-less account is not recommended, you
        can specify a user without a password using a
        <em class="replaceable"><code>:</code></em> after the user name, for example:
      </p><pre class="programlisting">
shell&gt; <strong class="userinput"><code>mysqlsh --uri <em class="replaceable"><code>user</code></em>:@localhost</code></strong>
</pre><p>
        In addition to specifying a URI manually, you can use a stored
        session. See <a class="xref" href="document-store.html#mysql-shell-stored-sessions" title="3.8.5 Stored Sessions">Section 3.8.5, “Stored Sessions”</a> for
        more information.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h5 class="title"><a name="mysql-shell-connection-using-parameters"></a>3.8.2.2.2 Connecting using Individual Parameters</h5>

</div>

</div>

</div>
<p>
        In addition to specifying connection parameters using a URI, it
        is also possible to define the connection data using separate
        parameters for each value.
      </p><p>
        Use the following parameters:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="link" href="programs.html#option_mysqlsh_dbuser"><code class="option">--dbuser</code></a>
            (<code class="option">-u</code>) <em class="replaceable"><code>value</code></em>
          </p></li><li class="listitem"><p>
            <a class="link" href="programs.html#option_mysqlsh_dbpassword"><code class="option">--dbpassword</code></a>
            <em class="replaceable"><code>value</code></em>
          </p></li><li class="listitem"><p>
            <a class="link" href="programs.html#option_mysqlsh_host"><code class="option">--host</code></a> (<code class="option">-h</code>)
            <em class="replaceable"><code>value</code></em>
          </p></li><li class="listitem"><p>
            <a class="link" href="programs.html#option_mysqlsh_port"><code class="option">--port</code></a> (<code class="option">-P</code>)
            <em class="replaceable"><code>value</code></em>
          </p></li><li class="listitem"><p>
            <a class="link" href="programs.html#option_mysqlsh_schema"><code class="option">--schema</code></a>
            (<code class="option">-D</code>) <em class="replaceable"><code>value</code></em>
          </p></li><li class="listitem"><p>
            <a class="link" href="programs.html#option_mysqlsh_session-type"><code class="option">--session-type</code></a>
            <em class="replaceable"><code>value</code></em>. Removed in version 1.0.4.
          </p></li><li class="listitem"><p>
            <a class="link" href="programs.html#option_mysqlsh_password"><code class="option">--password</code></a>
            (<code class="option">-p</code>)
</p></li></ul>
</div>
<p>
        The first 5 parameters match the tokens used in the URI format
        described at <a class="xref" href="document-store.html#mysql-shell-connection-using-uri" title="3.8.2.2.1 Connecting using a URI String">Section 3.8.2.2.1, “Connecting using a URI String”</a>.
      </p><p>
        The <a class="link" href="programs.html#option_mysqlsh_password"><code class="option">--password</code></a> parameter
        indicates the user should connect <span class="emphasis"><em>without</em></span> a
        password.
      </p><p>
        For consistency, the following aliases are supported for some
        parameters:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="link" href="programs.html#option_mysqlsh_user"><code class="option">--user</code></a> is equivalent to
            <a class="link" href="programs.html#option_mysqlsh_dbuser"><code class="option">--dbuser</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="programs.html#option_mysqlsh_password"><code class="option">--password</code></a> is equivalent to
            <a class="link" href="programs.html#option_mysqlsh_dbpassword"><code class="option">--dbpassword</code></a>
          </p></li><li class="listitem"><p>
            <a class="link" href="programs.html#option_mysqlsh_database"><code class="option">--database</code></a> is equivalent to
            <a class="link" href="programs.html#option_mysqlsh_schema"><code class="option">--schema</code></a>
</p></li></ul>
</div>
<p>
        Attempt to establish an XSession with a specified user at port
        33065.
      </p><pre class="programlisting">
shell&gt; <strong class="userinput"><code>mysqlsh -u <em class="replaceable"><code>user</code></em> -h localhost -P 33065</code></strong>
</pre><p>
        Attempt to establish a Classic Session with a specified user.
      </p><pre class="programlisting">
shell&gt; <strong class="userinput"><code>mysqlsh -u <em class="replaceable"><code>user</code></em> -h localhost --classic</code></strong>
</pre><p>
        Attempt to establish a Node Session with a specified user.
      </p><pre class="programlisting">
shell&gt; <strong class="userinput"><code>mysqlsh --node -u <em class="replaceable"><code>user</code></em> -h localhost</code></strong>
</pre>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h5 class="title"><a name="mysql-shell-ssl-connections"></a>3.8.2.2.3 Using SSL for Secure Connections</h5>

</div>

</div>

</div>
<p>
        Using SSL is possible when connecting to an SSL enabled MySQL
        server.
      </p><p>
        To configure an SSL connection, use the following command-line
        options:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="option">--ssl</code> : This enables or disables
            connections through SSL. If set to 0, the other SSL
            command-line options are ignored.
          </p></li><li class="listitem"><p>
            <code class="option">--ssl-ca=<em class="replaceable"><code>filename</code></em></code>:
            The path to a file in PEM format that contains a list of
            trusted SSL certificate authorities.
          </p></li><li class="listitem"><p>
            <code class="option">--ssl-cert=<em class="replaceable"><code>filename</code></em></code>:
            The name of the SSL certificate file in PEM format to use
            for establishing a secure connection.
          </p></li><li class="listitem"><p>
            <code class="option">--ssl-key=<em class="replaceable"><code>filename</code></em></code>:
            The name of the SSL key file in PEM format to use for
            establishing a secure connection.
</p></li></ul>
</div>
<p>
        The <code class="option">--ssl</code> option is assumed to be 1 (enabled)
        if the other SSL options are set.

        
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h5 class="title"><a name="mysql-shell-mixing-uri-and-parameters"></a>3.8.2.2.4 Connecting using both URI and Individual Parameters</h5>

</div>

</div>

</div>
<p>
        When the <a class="link" href="programs.html#option_mysqlsh_uri"><code class="option">--uri</code></a> option is
        specified in combination with some of the individual parameters,
        the address specified by the
        <a class="link" href="programs.html#option_mysqlsh_uri"><code class="option">--uri</code></a> option is used as the base
        connection data and the values provided using individual
        parameters override the corresponding value from the URI. If the
        <a class="link" href="programs.html#option_mysqlsh_user"><code class="option">--user</code></a> option is used, it would
        replace any user specified as part of a URI.

        
      </p><p>
        For example to establish an XSession and override
        <em class="replaceable"><code>user</code></em> from the URI:
      </p><pre class="programlisting">
shell&gt; <strong class="userinput"><code>mysqlsh --uri <em class="replaceable"><code>user</code></em>@localhost:33065 --user <em class="replaceable"><code>otheruser</code></em></code></strong>
</pre>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h5 class="title"><a name="mysql-shell-create-session-using-shell"></a>3.8.2.2.5 Creating a Session Using Shell Commands</h5>

</div>

</div>

</div>
<p>
        If you open MySQL Shell without specifying connection
        parameters, MySQL Shell opens without an established global
        session. It is possible to establish a global session once
        MySQL Shell has been started using the following
        <span class="emphasis"><em>Shell Commands</em></span>:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">\connect URI</code>: Creates an XSession.
          </p></li><li class="listitem"><p>
            <code class="literal">\connect -n URI</code>: Creates a Node Session.
          </p></li><li class="listitem"><p>
            <code class="literal">\connect -c URI</code>: Creates a Classic
            Session.
</p></li></ul>
</div>
<p>
        Configure the connection using the URI parameter, which follows
        the same syntax as for the <a class="link" href="programs.html#option_mysqlsh_uri"><code class="option">--uri</code></a>
        command-line option. For additional information, see
        <a class="xref" href="document-store.html#mysql-shell-connection-using-uri" title="3.8.2.2.1 Connecting using a URI String">Section 3.8.2.2.1, “Connecting using a URI String”</a>.
      </p><p>
        For example:
      </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>\connect root@localhost</code></strong>
Creating XSession to root@localhost...
Enter password: ****
No default schema selected.
mysql-js&gt;
</pre>
<div class="section">

<div class="titlepage">
<div>
<div>
<h6 class="title"><a name="mysql-shell-using-ssl-connections"></a>3.8.2.2.5.1 Creating a Secure Session Using SSL</h6>
</div>

</div>

</div>
<p>
          To establish an SSL connection, the URI parameter passed to
          the connect shell commands must include the SSL information as
          URL parameters. For example:
        </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>\connect root@localhost?ssl_ca=/path/to/ca/file&amp;\
ssl_cert=/path/to/cert/file&amp;ssl_key=/path/to/key/file</code></strong>
Creating XSession to root@localhost...
Enter password: ****
No default schema selected.
mysql-js&gt;
</pre>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h5 class="title"><a name="mysql-connections-in-javascript-and-python"></a>3.8.2.2.6 Connections in JavaScript and Python</h5>

</div>

</div>

</div>
<p>
        When a connection is made using the command-line options or by
        using any of the shell commands, a global session object is
        created. This session is global because once created, it can be
        used in any of the MySQL Shell execution modes.
      </p><p>
        Any global session object is available in JavaScript or Python
        modes because a variable called
        <span class="strong"><strong>session</strong></span> holds a reference to
        it.
      </p><p>
        In SQL mode, both Node and Classic sessions can be used because
        they both expose SQL execution. In SQL mode an XSession cannot
        be used.
      </p><p>
        In addition to the global session object, sessions can be
        established and assigned to a different variable by using the
        functions available in the mysql and mysqlx JavaScript and
        Python modules.
      </p><p>
        For example, the following functions are provided by these
        modules:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <span class="strong"><strong>mysql.getSession(connectionData[,
            password])</strong></span>
          </p></li><li class="listitem"><p>
            <span class="strong"><strong>mysqlx.getNodeSession(connectionData[,
            password])</strong></span>
          </p></li><li class="listitem"><p>
            <span class="strong"><strong>mysql.getClassicSession(connectionData[,
            password])</strong></span>
</p></li></ul>
</div>
<p>
        The first of these functions is used to create an XSession which
        features the most comprehensive development API and supports
        X Protocol.
      </p><p>
        The second creates a Node Session which connects to a
        X Protocol enabled MySQL Server and allows SQL Execution.
      </p><p>
        The latter returns a Classic Session object which uses the
        traditional MySQL protocol and has a very limited development
        API.
      </p><p>
        <span class="emphasis"><em>connectionData</em></span> can be either a URI as
        specified above or a dictionary containing the connection
        parameters. See
        <a class="xref" href="document-store.html#mysql-shell-connection-using-uri" title="3.8.2.2.1 Connecting using a URI String">Section 3.8.2.2.1, “Connecting using a URI String”</a>.
      </p><p>
        The following example shows how to create a Node Session using
        the X Protocol:

        
      </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>var mysqlx=require('mysqlx').mysqlx;</code></strong>

mysql-js&gt; <strong class="userinput"><code>var session=mysqlx.getNodeSession('root@localhost');</code></strong>

mysql-js&gt; <strong class="userinput"><code>print(session)</code></strong>
&lt;NodeSession:root@localhost&gt;
mysql-js&gt;
</pre><p>
        The following example shows how to create a Node Session using
        the X Protocol so that you can execute SQL:

        
      </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>var mysqlx=require('mysqlx').mysqlx;</code></strong>

mysql-js&gt; var session=mysqlx.getNodeSession({host: 'localhost', dbUser: 'root'});

mysql-js&gt; <strong class="userinput"><code>print(session)</code></strong>
&lt;NodeSession:root@localhost&gt;
mysql-js&gt;
</pre><p>
        The following example shows how to create a Classic Session:
      </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>var mysql=require('mysql').mysql;</code></strong>

mysql-js&gt; <strong class="userinput"><code>var session = mysql.getClassicSession('root@localhost:3307');</code></strong>
mysql-js&gt; <strong class="userinput"><code>print(session)</code></strong>
&lt;ClassicSession:root@localhost:3307&gt;
mysql-js&gt;
</pre>
<div class="section">

<div class="titlepage">
<div>
<div>
<h6 class="title"><a name="mysql-shell-using-ssl-connection-data"></a>3.8.2.2.6.1 Using SSL for Secure Connections</h6>
</div>

</div>

</div>
<p>
          To establish an SSL connection, set the SSL information in the
          connectionData dictionary. For example:
        </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>var mysqlx=require('mysqlx').mysqlx;</code></strong>

mysql-js&gt; <strong class="userinput"><code>var session=mysqlx.getNodeSession({host: 'localhost',
                                             dbUser: 'root',
                                             dbPassword: 'mypasswd',
                                             ssl_ca: "path_to_ca_file",
                                             ssl_cert: "path_to_cert_file",
                                             ssl_key: "path_to_key_file"});</code></strong>

mysql-js&gt; <strong class="userinput"><code>print(session)</code></strong>
&lt;NodeSession:root@localhost&gt;
mysql-js&gt;
</pre>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-shell-global-variables"></a>3.8.2.3 MySQL Shell Global Variables</h4>

</div>

</div>

</div>
<p>
    MySQL Shell reserves certain variables as global variables, which
    are assigned to commonly used objects in scripting. This section
    describes the available global variables and provides examples of
    working with them. The global variables are:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
        <code class="literal">session</code> represents the global session if one
        has been established.
      </p></li><li class="listitem"><p>
        <code class="literal">db</code> represents a schema if one has been
        defined, for example by a URI.
</p></li></ul>
</div>
<p>
    MySQL Shell provides interactive error resolution for common
    situations related to using the global variables. For example:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
        Attempting to use an undefined <code class="literal">session</code> global
        variable.
      </p></li><li class="listitem"><p>
        Attempting to retrieve an nonexistent schema using
        <code class="literal">session</code>.
      </p></li><li class="listitem"><p>
        Attempting to use an undefined <code class="literal">db</code> global
        variable.
</p></li></ul>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="mysql-shell-undefined-global-session"></a>Undefined Global Session</h5>

</div>

</div>

</div>
<p>
      The global <code class="literal">session</code> variable is set when a
      global session is established. When a global session is
      established, issuing a <code class="literal">session</code> statement in
      MySQL Shell displays the session type and its URI as follows:
    </p><pre class="programlisting">
mysql-js&gt; session
&lt;XSession:root@localhost:33060&gt;
mysql-js&gt;
</pre><p>
      If no global session has been established, MySQL Shell displays
      the following:
    </p><pre class="programlisting">
mysql-js&gt; session
&lt;Undefined&gt;
mysql-js&gt;
</pre><p>
      If you attempt to use the <code class="literal">session</code> variable when
      no global session is established, interactive error resolution
      starts and you are prompted to provide the required information to
      establish a global session. If the session is successfully
      established, it is assigned to the <code class="literal">session</code>
      variable. The prompts are:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          An initial prompt explains that no global session is
          established and asks if one should be established.
        </p></li><li class="listitem"><p>
          If the you choose to set a global session, the session type is
          requested.
        </p></li><li class="listitem"><p>
          Either the URI or the alias of a stored session is requested.
        </p></li><li class="listitem"><p>
          If required, a password is requested.
</p></li></ul>
</div>
<p>
      For example:
    </p><pre class="programlisting">
mysql-js&gt; session.uri
The global session is not set, do you want to establish a session? [y/N]: y
Please specify the session type:

1) X
2) Node
3) Classic

Type: 2
Please specify the MySQL server URI (or $slias): root@localhost
Enter password:*******
root@localhost:33060
mysql-js&gt;
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="mysql-shell-undefined-db-variable"></a>Undefined db Variable</h5>

</div>

</div>

</div>
<p>
      The global <code class="literal">db</code> variable is set when a global
      session is established and a default schema is configured. For
      example, using a URI such as
      <code class="literal">root@localhost/sakila</code> to establish a global
      session connected to the MySQL Server at
      <code class="literal">localhost</code>, on port 33060, as the user
      <code class="literal">root</code>, assigns the schema
      <code class="literal">sakila</code> to the global variable
      <code class="literal">db</code>. Once a schema is defined, issuing
      <code class="literal">db</code> at the MySQL Shell prompt prints the
      schema name as follows:
    </p><pre class="programlisting">
mysql-js&gt; db
&lt;Schema:world_x&gt;
mysql-js&gt;
</pre><p>
      If there is no global session established, the following is
      displayed:
    </p><pre class="programlisting">
mysql-js&gt; db
&lt;Undefined&gt;
mysql-js&gt;
</pre><p>
      If you attempt to use the <code class="literal">db</code> variable when no
      global session has been established, the following error is
      displayed:
    </p><pre class="programlisting">
mysql-js&gt; db.getCollections()
LogicError: The db variable is not set, establish a global session first.
at (shell):1:2
in db.getCollections()
^
</pre><p>
      If a global session has been established but you attempt to use an
      undefined <code class="literal">db</code>, interactive error resolution
      begins and you are prompted to define an active schema by
      providing the schema name. If this succeeds the
      <code class="literal">db</code> variable is set to the defined schema. For
      example:
    </p><pre class="programlisting">
mysql-js&gt; db.getCollections()
The db variable is not set, do you want to set the active schema? [y/N]:y
Please specify the schema:world_x
[
&lt;Collection:countryinfo&gt;
]
mysql-js&gt; db
&lt;Schema:world_x&gt;
mysql-js&gt;
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="mysql-shell-retrieving-a-nonexistent-schema"></a>Retrieving an Nonexistent Schema</h5>

</div>

</div>

</div>
<p>
      If you attempt to use <code class="literal">session</code> to retrieve an
      nonexistent schema, interactive error resolution provides the
      option to create the schema.
    </p><pre class="programlisting">
mysql-js&gt; var mySchema = session.getSchema('my_test')
The schema my_test does not exist, do you want to create it? [y/N]: y

mysql-js&gt; mySchema
&lt;Schema:my_test&gt;
mysql-js&gt;</pre><p>
      In all cases, if you do not provide the information required to
      resolve each situation, a proper result of executing the requested
      statement on an undefined variable is displayed.
</p>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-shell-code-execution"></a>3.8.3 MySQL Shell Code Execution</h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="document-store.html#mysql-shell-interactive-code-execution">3.8.3.1 Interactive Code Execution</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-batch-code-execution">3.8.3.2 Batch Code Execution</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-output-formats">3.8.3.3 Output Formats</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-active-language">3.8.3.4 Active Language</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-batch-mode-interactive">3.8.3.5 Batch Mode Made Interactive</a></span></dt></dl>
</div>
<p>
    This section explains how code execution works in MySQL Shell.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-shell-interactive-code-execution"></a>3.8.3.1 Interactive Code Execution</h4>
</div>
</div>
</div>
<p>
      The default mode of MySQL Shell provides interactive execution
      of database operations that you type at the command prompt. These
      operations can be written in JavaScript, Python or SQL depending
      on the type of session being used. When executed, the results of
      the operation are displayed on-screen.
    </p><p>
      As with any other language interpreter, MySQL Shell is very
      strict regarding syntax. For example, the following JavaScript
      snippet reads and prints the documents in a collection:
    </p><pre class="programlisting">
var mysqlx = require('mysqlx').mysqlx;
var mySession = mysqlx.getSession('user:pwd@localhost');
var result = mySession.world_x.countryinfo.find().execute();
var record = result.fetchOne();
while(record){
  print(record);
  record = result.fetchOne();
}
</pre><p>
      As seen above, the call to <code class="literal">find()</code> is followed
      by the <code class="literal">execute()</code> function. CRUD database
      commands are only actually executed on the MySQL Server when
      <code class="literal">execute()</code> is called. However, when working with
      MySQL Shell interactively, <code class="literal">execute()</code> is
      implicitly called whenever you press <code class="literal">Return</code> on
      a statement. Then the results of the operation are fetched and
      displayed on-screen. The rules for when you need to call
      <code class="literal">execute()</code> or not are as follows:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          When using MySQL Shell in this way, calling
          <code class="literal">execute()</code> becomes optional on:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              <code class="literal">Collection.add()</code>
            </p></li><li class="listitem"><p>
              <code class="literal">Collection.find()</code>
            </p></li><li class="listitem"><p>
              <code class="literal">Collection.remove()</code>
            </p></li><li class="listitem"><p>
              <code class="literal">Collection.modify()</code>
            </p></li><li class="listitem"><p>
              <code class="literal">Table.insert()</code>
            </p></li><li class="listitem"><p>
              <code class="literal">Table.select()</code>
            </p></li><li class="listitem"><p>
              <code class="literal">Table.delete()</code>
            </p></li><li class="listitem"><p>
              <code class="literal">Table.update()</code>
            </p></li><li class="listitem"><p>
              <code class="literal">NodeSession.sql()</code>
</p></li></ul>
</div>
</li><li class="listitem"><p>
          Automatic execution is disabled if the object is assigned to a
          variable. In such a case calling <code class="literal">execute()</code>
          is mandatory to perform the operation.
        </p></li><li class="listitem"><p>
          When a line is processed and the function returns any of the
          available <code class="literal">Result</code> objects, the information
          contained in the Result object is automatically displayed on
          screen. The functions that return a Result object include:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              The SQL execution and CRUD operations (listed above)
            </p></li><li class="listitem"><p>
              Transaction handling and drop functions of the session
              objects in both mysql and mysqlx modules: -

</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>
                    <code class="literal">startTransaction()</code>
                  </p></li><li class="listitem"><p>
                    <code class="literal">commit()</code>
                  </p></li><li class="listitem"><p>
                    <code class="literal">rollback()</code>
                  </p></li><li class="listitem"><p>
                    <code class="literal">dropSchema()</code>
                  </p></li><li class="listitem"><p>
                    <code class="literal">dropTable()</code>
                  </p></li><li class="listitem"><p>
                    <code class="literal">dropCollection()</code>
                  </p></li><li class="listitem"><p>
                    <code class="literal">dropView()</code>
                  </p></li><li class="listitem"><p>
                    <code class="literal">ClassicSession.runSql()</code>
</p></li></ul>
</div>
<p>
</p></li></ul>
</div>
</li></ul>
</div>
<p>
      Based on the above rules, the statements needed in the
      MySQL Shell in interactive mode to establish a session, query,
      and print the documents in a collection are:
    </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>var mysqlx = require('mysqlx').mysqlx;</code></strong>
mysql-js&gt; <strong class="userinput"><code>var mySession = mysqlx.getSession('user:pwd@localhost');</code></strong>
</pre><p>
      No call to <code class="literal">execute()</code> is needed and the Result
      object is automatically printed.
    </p><pre class="programlisting">
mysql-js&gt; <strong class="userinput"><code>mySession.world_x.countryinfo.find();</code></strong>
</pre>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-shell-batch-code-execution"></a>3.8.3.2 Batch Code Execution</h4>

</div>

</div>

</div>
<p>
      As well as interactive code execution, MySQL Shell provides
      batch code execution from:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          A file loaded for processing.
        </p></li><li class="listitem"><p>
          A file containing code that is redirected to the standard
          input for execution.
        </p></li><li class="listitem"><p>
          Code from a different source that is redirected to the
          standard input for execution.
</p></li></ul>
</div>
<p>
      For example:
    </p><p>
      Loading SQL code from a file for batch processing.
    </p><pre class="programlisting">
shell&gt; <strong class="userinput"><code>mysqlsh --file code.js</code></strong>
</pre><p>
      Redirecting a file to standard input for execution.
    </p><pre class="programlisting">
shell&gt; <strong class="userinput"><code>mysqlsh &lt; code.js</code></strong>
</pre><p>
      Redirecting code to standard input for execution.
    </p><pre class="programlisting">
shell&gt; <strong class="userinput"><code>echo "show databases;" | mysqlsh --sql --uri root@192.168.1.141:33060</code></strong>
</pre>
<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h5 class="title"><a name="mysql-shell-executable-scripts"></a>Executable Scripts</h5>
</div>
</div>
</div>
<p>
        Starting with version 1.0.4, on Linux you can create executable
        scripts that run with MySQL Shell by including a
        <code class="literal">#!</code> line as the first line of the script. This
        line should provide the full path to MySQL Shell and include
        the <a class="link" href="programs.html#option_mysqlsh_file"><code class="option">--file</code></a> option. For example:
      </p><pre class="programlisting">
#!/usr/local/mysql-shell/bin/mysqlsh --file
print("Hello World\n");
</pre><p>
        The script file must be marked as executable in the filesystem.
        Running the script invokes MySQL Shell and it executes the
        contents of the script.
</p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-shell-output-formats"></a>3.8.3.3 Output Formats</h4>

</div>

</div>

</div>
<p>
      The output of the commands processed on the server can be
      formatted in different ways. This section details the different
      available output formats.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h5 class="title"><a name="mysql-shell-output-table-format"></a>3.8.3.3.1 Table Format</h5>
</div>
</div>
</div>
<p>
        The table format is used by default when MySQL Shell is in
        interactive mode. The output is presented as a formatted table
        for a better view and to aid analysis.
      </p><pre class="programlisting">
mysql-sql&gt; <strong class="userinput"><code>select * from sakila.actor limit 3;</code></strong>
+----------+-------------+----------------+----------------------+
| actor_id | first_name  | last_name      | last_update          |
+----------+-------------+----------------+----------------------+
|        1 | PENELOPE    | GUINESS        | 2006-02-15 4:34:33   |
|        2 | NICK        | WAHLBERG       | 2006-02-15 4:34:33   |
|        3 | ED          | CHASE          | 2006-02-15 4:34:33   |
+----------+-------------+----------------+----------------------+
3 rows in set (0.00 sec)

mysql-sql&gt;
</pre><p>
        To get this output format when running in batch mode, use the
        <a class="link" href="programs.html#option_mysqlsh_table"><code class="option">--table</code></a> command-line option.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h5 class="title"><a name="mysql-shell-output-tab-format"></a>3.8.3.3.2 Tab Separated Format</h5>

</div>

</div>

</div>
<p>
        This format is used by default when running MySQL Shell in
        batch mode, to have better output for automated analysis.
      </p><pre class="programlisting">
&gt;<strong class="userinput"><code>echo "select * from sakila.actor limit 3;" | mysqlsh --classic --uri root@192.168.1.141:33460</code></strong>
actor_id        first_name      last_name       last_update
1       PENELOPE        GUINESS 2006-02-15 4:34:33
2       NICK    WAHLBERG        2006-02-15 4:34:33
3       ED      CHASE   2006-02-15 4:34:33
</pre>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h5 class="title"><a name="mysql-shell-json-output"></a>3.8.3.3.3 JSON Format Output</h5>

</div>

</div>

</div>
<p>
        MySQL Shell supports the JSON format for output and it is
        available both in interactive and batch mode. This output format
        can be enabled using the <a class="link" href="programs.html#option_mysqlsh_json"><code class="option">--json</code></a>
        command-line option:
      </p><p>
        <span class="strong"><strong>JSON Format in Batch Mode</strong></span>
      </p><pre class="programlisting">
shell&gt;<strong class="userinput"><code>echo "select * from sakila.actor limit 3;" | mysqlsh --json --sqlc --uri root@192.168.1.141:3306</code></strong>
{"duration":"0.00 sec","info":"","row_count":3,"rows":[[1,"PENELOPE","GUINESS",{"year":2006,"month":1,"day":15,"hour":4,"minute":34,"second":33.0}],[2,"NICK","WAHLBERG",{"year":2006,"month":1,"day":15,"hour":4,"minute":34,"second":33.0}],[3,"ED","CHASE",{"year":2006,"month":1,"day":15,"hour":4,"minute":34,"second":33.0}]],"warning_count":0}

shell&gt;<strong class="userinput"><code>echo "select * from sakila.actor limit 3;" | mysqlsh --json=raw --sqlc --uri root@192.168.1.141:3306</code></strong>
{"duration":"0.00 sec","info":"","row_count":3,"rows":[[1,"PENELOPE","GUINESS",{"year":2006,"month":1,"day":15,"hour":4,"minute":34,"second":33.0}],[2,"NICK","WAHLBERG",{"year":2006,"month":1,"day":15,"hour":4,"minute":34,"second":33.0}],[3,"ED","CHASE",{"year":2006,"month":1,"day":15,"hour":4,"minute":34,"second":33.0}]],"warning_count":0}

shell&gt;<strong class="userinput"><code>echo "select * from sakila.actor limit 3;" | mysqlsh --json=pretty --sqlc --uri root@192.168.1.141:3306</code></strong>
{
    "duration": "0.00 sec",
    "info": "",
    "row_count": 3,
    "rows": [
        [
            1,
            "PENELOPE",
            "GUINESS",
            {
                "year": 2006,
                "month": 1,
                "day": 15,
                "hour": 4,
                "minute": 34,
                "second": 33.0
            }
        ],
        [
            2,
            "NICK",
            "WAHLBERG",
            {
                "year": 2006,
                "month": 1,
                "day": 15,
                "hour": 4,
                "minute": 34,
                "second": 33.0
            }
        ],
        [
            3,
            "ED",
            "CHASE",
            {
                "year": 2006,
                "month": 1,
                "day": 15,
                "hour": 4,
                "minute": 34,
                "second": 33.0
            }
        ]
    ],
    "warning_count": 0
}
shell&gt;
</pre><p>
        <span class="strong"><strong>JSON Format in Interactive Mode (started
        with --json=raw)</strong></span>
      </p><pre class="programlisting">
mysql-sql&gt; <strong class="userinput"><code>select * from sakila.actor limit 3;</code></strong>
{"duration":"0.00 sec","info":"","row_count":3,"rows":[[1,"PENELOPE","GUINESS",{"year":2006,"month":1,"day":15,"hour":4,"minute":34,"second":33.0}],[2,"NICK","WAHLBERG",{"year":2006,"month":1,"day":15,"hour":4,"minute":34,"second":33.0}],[3,"ED","CHASE",{"year":2006,"month":1,"day":15,"hour":4,"minute":34,"second":33.0}]],"warning_count":0}

mysql-sql&gt;
</pre><p>
        <span class="strong"><strong>JSON Format in Interactive Mode (started
        with --json=pretty)</strong></span>
      </p><pre class="programlisting">
mysql-sql&gt; <strong class="userinput"><code>select * from sakila.actor limit 3;</code></strong>
{
    "duration": "0.00 sec",
    "info": "",
    "row_count": 3,
    "rows": [
        [
            1,
            "PENELOPE",
            "GUINESS",
            {
                "year": 2006,
                "month": 1,
                "day": 15,
                "hour": 4,
                "minute": 34,
                "second": 33.0
            }
        ],
        [
            2,
            "NICK",
            "WAHLBERG",
            {
                "year": 2006,
                "month": 1,
                "day": 15,
                "hour": 4,
                "minute": 34,
                "second": 33.0
            }
        ],
        [
            3,
            "ED",
            "CHASE",
            {
                "year": 2006,
                "month": 1,
                "day": 15,
                "hour": 4,
                "minute": 34,
                "second": 33.0
            }
        ]
    ],
    "warning_count": 0
}

mysql-sql&gt;
</pre>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h5 class="title"><a name="mysql-shell-output-metadata"></a>3.8.3.3.4 Result Metadata</h5>

</div>

</div>

</div>
<p>
        When an operation is executed, in addition to any results
        returned, some additional information is available. This
        includes information such as the number of affected rows,
        warnings, duration, and so on, when any of these conditions is
        true:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            JSON format is being used for the output
          </p></li><li class="listitem"><p>
            MySQL Shell is running in interactive mode.
</p></li></ul>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-shell-active-language"></a>3.8.3.4 Active Language</h4>

</div>

</div>

</div>
<p>
      MySQL Shell can execute SQL, JavaScript or Python code, but only
      one language can be active at a time. The active mode determines
      how the executed statements are processed:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          If using SQL mode, statements are processed as SQL which means
          they are sent to the MySQL server for execution.
        </p></li><li class="listitem"><p>
          If using JavaScript mode, statements are processed as
          JavaScript code.
        </p></li><li class="listitem"><p>
          If using Python mode, statements are processed as Python code.
</p></li></ul>
</div>
<p>
      When running MySQL Shell in interactive mode, activate a
      specific language by entering the commands:
      <code class="literal">\sql</code>, <code class="literal">\js</code>,
      <code class="literal">\py</code>.
    </p><p>
      When running MySQL Shell in batch mode, activate a specific
      language by passing any of these command-line options:
      <a class="link" href="programs.html#option_mysqlsh_js"><code class="option">--js</code></a>,
      <a class="link" href="programs.html#option_mysqlsh_py"><code class="option">--py</code></a> or
      <a class="link" href="programs.html#option_mysqlsh_sql"><code class="option">--sql</code></a>. The default mode if none is
      specified is JavaScript.
    </p><p>
      Use MySQL Shell to execute the content of the file
      <code class="filename">code.sql</code> as SQL.
    </p><pre class="programlisting">
shell&gt; <strong class="userinput"><code>mysqlsh --sql &lt; code.sql</code></strong>
</pre><p>
      Use MySQL Shell to execute the content of the file
      <code class="filename">code.js</code> as JavaScript code.
    </p><pre class="programlisting">
shell&gt; <strong class="userinput"><code>mysqlsh &lt; code.js</code></strong>
</pre><p>
      Use MySQL Shell to execute the content of the file
      <code class="filename">code.py</code> as Python code.
    </p><pre class="programlisting">
shell&gt; <strong class="userinput"><code>mysqlsh --py &lt; code.py</code></strong>
</pre>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-shell-batch-mode-interactive"></a>3.8.3.5 Batch Mode Made Interactive</h4>

</div>

</div>

</div>
<p>
      This section describes code execution in batch mode.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          In batch mode, all the command logic described above is not
          available, only valid code for the active language can be
          executed.
        </p></li><li class="listitem"><p>
          When processing SQL code, it is executed statement by
          statement using the following logic: read/process/print
          result.
        </p></li><li class="listitem"><p>
          When processing non-SQL code, it is loaded entirely from the
          input source and executed as a unit.
</p></li></ul>
</div>
<p>
      Use the <a class="link" href="programs.html#option_mysqlsh_interactive"><code class="option">--interactive</code></a> (or
      <code class="option">-i</code>) command-line option to configure
      MySQL Shell to process the input source as if it were being
      issued in interactive mode; this enables all the features provided
      by the Interactive mode to be used in batch processing.
</p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Note
</div>
<p>
        In this case, whatever the source is, it is read line by line
        and processed using the interactive pipeline.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h5 class="title"><a name="mysql-shell-multiple-line-support"></a>3.8.3.5.1 Multiple-line Support</h5>

</div>

</div>

</div>
<p>
        It is possible to specify statements over multiple lines. When
        in Python or JavaScript mode, multiple-line mode is
        automatically enabled when a block of statements starts like in
        function definitions, if/then statements, for loops, and so on.
        In SQL mode multiple line mode starts when the command
        <code class="literal">\</code> is issued.
      </p><p>
        Once multiple-line mode is started, the subsequently entered
        statements are cached.
      </p><p>
        For example:
      </p><pre class="programlisting">
mysql-sql&gt; <strong class="userinput"><code>\</code></strong>
... <strong class="userinput"><code>create procedure get_actors()</code></strong>
... <strong class="userinput"><code>begin</code></strong>
... <strong class="userinput"><code>  select first_name from sakila.actor;</code></strong>
... <strong class="userinput"><code>end</code></strong>
...
mysql-sql&gt;
</pre>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-shell-configuring"></a>3.8.4 Configuring MySQL Shell</h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="document-store.html#mysql-shell-commands">3.8.4.1 MySQL Shell Commands</a></span></dt></dl>
</div>
<p>
    This section explains how to configure MySQL Shell using commands
    executable from the interactive code editor and command-line
    options. For a description of MySQL Shell command-line options,
    see <a class="xref" href="programs.html#mysqlsh" title="5.5.7 mysqlsh — The MySQL Shell">Section 5.5.7, “<span class="command"><strong>mysqlsh</strong></span> — The MySQL Shell”</a>.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-shell-commands"></a>3.8.4.1 MySQL Shell Commands</h4>
</div>
</div>
</div>
<p>
      MySQL Shell provides commands which enable you to modify the
      execution environment of the code editor, for example to configure
      the active programming language or a MySQL Server connection. The
      following table lists the commands that are available regardless
      of the currently selected language. As commands need to be
      available independent of the <span class="emphasis"><em>execution mode</em></span>,
      they start with an escape sequence, the <code class="literal">\</code>
      character.
</p>
<div class="informaltable">
<table class="informaltable" summary="This table lists the commands that are
        available." border="1"><colgroup><col><col><col></colgroup><thead><tr><th scope="col">Command</th><th scope="col">Alias/Shortcut</th><th scope="col">Description</th></tr></thead><tbody><tr><td scope="row"><p>
                <code class="literal">\help</code>
              </p></td><td><p>
                <code class="literal">\h</code> or <code class="literal">\?</code>
              </p></td><td><p>
                Prints help about MySQL Shell commands.
              </p></td></tr><tr><td scope="row"><p>
                <code class="literal">\quit</code>
              </p></td><td><p>
                <code class="literal">\q</code> or <code class="literal">\exit</code>
              </p></td><td><p>
                Exit MySQL Shell.
              </p></td></tr><tr><td scope="row"><p>
                <code class="literal">\</code>
              </p></td><td> </td><td><p>
                In SQL mode, begin multiple-line mode. Code is cached
                and executed when an empty line is entered.
              </p></td></tr><tr><td scope="row"><p>
                <code class="literal">\status</code>
              </p></td><td> </td><td><p>
                Show the current MySQL Shell status.
              </p></td></tr><tr><td scope="row"><p>
                <code class="literal">\js</code>
              </p></td><td> </td><td><p>
                Switch execution mode to JavaScript.
              </p></td></tr><tr><td scope="row"><p>
                <code class="literal">\py</code>
              </p></td><td> </td><td><p>
                Switch execution mode to Python.
              </p></td></tr><tr><td scope="row"><p>
                <code class="literal">\sql</code>
              </p></td><td> </td><td><p>
                Switch execution mode to SQL.
              </p></td></tr><tr><td scope="row"><p>
                <code class="literal">\connect</code>
              </p></td><td><p>
                <code class="literal">\cx</code>
              </p></td><td><p>
                Connect to a MySQL Server with a URI using an XSession
                (X Protocol).
              </p></td></tr><tr><td scope="row"><p>
                <code class="literal">\connect_node</code>
              </p></td><td><p>
                <code class="literal">\cn</code>
              </p></td><td><p>
                (Removed in version 1.0.4, use <code class="literal">\connect
                -n</code>) Connect to a MySQL Server with a URI using
                a Node session.
              </p></td></tr><tr><td scope="row"><p>
                <code class="literal">\connect_classic</code>
              </p></td><td><p>
                <code class="literal">\cc</code>
              </p></td><td><p>
                (Removed in version 1.0.4, use <code class="literal">\connect
                -c</code>) Connect to a MySQL Server with a URI using
                a Classic session (MySQL Protocol).
              </p></td></tr><tr><td scope="row"><p>
                <code class="literal">\use</code>
              </p></td><td> </td><td><p>
                Specify the schema to use.
              </p></td></tr><tr><td scope="row"><p>
                <code class="literal">\source</code>
              </p></td><td><p>
                <code class="literal">\.</code>
              </p></td><td><p>
                Execute a script file using the active language.
              </p></td></tr><tr><td scope="row"><p>
                <code class="literal">\warnings</code>
              </p></td><td><p>
                <code class="literal">\W</code>
              </p></td><td><p>
                Show any warnings generated by a statement.
              </p></td></tr><tr><td scope="row"><p>
                <code class="literal">\nowarnings</code>
              </p></td><td><p>
                <code class="literal">\w</code>
              </p></td><td><p>
                Do not show any warnings generated by a statement.
              </p></td></tr><tr><td scope="row"><p>
                <code class="literal">\lsconn</code>
              </p></td><td><p>
                <code class="literal">\lsc</code>
              </p></td><td><p>
                Print the connection data for the stored sessions.
              </p></td></tr><tr><td scope="row"><p>
                <code class="literal">\saveconn</code>
              </p></td><td><p>
                <code class="literal">\savec</code>
              </p></td><td><p>
                Save connection data of a session, optionaly use
                <code class="literal">-f</code> to force overwriting an existing
                connection.
              </p></td></tr><tr><td scope="row"><p>
                <code class="literal">\addconn</code>
              </p></td><td><p>
                <code class="literal">\addc</code>
              </p></td><td><p>
                (Removed in version 1.0.4, see
                <code class="literal">\saveconn</code>) Store the connection data
                of a session.
              </p></td></tr><tr><td scope="row"><p>
                <code class="literal">\rmconn</code>
              </p></td><td> </td><td><p>
                Removes a stored session.
              </p></td></tr><tr><td scope="row"><p>
                <code class="literal">\chconn</code>
              </p></td><td> </td><td><p>
                (Removed in version 1.0.4, see
                <code class="literal">\saveconn</code>) Updates a stored session.
</p></td></tr></tbody></table>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777644485552"></a>Help Command</h5>

</div>

</div>

</div>
<p>
        The <code class="literal">\help</code> command can be used with or without
        parameters. When used without parameters a general help is
        printed including information about:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Available commands.
          </p></li><li class="listitem"><p>
            Available commands for the active mode.
</p></li></ul>
</div>
<p>
        When used with a parameter, the parameter must be a valid
        command. If that is the case, help for that specific command is
        printed including:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            Description
          </p></li><li class="listitem"><p>
            Supported aliases if any
          </p></li><li class="listitem"><p>
            Additional help if any
</p></li></ul>
</div>
<p>
        For example:
      </p><pre class="programlisting">
<strong class="userinput"><code>\help connect</code></strong>
</pre><p>
        If the parameter is not a valid command, the general help is
        printed.
</p>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777644475696"></a>Connect Command</h5>

</div>

</div>

</div>
<p>
        The <code class="literal">\connect</code> command is used to connect to a
        MySQL Server using an URI. This command creates an
        X Protocol connection by default.
      </p><p>
        For example:
      </p><pre class="programlisting">
<strong class="userinput"><code>\connect root@localhost:3306</code></strong>
</pre><p>
        If a password is required you are prompted for it.
      </p><p>
        Use the <code class="literal">-n</code> option to create a Node session,
        using the X Protocol to connect to a single server. For
        example:
      </p><pre class="programlisting">
<strong class="userinput"><code>\connect -n root@localhost:3306</code></strong>
</pre><p>
        Use the <code class="literal">-c</code> option to create a Classic
        session, enabling you to use the MySQL Protocol to issue SQL
        commands directly on a server. For example:
      </p><pre class="programlisting">
<strong class="userinput"><code>\connect -c root@localhost:3306</code></strong>
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777644466144"></a>Source Command</h5>

</div>

</div>

</div>
<p>
        The <code class="literal">\source</code> command is used to execute code
        from a script at a given path. For example:
      </p><pre class="programlisting">
<strong class="userinput"><code>\source /tmp/mydata.sql</code></strong>
</pre><p>
        It can be used to execute either SQL, JavaScript or Python code.
        The code in the file is executed using the active language, so
        to process SQL code the MySQL Shell must be in SQL mode.
</p>
<div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Warning
</div>
<p>
          As the code is executed using the active language, executing a
          script in a different language than the currently selected
          execution mode language could lead to unexpected results.
</p>
</div>

</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="idm139777644461152"></a>Use Command</h5>

</div>

</div>

</div>
<p>
        The <code class="literal">\use</code> command enables you to choose which
        schema is active, for example:
      </p><pre class="programlisting"><strong class="userinput"><code>\use <em class="replaceable"><code>schema_name</code></em></code></strong></pre><p>
        The <code class="literal">\use</code> command requires a global
        development session to be active. If the global development
        session is an XSession then the <code class="literal">\use</code> command
        only sets <code class="literal">db</code> to the object representing the
        <em class="replaceable"><code>schema_name</code></em> but does not set a
        current schema on the database. If the global development
        session is one of NodeSession or ClassicSession the
        <code class="literal">\</code>use command sets the current schema to the
        specified <em class="replaceable"><code>schema_name</code></em> and updates the
        <code class="literal">db</code> variable to the object that represents the
        selected schema.
</p>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-shell-stored-sessions"></a>3.8.5 Stored Sessions</h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="document-store.html#mysql-shell-stored-session-shell-commands">3.8.5.1 MySQL Shell Stored Session Commands</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-stored-session-scripting">3.8.5.2 Scripting Stored Sessions</a></span></dt></dl>
</div>
<p>
    This section describes how MySQL Shell stores a persistent list of
    connection data for sessions, identified by a session name.
  </p><p>
    There are two approaches to manage and use stored connection data:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
        Through MySQL Shell commands.
      </p></li><li class="listitem"><p>
        Through a built-in object available for JavaScript and Python.
</p></li></ul>
</div>
<p>
    With these options you can add, update, remove, list and use stored
    connection data.
  </p><p>
    The connections are stored as a text file in the MySQL Shell
    folder, usually found in the user directory.
  </p><p>
    The file name is <code class="filename">stored_sessions.json</code>
  </p><p>
    In Windows a typical location is:
  </p><pre class="programlisting">
%APPDATA%\MySQL\mysqlsh\stored_sessions.json
</pre><p>
    In Unix a typical location is:
  </p><pre class="programlisting">
~/.mysqlsh/stored_sessions.json
</pre>
<div class="section">

<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-shell-stored-session-shell-commands"></a>3.8.5.1 MySQL Shell Stored Session Commands</h4>
</div>
</div>
</div>
<p>
      The following commands are used to work with stored sessions
      within MySQL Shell.
</p>
<div class="simplesect">

<div class="titlepage">
<div>

<div class="simple">
<h5 class="title"><a name="mysql-shell-stored-session-adding-connection"></a>Adding a Connection</h5>
</div>
</div>
</div>
<p>
        To add connection data for a session use:
      </p><pre class="programlisting">
\saveconn name [URI]
</pre>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <em class="replaceable"><code>name</code></em> : Mandatory parameter, the
            name that is assigned to the stored connection data. Note
            that this must be a valid identifier:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                Starts with an alphabetic character.
              </p></li><li class="listitem"><p>
                Only contains alphanumeric characters and underscore.
</p></li></ul>
</div>
</li><li class="listitem"><p>
            <em class="replaceable"><code>URI</code></em> : Optional parameter
            containing connection data in URI format. If not specified
            and a global session is active, the URI for the global
            session is used instead.
          </p></li><li class="listitem"><p>
            <code class="option">-f</code> : Optional parameter to force
            overwriting an existing connection. If an attempt is made to
            store a connection, but the provided
            <em class="replaceable"><code>name</code></em> already exists, an error
            occurs. Use this parameter to force storing the connection,
            which overrides what was previously stored under the given
            session name.
</p></li></ul>
</div>

</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="mysql-shell-stored-session-updating-a-connection"></a>Updating a Stored Connection</h5>

</div>

</div>

</div>
<p>
        To update the connection data for a specific session name use:
      </p><pre class="programlisting">
\saveconn -f <em class="replaceable"><code>name</code></em> URI
</pre>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <em class="replaceable"><code>name</code></em> : Mandatory parameter,
            indicates the connection to be updated.
          </p></li><li class="listitem"><p>
            <code class="option">URI</code> : Mandatory parameter, contains the
            connection data that replaces the connection for the
            indicated session name.
</p></li></ul>
</div>

</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="mysql-shell-stored-session-removing-connection"></a>Removing a Stored Connection</h5>

</div>

</div>

</div>
<p>
        To remove a connection use:
      </p><pre class="programlisting">
\rmconn <em class="replaceable"><code>name</code></em>
</pre>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <em class="replaceable"><code>name</code></em> : Mandatory parameter that
            indicates the connection data to be removed.
</p></li></ul>
</div>

</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="mysql-shell-stored-session-listing-connections"></a>Listing the Stored Connections</h5>

</div>

</div>

</div>
<p>
        To list the stored connections use:
      </p><pre class="programlisting">
\lsconn
</pre>
</div>
<div class="simplesect">
<div class="titlepage">
<div>
<div class="simple">
<h5 class="title"><a name="mysql-shell-stored-session-using-connections"></a>Using a Stored Connection</h5>

</div>

</div>

</div>
<p>
        Stored connections can be used to create a global session by
        issuing a <code class="literal">\connect
        <em class="replaceable"><code>name</code></em></code> command. The stored
        session is loaded and used to create the global session.
      </p><p>
        When using a stored connection through the connect shell
        commands, you are prompted for the password if it is missing
        from the stored connection data.
</p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-shell-stored-session-scripting"></a>3.8.5.2 Scripting Stored Sessions</h4>

</div>

</div>

</div>
<p>
      A built in object is available to manage and use the stored
      connections through JavaScript or Python:
      <code class="literal">shell.storedSessions</code>
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h5 class="title"><a name="mysql-shell-stored-session-scripting-adding"></a>3.8.5.2.1 Adding a Connection</h5>
</div>
</div>
</div>
<p>
        To add a new connection use:
      </p><pre class="programlisting">
shell.storedSessions.add(name, connectionData[, override])
</pre>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <em class="replaceable"><code>name</code></em> : Mandatory parameter, it is
            the session name that identifies the connection data. This
            must be a valid identifier.
          </p></li><li class="listitem"><p>
            <code class="option">connectionData</code> : Mandatory parameter, it
            contains the connection information and can be either a
            string in URI format or a connection data map containing any
            of the following values:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                host
              </p></li><li class="listitem"><p>
                port
              </p></li><li class="listitem"><p>
                dbUser
              </p></li><li class="listitem"><p>
                dbPassword
              </p></li><li class="listitem"><p>
                schema
              </p></li><li class="listitem"><p>
                ssl_ca
              </p></li><li class="listitem"><p>
                ssl_cert
              </p></li><li class="listitem"><p>
                ssl_key
              </p><p>
                To store the connection data at least the host and
                dbUser parameter should be specified, the rest are
                optional.
</p></li></ul>
</div>
</li><li class="listitem"><p>
            <span class="strong"><strong>override</strong></span> : Optional
            boolean parameter, used to indicate the desired behavior in
            case there is a stored connection data associated to the
            same name. Default value is false.
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                If override is false and connection data with the same
                name already exists, an error is generated.
              </p></li><li class="listitem"><p>
                In the same scenario, if the new connection data
                overrides the previous data and an error is not
                generated.
</p></li></ul>
</div>
</li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h5 class="title"><a name="mysql-shell-updating-stored-connection"></a>3.8.5.2.2 Updating a Stored Connection</h5>

</div>

</div>

</div>
<p>
        To update the connection data for a specific session name use:
      </p><pre class="programlisting">
shell.storedSessions.update(name, connectionData)
</pre>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <span class="strong"><strong>name</strong></span> : Mandatory
            parameter, it is the name that will identify the connection
            data. Note that this must be a valid identifier.
          </p></li><li class="listitem"><p>
            <span class="strong"><strong>connectionData</strong></span> :
            Mandatory parameter, it contains the connection data and can
            be either a string in URI format or a connection data map.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h5 class="title"><a name="mysql-shell-removing-stored-connection"></a>3.8.5.2.3 Removing a Stored Connection</h5>

</div>

</div>

</div>
<p>
        To remove a connection use:
      </p><pre class="programlisting">
shell.storedSessions.remove(name)
</pre>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <span class="strong"><strong>name</strong></span> : Mandatory
            parameter, identifies the connection data to be removed.
</p></li></ul>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h5 class="title"><a name="mysql-shell-listing-stored-connections"></a>3.8.5.2.4 Listing the Stored Connections</h5>

</div>

</div>

</div>
<p>
        To list the stored connections use:
      </p><pre class="programlisting">
shell.storedSessions
</pre>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h5 class="title"><a name="mysql-shell-using-stored-connection"></a>3.8.5.2.5 Using a Stored Connection</h5>

</div>

</div>

</div>
<p>
        When the <code class="literal">shell.storedSessions</code> object is
        initialized, it loads the stored session data and creates a
        property to access them as
        <code class="literal">shell.storedSessions.<em class="replaceable"><code>name</code></em></code>
      </p><pre class="programlisting">
var session = mysqlx.getSession(shell.storedSessions.name)
</pre><p>
        When used this way, if the connection data has no password it is
        not requested. It is the developers responsibility to provide
        the password either using the stored session data or as an
        additional parameter as follows:
      </p><pre class="programlisting">
var session = mysqlx.getSession(shell.storedSessions.name, password)
</pre>
</div>

</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-shell-application-log"></a>3.8.6 MySQL Shell Application Log</h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="document-store.html#mysql-shell-application-log-introduction">3.8.6.1 Application Log</a></span></dt></dl>
</div>
<p>
    This section explains the application log.
</p>
<div class="section">

<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-shell-application-log-introduction"></a>3.8.6.1 Application Log</h4>
</div>
</div>
</div>
<p>
      MySQL Shell can be configured to generate an application log
      file with information about issues of varying severity. You can
      use this information to verify the state of MySQL Shell while it
      is running.
    </p><p>
      The location of the log file is the user configuration path and
      the file is named <code class="filename">mysqlsh.log</code>.
</p>
<h5><a name="idm139777644372672"></a>Log File on Windows</h5>
<p>
      On Windows, the default path to the log file is
      <code class="filename">%APPDATA%\MySQL\mysqlsh\mysqlsh.log</code>
    </p><p>
      To find the location of <code class="filename">%APPDATA%</code> on your
      system, echo it from the comand-line. For example:
    </p><pre class="programlisting">
C:&gt;<strong class="userinput"><code>echo %APPDATA%</code></strong>

C:\Users\exampleuser\AppData\Roaming
</pre><p>
      On Windows, the path is determined by the result of gathering the
      <code class="filename">%APPDATA%</code> folder specific to that user, and
      then appending <code class="filename">MySQL\mysqlsh</code>. Using the above
      example, we end up with:

</p><pre class="programlisting">
C:\Users\exampleuser\AppData\Roaming\MySQL\mysqlsh\mysqlsh.log
</pre><p>
</p>
<h5><a name="idm139777644365520"></a>Log File on Unix-based Systems</h5>
<p>
      For a machine running Unix, the default path is
      <code class="filename">~/.mysqlsh/mysqlsh.log</code> where <span class="quote">“<span class="quote">~</span>”</span>
      represents the user's home directory. The environment variable
      <code class="varname">HOME</code> also represents the user's home directory.
      Appending <code class="filename">.mysqlsh</code> to the user's home
      directory determines the default path to the logs. For example:
    </p><pre class="programlisting">
C:&gt;<strong class="userinput"><code>echo $HOME</code></strong>

/home/exampleuser

shell&gt; <strong class="userinput"><code>less /home/exampleuser/.mysqlsh/mysqlsh.log</code></strong>
</pre><p>
      These paths can be overridden on all platforms by defining the
      environment variable <code class="literal">MYSQL_USER_CONFIG_PATH</code>.
      The value of this variable replaces <code class="literal">%APPDATA%</code>
      in Windows or <code class="literal">$HOME</code> in Unix.
    </p><p>
      By default, logging is disabled in MySQL Shell. To enable
      logging use the <a class="link" href="programs.html#option_mysqlsh_log-level"><code class="option">--log-level</code></a>
      command-line option when starting MySQL Shell. For example:
    </p><pre class="programlisting">
shell&gt; <strong class="userinput"><code>mysqlsh --log-level=4</code></strong>
</pre><p>
      The number assigned to <a class="link" href="programs.html#option_mysqlsh_log-level"><code class="option">--log-level</code></a>
      controls the level of detail in the log. The following logging
      levels are supported:
</p>
<div class="informaltable">
<table class="informaltable" summary="This table lists the logging levels that are
        supported." border="1"><colgroup><col><col></colgroup><thead><tr><th scope="col">Log Level</th><th scope="col">Meaning</th></tr></thead><tbody><tr><td scope="row"><p>
                1
              </p></td><td><p>
                None, the default
              </p></td></tr><tr><td scope="row"><p>
                2
              </p></td><td><p>
                Internal Error
              </p></td></tr><tr><td scope="row"><p>
                3
              </p></td><td><p>
                Error
              </p></td></tr><tr><td scope="row"><p>
                4
              </p></td><td><p>
                Warning
              </p></td></tr><tr><td scope="row"><p>
                5
              </p></td><td><p>
                Info
              </p></td></tr><tr><td scope="row"><p>
                6
              </p></td><td><p>
                Debug
              </p></td></tr><tr><td scope="row"><p>
                7
              </p></td><td><p>
                Debug2
              </p></td></tr><tr><td scope="row"><p>
                8
              </p></td><td><p>
                Debug3
</p></td></tr></tbody></table>
</div>
<p>
      The log format is plain text and entries contain a timestamp and
      description of the problem, along with the log level from the
      above list. For example:
    </p><pre class="programlisting">
2016-04-05 22:23:01: Error: Default Domain: (shell):1:8: MySQLError: You have an error
in your SQL syntax; check the manual that corresponds to your MySQL server version for
the right syntax to use near '' at line 1 (1064) in session.sql("select * from t
limit").execute().all();
</pre>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h3 class="title"><a name="mysql-shell-customizing"></a>3.8.7 Customizing MySQL Shell</h3>

</div>

</div>

</div>
<div class="toc">
<dl class="toc"><dt><span class="section"><a href="document-store.html#mysql-shell-creating-startup-scripts">3.8.7.1 Working With Start-Up Scripts</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-adding-module-search-paths">3.8.7.2 Adding Module Search Paths</a></span></dt><dt><span class="section"><a href="document-store.html#mysql-shell-overriding-the-default-prompt">3.8.7.3 Overriding the Default Prompt</a></span></dt></dl>
</div>
<p>
    MySQL Shell offers the ability to customize the behavior and code
    execution environment through startup scripts, which are executed
    when the application is first run. Using such scripts enables you
    to:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
        Add additional search paths for Python or JavaScript modules.
      </p></li><li class="listitem"><p>
        Override the default prompt used by the Python and JavaScript
        modes.
      </p></li><li class="listitem"><p>
        Define global functions or variables.
      </p></li><li class="listitem"><p>
        Any other possible initialization through JavaScript or Python.
</p></li></ul>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-shell-creating-startup-scripts"></a>3.8.7.1 Working With Start-Up Scripts</h4>

</div>

</div>

</div>
<p>
      When MySQL Shell enters either into JavaScript or Python mode,
      it searches for startup scripts to be executed. The startup
      scripts are JavaScript or Python specific scripts containing the
      instructions to be executed when the corresponding mode is
      initialized.
    </p><p>
      Startup scripts must be named as follows:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          For JavaScript mode: <code class="filename">mysqlshrc.js</code>
        </p></li><li class="listitem"><p>
          For Python mode: <code class="filename">mysqlshrc.py</code>
</p></li></ul>
</div>
<p>
      MySQL Shell searches the following paths for these files (in
      order of execution).
    </p><p>
      On Windows:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
          <code class="literal">%PROGRAMDATA%MySQLmysqlshmysqlshrc.[js|py]</code>
        </p></li><li class="listitem"><p>
          <code class="literal">%MYSQLSH_HOME%sharedmysqlshmysqlshrc.[js|py]</code>
        </p></li><li class="listitem"><p>
          <code class="literal">&lt;mysqlsh binary
          path&gt;mysqlshrc.[js|py]</code>
        </p></li><li class="listitem"><p>
          <code class="literal">%APPDATA%MySQLmysqlshmysqlshrc.[js|py]</code>
</p></li></ol>
</div>
<p>
      On Linux and OSX:
</p>
<div class="orderedlist">
<ol class="orderedlist" type="1"><li class="listitem"><p>
          <code class="literal">/etc/mysql/mysqlsh/mysqlshrc.[js|py]</code>
        </p></li><li class="listitem"><p>
          <code class="literal">$MYSQLSH_HOME/shared/mysqlsh/mysqlshrc.[js|py]</code>
        </p></li><li class="listitem"><p>
          <code class="literal">&lt;mysqlsh binary
          path&gt;/mysqlshrc.[js|py]</code>
        </p></li><li class="listitem"><p>
          <code class="literal">$HOME/.mysqlsh/mysqlshrc.[js|py]</code>
</p></li></ol>
</div>
<p>
      The environment variable <code class="literal">MYSQLSH_HOME</code> defines
      the root folder of a standard setup of MySQL Shell. If
      <code class="literal">MYSQLSH_HOME</code> is not defined it is automatically
      calculated based on the location of the MySQL Shell binary,
      therefore on many standard setups it is not required to define
      <code class="literal">MYSQLSH_HOME</code>.
    </p><p>
      If <code class="literal">MYSQLSH_HOME</code> is not defined and the
      MySQL Shell binary is not in a standard install folder
      structure, then the path defined in option 3 in the above lists is
      used. If using a standard install or if
      <code class="literal">MYSQLSH_HOME</code> points to a standard install
      folder structure, then the path defined in option 3 is not used.
</p>
<div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">

<div class="admon-title">
Warning
</div>
<p>
        The lists above also define the order of searching the paths, so
        if something is defined in two different scripts, the script
        executed later takes precedence.
</p>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-shell-adding-module-search-paths"></a>3.8.7.2 Adding Module Search Paths</h4>

</div>

</div>

</div>
<p>
      

      There are two ways to add additional module search paths:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          Through environment variables
        </p></li><li class="listitem"><p>
          Through startup scripts
</p></li></ul>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h5 class="title"><a name="mysql-shell-environment-variables"></a>3.8.7.2.1 Environment Variables</h5>

</div>

</div>

</div>
<p>
        Python uses the <code class="literal">PYTHONPATH</code> environment
        variable to allow extending the search paths for python modules.
        The value of this variable is a list of paths separated by:
</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            A colon character in Linux and OSX
          </p></li><li class="listitem"><p>
            A semicolon character in Windows
</p></li></ul>
</div>
<p>
        To achieve this in JavaScript, MySQL Shell supports defining
        additional JavaScript module paths using the
        <code class="literal">MYSQLSH_JS_MODULE_PATH</code> environment variable.
        The value of this variable is a list of semicolon separated
        paths.
</p>
</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h5 class="title"><a name="mysql-shell-startup-scripts"></a>3.8.7.2.2 Startup Scripts</h5>

</div>

</div>

</div>
<p>
        The addition of module search paths can be achieved for both
        languages through the corresponding startup script.
      </p><p>
        For Python modify the <code class="filename">mysqlshrc.py</code> file and
        append the required paths into the <code class="literal">sys.path</code>
        array.
      </p><pre class="programlisting">
# Import the sys module
import sys

# Append the additional module paths
sys.path.append('~/custom/python')
sys.path.append('~/other/custom/modules')</pre><p>
        For JavaScript the same task is achieved by adding code into the
        <code class="filename">mysqlshrc.js</code> file to append the required
        paths into the predefined
        <code class="literal">shell.js_module_paths</code> array.
      </p><pre class="programlisting">
// Append the additional module paths
shell.js.module_paths[shell.js.module_paths.length] = '~/custom/js';
shell.js.module_paths[shell.js.module_paths.length] = '~/other/custom/modules';</pre>
</div>

</div>
<div class="section">
<div class="titlepage">
<div>
<div>
<h4 class="title"><a name="mysql-shell-overriding-the-default-prompt"></a>3.8.7.3 Overriding the Default Prompt</h4>

</div>

</div>

</div>
<p>
      MySQL Shell uses a default prompt for both Python (
      <code class="literal">mysql-py&gt;</code> ) and JavaScript (
      <code class="literal">mysql-js&gt;</code> ).
    </p><p>
      You can customize the language specific prompt using the
      <code class="literal">shell.custom_prompt()</code> function. This function
      must return a string that is used as the prompt. To have a custom
      prompt when MySQL Shell starts, define this function in a
      startup script. The following example shows how this functionality
      can be used.
    </p><p>
      In Python <code class="literal">shell.custom_prompt()</code> could be
      defined as:
    </p><pre class="programlisting">
# Import the sys module
from time import gmtime, strftime

def my_prompt():
  ret_val = strftime("%H:%M:%S", gmtime())

  if session and session.isOpen():
    data = shell.parseUri(session.getUri())

    ret_val = "%s-%s-%s-py&gt; " % (ret_val, data.dbUser, data.host)
  else:
    ret_val = "%s-disconnected-py&gt; " % ret_val

  return ret_val


shell.custom_prompt = my_prompt</pre><p>
      In JavaScript <code class="literal">shell.custom_prompt()</code> could be
      defined as:
    </p><pre class="programlisting">
shell.custom_prompt = function(){
  var now = new Date();

  var ret_val = now.getHours().toString()+ ":" + now.getMinutes().toString() + ":" + now.getSeconds().toString();

  if (session &amp;&amp; session.isOpen()){
    var data = shell.parseUri(session.getUri());

    ret_val += "-" + data.dbUser + "-" + data.host + "-js&gt; ";
  }
  else
    ret_val += "-disconnected-js&gt; ";

  return ret_val;
}</pre><p>
      The following example demonstrates using the custom prompt
      functions defined above in startup script. The prompts show the
      current system time, and if a session is open the current user and
      host:
    </p><pre class="programlisting">
Welcome to MySQL Shell 1.0.4 Development Preview

Copyright (c) 2016, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type '\help', '\h' or '\?' for help.

Currently in JavaScript mode. Use \sql to switch to SQL mode and execute queries.
14:34:32-disconnected-js&gt; \py
Switching to Python mode...

19:34:39-disconnected-py&gt; \connect root:@localhost
Creating an X Session to root@localhost:33060
No default schema selected.

19:34:50-root-localhost-py&gt; \js
Switching to JavaScript mode...
14:34:57-root-localhost-js&gt;</pre>
</div>

</div>

</div>

</div>
<div class="copyright-footer">

</div>
<div class="navfooter">
<hr>
<table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left"><a accesskey="p" href="installing.html">Prev</a></td>
<td width="20%" align="center"><a accesskey="u" href="">Up</a></td>
<td width="40%" align="right"> <a accesskey="n" href="tutorial.html">Next</a></td>
</tr>
<tr>
<td width="40%" align="left" valign="top">Chapter 2 Installing and Upgrading MySQL</td>
<td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td>
<td width="40%" align="right" valign="top">Chapter 4 Tutorial</td>
</tr>
</table>
</div>
</body>
</html>
